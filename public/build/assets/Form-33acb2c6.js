import{G as ue,H as ce,I as me,J as pe,F as D,K as _e,R as fe,S as ge,L as ve,M as be,N as he,P as ye,Q as we,V as ke,U as xe,W as Te,X as Ve,Y as Se,_ as Oe,$ as Ce,a0 as $e,k as Ue,a1 as Pe,c as te,f as R,e as k,a as l,a2 as Me,a3 as Be,a4 as Ee,a5 as je,a6 as Re,a7 as De,g as A,b as a,a8 as qe,a9 as Ne,D as J,aa as Ae,ab as Fe,ac as He,ad as Le,ae as Ie,af as ze,ag as Ge,ah as Ke,ai as Ze,aj as We,ak as Je,al as Qe,am as Xe,an as Ye,ao as et,E as tt,ap as st,aq as ot,ar as at,as as lt,at as rt,au as nt,av as it,aw as dt,ax as ut,ay as ct,z as mt,az as pt,aA as _t,aB as ft,aC as gt,aD as vt,aE as bt,aF as ht,m as yt,n as se,aG as wt,aH as kt,aI as xt,aJ as Tt,aK as Vt,aL as St,aM as Ot,aN as Ct,y as $t,aO as Ut,aP as Pt,aQ as Mt,aR as Bt,aS as oe,aT as Et,o as y,aU as jt,aV as Rt,aW as Dt,aX as qt,aY as Nt,aZ as At,a_ as Ft,d as U,a$ as Ht,b0 as Lt,h as H,r as It,b1 as zt,b2 as Gt,b3 as Kt,b4 as Zt,b5 as Wt,b6 as Jt,b7 as Qt,b8 as Xt,b9 as Yt,ba as es,bb as ts,bc as ss,bd as os,be as as,t as _,bf as ls,bg as rs,bh as ns,bi as is,bj as ds,bk as us,bl as cs,bm as ms,u as t,bn as ps,bo as _s,bp as fs,bq as gs,br as vs,bs,bt as hs,v as ys,bu as ws,bv as ks,bw as xs,C as W,A as ae,bx as Ts,by as Vs,x as le,bz as Ss,bA as Os,bB as Cs,bC as $s,w as F,bD as Us,l as L,bE as Ps,bF as Ms,i as re,bG as Bs,q as Es,p as js,bH as Rs,T as Ds,O as K,j as Y}from"./app-f3706b4b.js";import{L as p,I as b}from"./Label-43c6d8f7.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{C as T}from"./Checkbox-250b6c3c.js";import{t as qs,a as Ns,l as Z,m as As,v as ee,u as Fs,i as Hs}from"./pin-0f35e0c1.js";const Ls=()=>{},Is=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:ue,BaseTransitionPropsValidators:ce,Comment:me,EffectScope:pe,Fragment:D,KeepAlive:_e,ReactiveEffect:fe,Static:ge,Suspense:ve,Teleport:be,Text:he,Transition:ye,TransitionGroup:we,VueElement:ke,assertNumber:xe,callWithAsyncErrorHandling:Te,callWithErrorHandling:Ve,camelize:Se,capitalize:Oe,cloneVNode:Ce,compatUtils:$e,compile:Ls,computed:Ue,createApp:Pe,createBlock:te,createCommentVNode:R,createElementBlock:k,createElementVNode:l,createHydrationRenderer:Me,createPropsRestProxy:Be,createRenderer:Ee,createSSRApp:je,createSlots:Re,createStaticVNode:De,createTextVNode:A,createVNode:a,customRef:qe,defineAsyncComponent:Ne,defineComponent:J,defineCustomElement:Ae,defineEmits:Fe,defineExpose:He,defineModel:Le,defineOptions:Ie,defineProps:ze,defineSSRCustomElement:Ge,defineSlots:Ke,get devtools(){return Ze},effect:We,effectScope:Je,getCurrentInstance:Qe,getCurrentScope:Xe,getTransitionRawChildren:Ye,guardReactiveProps:et,h:tt,handleError:st,hasInjectionContext:ot,hydrate:at,initCustomFormatter:lt,initDirectivesForSSR:rt,inject:nt,isMemoSame:it,isProxy:dt,isReactive:ut,isReadonly:ct,isRef:mt,isRuntimeOnly:pt,isShallow:_t,isVNode:ft,markRaw:gt,mergeDefaults:vt,mergeModels:bt,mergeProps:ht,nextTick:yt,normalizeClass:se,normalizeProps:wt,normalizeStyle:kt,onActivated:xt,onBeforeMount:Tt,onBeforeUnmount:Vt,onBeforeUpdate:St,onDeactivated:Ot,onErrorCaptured:Ct,onMounted:$t,onRenderTracked:Ut,onRenderTriggered:Pt,onScopeDispose:Mt,onServerPrefetch:Bt,onUnmounted:oe,onUpdated:Et,openBlock:y,popScopeId:jt,provide:Rt,proxyRefs:Dt,pushScopeId:qt,queuePostFlushCb:Nt,reactive:At,readonly:Ft,ref:U,registerRuntimeCompiler:Ht,render:Lt,renderList:H,renderSlot:It,resolveComponent:zt,resolveDirective:Gt,resolveDynamicComponent:Kt,resolveFilter:Zt,resolveTransitionHooks:Wt,setBlockTracking:Jt,setDevtoolsHook:Qt,setTransitionHooks:Xt,shallowReactive:Yt,shallowReadonly:es,shallowRef:ts,ssrContextKey:ss,ssrUtils:os,stop:as,toDisplayString:_,toHandlerKey:ls,toHandlers:rs,toRaw:ns,toRef:is,toRefs:ds,toValue:us,transformVNodeArgs:cs,triggerRef:ms,unref:t,useAttrs:ps,useCssModule:_s,useCssVars:fs,useModel:gs,useSSRContext:vs,useSlots:bs,useTransitionState:hs,vModelCheckbox:ys,vModelDynamic:ws,vModelRadio:ks,vModelSelect:xs,vModelText:W,vShow:ae,version:Ts,warn:Vs,watch:le,watchEffect:Ss,watchPostEffect:Os,watchSyncEffect:Cs,withAsyncContext:$s,withCtx:F,withDefaults:Us,withDirectives:L,withKeys:Ps,withMemo:Ms,withModifiers:re,withScopeId:Bs},Symbol.toStringTag,{value:"Module"})),zs=J({props:["message"]}),Gs={class:"text-sm text-red-600"};function Ks(f,m,w,P,d,n){return L((y(),k("div",null,[l("p",Gs,_(f.message),1)],512)),[[ae,f.message]])}const u=ne(zs,[["render",Ks]]),Zs=J({props:["modelValue","options","multiple","placeholder","placeholderEnabled"],emits:["update:modelValue"],methods:{focus(){this.$refs.select.focus()}}}),Ws=["value","multiple"],Js=["disabled"],Qs=["value"];function Xs(f,m,w,P,d,n){return y(),k("select",{ref:"select",value:f.modelValue,onInput:m[0]||(m[0]=x=>f.$emit("update:modelValue",x.target.value)),multiple:f.multiple,class:"w-full select select-bordered"},[l("option",{disabled:!f.placeholderEnabled,value:""},_(f.placeholder),9,Js),(y(!0),k(D,null,H(f.options,(x,c)=>(y(),k("option",{value:c},_(x),9,Qs))),256))],40,Ws)}const E=ne(Zs,[["render",Xs]]);var ie={exports:{}};const Ys=Es(Is);(function(f,m){(function(P,d){f.exports=d(Ys)})(js,w=>(()=>{var P={772:(c,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=(e,M)=>{const C=e.__vccOpts||e;for(const[S,V]of M)C[S]=V;return C}},976:c=>{c.exports=w}},d={};function n(c){var v=d[c];if(v!==void 0)return v.exports;var e=d[c]={exports:{}};return P[c](e,e.exports,n),e.exports}n.d=(c,v)=>{for(var e in v)n.o(v,e)&&!n.o(c,e)&&Object.defineProperty(c,e,{enumerable:!0,get:v[e]})},n.o=(c,v)=>Object.prototype.hasOwnProperty.call(c,v),n.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var x={};return(()=>{n.r(x),n.d(x,{ToastComponent:()=>q,ToastPlugin:()=>B,ToastPositions:()=>g,default:()=>G,useToast:()=>N});var c=n(976);const v=(0,c.createElementVNode)("div",{class:"v-toast__icon"},null,-1),e=["innerHTML"];function M(i,r,s,o,h,O){return(0,c.openBlock)(),(0,c.createBlock)(c.Transition,{"enter-active-class":i.transition.enter,"leave-active-class":i.transition.leave},{default:(0,c.withCtx)(()=>[(0,c.withDirectives)((0,c.createElementVNode)("div",{ref:"root",role:"alert",class:(0,c.normalizeClass)(["v-toast__item",[`v-toast__item--${i.type}`,`v-toast__item--${i.position}`]]),onMouseover:r[0]||(r[0]=de=>i.toggleTimer(!0)),onMouseleave:r[1]||(r[1]=de=>i.toggleTimer(!1)),onClick:r[2]||(r[2]=function(){return i.whenClicked&&i.whenClicked(...arguments)})},[v,(0,c.createElementVNode)("p",{class:"v-toast__text",innerHTML:i.message},null,8,e)],34),[[c.vShow,i.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function C(i){var r;typeof i.remove<"u"?i.remove():(r=i.parentNode)==null||r.removeChild(i)}function S(i,r,s){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const h=(0,c.h)(i,r,o),O=document.createElement("div");return O.classList.add("v-toast--pending"),s.appendChild(O),(0,c.render)(h,O),h.component}class V{constructor(r,s){this.startedAt=Date.now(),this.callback=r,this.delay=s,this.timer=setTimeout(r,s)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const g=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function I(i){return{all:i=i||new Map,on:function(r,s){var o=i.get(r);o?o.push(s):i.set(r,[s])},off:function(r,s){var o=i.get(r);o&&(s?o.splice(o.indexOf(s)>>>0,1):i.set(r,[]))},emit:function(r,s){var o=i.get(r);o&&o.slice().map(function(h){h(s)}),(o=i.get("*"))&&o.slice().map(function(h){h(r,s)})}}}const j=I(),z=(0,c.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:g.BOTTOM_RIGHT,validator(i){return Object.values(g).includes(i)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),j.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const i=document.body;i.appendChild(this.parentTop),i.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const i=this.$refs.root;(0,c.render)(null,i),C(i)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const i=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),C(i),this.isActive=!0,this.duration&&(this.timer=new V(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(i){!this.pauseOnHover||!this.timer||(i?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return this.parentTop;case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){j.off("toast-clear",this.dismiss)}});var $=n(772);const q=(0,$.default)(z,[["render",M]]),N=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(r){let s=null;typeof r=="string"&&(s=r);const h=Object.assign({},{message:s},i,r);return{dismiss:S(q,h,document.body).ctx.dismiss}},clear(){j.emit("toast-clear")},success(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:r,type:"success"},s))},error(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:r,type:"error"},s))},info(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:r,type:"info"},s))},warning(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:r,type:"warning"},s))},default(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:r,type:"default"},s))}}},B={install:function(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=N(r);i.config.globalProperties.$toast=s,i.provide("$toast",s)}},G=B})(),x})())})(ie);var eo=ie.exports;const to={class:"px-4 max-w-screen-lg card bg-white dark:bg-base-100 shadow-xl my-5 mx-auto py-5 sm:p-6 rounded-md"},so={class:"hero-content text-center rounded bg-blue-700"},oo={class:"max-w-md"},ao={class:"text-xl text-white font-bold"},lo={class:"grid grid-cols-12 gap-6"},ro={key:0,class:"col-span-12"},no={class:"alert mt-5"},io=l("div",{class:"divider"},null,-1),uo={class:"mt-5 space-x-2 space-y-2 col-span-12"},co={key:0,class:"loading loading-spinner"},mo={class:"badge badge-ghost"},po={key:0},_o={class:"grid-cols-6"},fo={class:"w-48 rounded"},go=["src"],vo=["onClick"],bo=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ho=[bo],yo={class:"col-span-12"},wo={class:"col-span-12"},ko={class:"col-span-12"},xo={class:"col-span-12"},To={class:"col-span-12"},Vo=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),So=l("h3",{class:"col-span-12 text-center text-2xl font-bold"},"Füüsikalised-keemilised näitajad",-1),Oo={class:"col-span-6"},Co={class:"col-span-6"},$o={class:"col-span-6"},Uo={class:"col-span-6"},Po={class:"col-span-6"},Mo={class:"col-span-6"},Bo={class:"col-span-6"},Eo={class:"col-span-6"},jo={class:"col-span-6"},Ro={class:"col-span-6"},Do={class:"col-span-6"},qo={class:"col-span-6"},No=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),Ao=l("h3",{class:"col-span-12 text-center text-2xl font-bold"},"Hüdromorfoloogia",-1),Fo=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Veepiirist maismaa poole (kuni 10 m)",-1),Ho={class:"col-span-12"},Lo={class:"flex items-center"},Io=l("span",{class:"ml-2 text-sm text-gray-600"},_("Erosioon kaldaalalt"),-1),zo={class:"col-span-12"},Go={class:"col-span-12"},Ko={class:"col-span-12"},Zo=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),Wo=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Veepiirist veekogu poole (kuni 10 m)",-1),Jo={class:"col-span-12"},Qo={class:"flex items-center"},Xo=l("span",{class:"ml-2 text-sm text-gray-600"},_("Puujuures, oksad vms ulatuvad vett"),-1),Yo={class:"col-span-12"},ea={class:"col-span-12"},ta=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),sa=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Inimmõju (~50 m raadiuses vaatluskohast)",-1),oa={class:"col-span-12"},aa={class:"flex items-center"},la=l("span",{class:"ml-2 text-sm text-gray-600"},_("Ehitisi"),-1),ra={class:"col-span-12"},na={class:"flex items-center"},ia=l("span",{class:"ml-2 text-sm text-gray-600"},_("Põllumajanduslik tegevus"),-1),da={class:"col-span-12"},ua={class:"flex items-center"},ca=l("span",{class:"ml-2 text-sm text-gray-600"},_("Teed, parkimisplatsid"),-1),ma={class:"col-span-12"},pa={class:"flex items-center"},_a=l("span",{class:"ml-2 text-sm text-gray-600"},_("Park"),-1),fa={class:"col-span-12"},ga={class:"flex items-center"},va=l("span",{class:"ml-2 text-sm text-gray-600"},_("Supelrand"),-1),ba={class:"col-span-12"},ha={class:"flex items-center"},ya=l("span",{class:"ml-2 text-sm text-gray-600"},_("Paadisild, slip"),-1),wa={class:"col-span-12"},ka={class:"flex items-center"},xa=l("span",{class:"ml-2 text-sm text-gray-600"},_("Kaldakindlustusrajatised"),-1),Ta={class:"col-span-12"},Va={class:"flex items-center"},Sa=l("span",{class:"ml-2 text-sm text-gray-600"},_("Paisud, sillad"),-1),Oa={class:"col-span-12"},Ca={class:"flex items-center"},$a=l("span",{class:"ml-2 text-sm text-gray-600"},_("Kaldavööndi prügistamist"),-1),Ua={class:"col-span-12"},Pa={class:"flex items-center"},Ma=l("span",{class:"ml-2 text-sm text-gray-600"},_("Veereostust"),-1),Ba={class:"col-span-12"},Ea={class:"flex space-x-2 justify-end"},Aa={__name:"Form",props:{observation:{type:Object,required:!1,default:null},water_flows:{type:Object,required:!0},natures:{type:Object,required:!0},riparian_vegetations:{type:Object,required:!0},vegetation_coverages:{type:Object,required:!0},bottoms:{type:Object,required:!0},aquatic_vegetations:{type:Object,required:!0},coordinates:{type:Object,required:!0},name:{type:String,required:!0},water_body_kr_code:{type:String,required:!0},observation_spot_id:{type:Number,required:!0,default:null},photo_urls:{type:Object,required:!1,default:null}},setup(f){const m=f,w=Rs(),P="https://adaptest.ddev.site/storage/observations/";let d=m.observation!==null,n=m.observation,x=U(!1),v=U((()=>{const r=new Date,s=Intl.DateTimeFormat().resolvedOptions().timeZone;return new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:s,hour12:!1}).format(r).replace(/\//g,"-").replace(", ","T").slice(0,16)})()),e=Ds({measuring_time:v,odor:d?n.odor:"",color_turbidity:d?n.color_turbidity:"",conditions:d?n.conditions:"",ph:d?n.ph:"",water_temperature:d?n.water_temperature:"",air_temperature:d?n.air_temperature:"",specific_conductance:d?n.specific_conductance:"",total_dissolved_solids:d?n.total_dissolved_solids:"",nitrate:d?n.nitrate:"",bicarbonate:d?n.bicarbonate:"",redox_potential:d?n.redox_potential:"",dissolved_oxygen_percent:d?n.dissolved_oxygen_percent:"",dissolved_oxygen_mgl:d?n.dissolved_oxygen_mgl:"",discharge:d?n.discharge:"",water_flow:d?n.water_flow.number:"",flow_direction:d?n.flow_direction:"",erosion:d?!!n.erosion:!1,nature:d?n.nature.number:"",riparian_vegetation:d?n.riparian_vegetation.number:"",vegetation_coverage:d?n.vegetation_coverage.number:"",tree_roots:d?!!n.tree_roots:!1,bottom:d?n.bottom.number:"",aquatic_vegetation:d?n.aquatic_vegetation.number:"",buildings:d?!!n.buildings:!1,agricultural_activity:d?!!n.agricultural_activity:!1,roads:d?!!n.roads:!1,park:d?!!n.park:!1,beach:d?!!n.beach:!1,boat_bridge:d?!!n.boat_bridge:!1,shore_facility:d?!!n.shore_facility:!1,dams:d?!!n.dams:!1,littering:d?!!n.littering:!1,water_pollution:d?!!n.water_pollution:!1,water_body_kr_code:m.water_body_kr_code,observation_spot_id:m.observation_spot_id,latitude:m.coordinates.lat,longitude:m.coordinates.lng,observation_spot_name:d?n.observation_spot.name:"",observation_spot_description:d?n.observation_spot.description:"",photos:[]});const M=U(null),C=U(null),S=U(10);let V=null,g=U(!0),I=qs(58.379,24.554),Q=Ns([60.4349,29.4338],[56.7458,20.373]);var j=new Z.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:Z.bounds([40500,5993e3],[1064500,7017e3])});const z=Z.icon({iconUrl:As,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55]}),$=eo.useToast();le(m.coordinates,r=>{r&&V&&V.setView(r,S.value)});function X(){console.log("map ready"),V=M.value.leafletObject,V&&(V.scrollWheelZoom.disable(),m.coordinates&&V.setView(m.coordinates,S.value))}function q(r){r.target&&r.target.files?e.photos.value=[...r.target.files]:console.error("No photos found in the event.")}function N(){if(!e.photos.value||e.photos.value.length===0){$.error("Please add photos before uploading.");return}x.value=!0;let r=new FormData;e.photos.value.forEach(s=>{r.append("photos[]",s)}),K.post("/upload-files",r,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x.value=!1,w.props.flash.message&&$.success(w.props.flash.message)},onError:()=>{x.value=!1,w.props.flash.message&&$.error(w.props.flash.message)}})}let B=()=>{const r={forceFormData:!0};e.transform(s=>({...s,photos:m.photo_urls,water_body_kr_code:m.water_body_kr_code,observation_spot_id:m.observation_spot_id})),d?e.transform(s=>({...s,photos:m.photo_urls,_method:"PUT"})).post(route("observations.update",n.id),r):e.post(route("observations.store"),r)};function G(r){let s=r.split("/"),o=s[s.length-1];K.delete(`/delete-file/${o}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.props.flash.message&&$.info(w.props.flash.message),console.log("File deleted successfully");let h=m.photo_urls.findIndex(O=>O===r);h!==-1&&m.photo_urls.splice(h,1),e.photos.splice(h,1)},onError:()=>{w.props.flash.message&&$.error(w.props.flash.message)}})}function i(){K.post("/clear-file-urls",{},{preserveState:!0,onSuccess:()=>{console.log("File urls cleared successfully")},onError:r=>console.error("Error clearing file urls",r)})}return oe(()=>{i()}),(r,s)=>(y(),k(D,null,[a(t(Hs),{ref_key:"map",ref:M,crs:t(j),zoom:S.value,"onUpdate:zoom":s[0]||(s[0]=o=>S.value=o),style:{height:"400px",width:"100%"},useGlobalLeaflet:!1,center:t(I),bounds:t(Q),maxZoom:14,minZoom:3,scrollWheelZoom:!1,onReady:X},{default:F(()=>[a(t(ee),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/vreljeef/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",tms:t(g),"full-screen":!1,worldCopyJump:!0,"z-index":1,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),a(t(ee),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/hybriid/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",attribution:"Maa-ameti kaart, <a href='http://www.maaamet.ee'>Maa-amet</a>",tms:t(g),"full-screen":!1,worldCopyJump:!0,"z-index":2,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),t(m).coordinates?(y(),te(t(Fs),{key:0,"lat-lng":t(m).coordinates,icon:t(z),ref_key:"marker",ref:C},null,8,["lat-lng","icon"])):R("",!0)]),_:1},8,["crs","zoom","center","bounds"]),l("form",{onSubmit:s[37]||(s[37]=re((...o)=>t(B)&&t(B)(...o),["prevent"]))},[l("div",to,[l("div",so,[l("div",oo,[l("h1",ao,_(r.$t("Selected water body:"))+" "+_(f.name),1)])]),l("div",lo,[t(m).observation_spot_id===null||t(m).observation_spot_id==="null"?(y(),k("div",ro,[l("div",no,_(r.$t("This is a new observation spot. Please fill the fields below.")),1),a(p,{for:"observation_spot_name",value:r.$t("New observation spot name *")},null,8,["value"]),a(b,{id:"observation_spot_name",class:"mt-1 block w-full",type:"text",ref:"observation_spot_name",autocomplete:"observation_spot_name",modelValue:t(e).observation_spot_name,"onUpdate:modelValue":s[1]||(s[1]=o=>t(e).observation_spot_name=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(u,{message:t(e).errors.observation_spot_name,class:"mt-2"},null,8,["message"]),a(p,{for:"observation_spot_description",value:r.$t("New observation spot description *")},null,8,["value"]),L(l("textarea",{id:"observation_spot_description",class:"mt-1 textarea-bordered textarea block w-full",ref:"observation_spot_description",autocomplete:"observation_spot_description","onUpdate:modelValue":s[2]||(s[2]=o=>t(e).observation_spot_description=o)},`
                    `,512),[[W,t(e).observation_spot_description,void 0,{trim:!0}]]),a(u,{message:t(e).errors.observation_spot_name,class:"mt-2"},null,8,["message"]),io])):R("",!0),l("div",uo,[l("input",{type:"file",multiple:"",onChange:q,class:"file-input file-input-bordered w-full max-w-xs",accept:".jpeg,.jpg,.png",placeholder:"Upload files (jpeg, jpg, png only)"},null,32),l("button",{class:"btn btn-accent",type:"button",onClick:N},[t(x)?(y(),k("span",co)):R("",!0),A(" Upload ")]),l("div",mo,_(r.$t("JPEG, JPG, PNG")),1),t(e).photos.length?(y(),k("ul",po,[(y(!0),k(D,null,H(t(e).photos,o=>(y(),k("li",{key:o.id},_(o.id)+" - "+_(o.name),1))),128))])):R("",!0),l("div",_o,[(y(!0),k(D,null,H(f.photo_urls,(o,h)=>(y(),k("div",{class:"avatar",key:h},[l("div",fo,[l("img",{src:P+o,alt:"image",class:"rounded"},null,8,go)]),l("button",{type:"button",onClick:O=>G(o),class:"btn m-2 btn-error"},ho,8,vo)]))),128))])]),l("div",yo,[a(p,{for:"measuring_time",value:r.$t("Time of measurement *")},null,8,["value"]),a(b,{id:"measuring_time",class:"mt-1 block w-full",modelValue:t(e).measuring_time,"onUpdate:modelValue":s[3]||(s[3]=o=>t(e).measuring_time=o),modelModifiers:{trim:!0},type:"datetime-local",ref_key:"measuring_time",ref:v,autocomplete:"measuring_time",dusk:"measuring_time"},null,8,["modelValue"]),a(u,{message:t(e).errors.measuring_time,class:"mt-2"},null,8,["message"])]),l("div",wo,[a(p,{for:"odor",value:r.$t("Odor")},null,8,["value"]),a(b,{id:"odor",class:"mt-1 block w-full",modelValue:t(e).odor,"onUpdate:modelValue":s[4]||(s[4]=o=>t(e).odor=o),modelModifiers:{trim:!0},type:"text",ref:"odor",autocomplete:"odor",dusk:"odor"},null,8,["modelValue"]),a(u,{message:t(e).errors.odor,class:"mt-2"},null,8,["message"])]),l("div",ko,[a(p,{for:"color_turbidity",value:r.$t("Color and turbidity")},null,8,["value"]),L(l("textarea",{id:"color_turbidity",class:"mt-1 textarea textarea-bordered block w-full","onUpdate:modelValue":s[5]||(s[5]=o=>t(e).color_turbidity=o),ref:"color_turbidity",autocomplete:"color_turbidity",dusk:"color_turbidity"},`
                    `,512),[[W,t(e).color_turbidity,void 0,{trim:!0}]]),a(u,{message:t(e).errors.color_turbidity,class:"mt-2"},null,8,["message"])]),l("div",xo,[a(p,{for:"conditions",value:r.$t("Description of natural conditions *")},null,8,["value"]),a(b,{id:"conditions",class:"mt-1 block w-full",modelValue:t(e).conditions,"onUpdate:modelValue":s[6]||(s[6]=o=>t(e).conditions=o),modelModifiers:{trim:!0},type:"text",ref:"conditions",autocomplete:"conditions",dusk:"conditions"},null,8,["modelValue"]),a(u,{message:t(e).errors.conditions,class:"mt-2"},null,8,["message"])]),l("div",To,[a(p,{for:"flow_direction",value:r.$t("Flow direction/water level")},null,8,["value"]),a(b,{id:"flow_direction",class:"mt-1 block w-full",modelValue:t(e).flow_direction,"onUpdate:modelValue":s[7]||(s[7]=o=>t(e).flow_direction=o),modelModifiers:{trim:!0},type:"text",ref:"flow_direction",autocomplete:"flow_direction",dusk:"flow_direction"},null,8,["modelValue"]),a(u,{message:t(e).errors.flow_direction,class:"mt-2"},null,8,["message"])]),Vo,So,l("div",Oo,[a(p,{for:"ph",value:r.$t("pH")},null,8,["value"]),a(b,{id:"ph",class:"mt-1 block w-full",modelValue:t(e).ph,"onUpdate:modelValue":s[8]||(s[8]=o=>t(e).ph=o),modelModifiers:{trim:!0},type:"number",ref:"ph",autocomplete:"ph",dusk:"ph"},null,8,["modelValue"]),a(u,{message:t(e).errors.ph,class:"mt-2"},null,8,["message"])]),l("div",Co,[a(p,{for:"water_temperature",value:r.$t("Water temperature")},null,8,["value"]),a(b,{id:"water_temperature",class:"mt-1 block w-full",modelValue:t(e).water_temperature,"onUpdate:modelValue":s[9]||(s[9]=o=>t(e).water_temperature=o),modelModifiers:{trim:!0},type:"number",ref:"water_temperature",autocomplete:"water_temperature",placeholder:"°C",dusk:"water_temperature"},null,8,["modelValue"]),a(u,{message:t(e).errors.water_temperature,class:"mt-2"},null,8,["message"])]),l("div",$o,[a(p,{for:"air_temperature",value:r.$t("Air temperature")},null,8,["value"]),a(b,{id:"air_temperature",class:"mt-1 block w-full",modelValue:t(e).air_temperature,"onUpdate:modelValue":s[10]||(s[10]=o=>t(e).air_temperature=o),modelModifiers:{trim:!0},placeholder:"°C",type:"number",ref:"air_temperature",autocomplete:"air_temperature",dusk:"air_temperature"},null,8,["modelValue"]),a(u,{message:t(e).errors.air_temperature,class:"mt-2"},null,8,["message"])]),l("div",Uo,[a(p,{for:"specific_conductance",value:r.$t("Specific conductance")},null,8,["value"]),a(b,{id:"specific_conductance",class:"mt-1 block w-full",modelValue:t(e).specific_conductance,"onUpdate:modelValue":s[11]||(s[11]=o=>t(e).specific_conductance=o),modelModifiers:{trim:!0},type:"number",ref:"specific_conductance",autocomplete:"specific_conductance",placeholder:"µS/cm",dusk:"specific_conductance"},null,8,["modelValue"]),a(u,{message:t(e).errors.specific_conductance,class:"mt-2"},null,8,["message"])]),l("div",Po,[a(p,{for:"total_dissolved_solids",value:r.$t("Total dissolved solids")},null,8,["value"]),a(b,{id:"total_dissolved_solids",class:"mt-1 block w-full",modelValue:t(e).total_dissolved_solids,"onUpdate:modelValue":s[12]||(s[12]=o=>t(e).total_dissolved_solids=o),modelModifiers:{trim:!0},placeholder:"mg/l",type:"number",ref:"total_dissolved_solids",autocomplete:"total_dissolved_solids",dusk:"total_dissolved_solids"},null,8,["modelValue"]),a(u,{message:t(e).errors.total_dissolved_solids,class:"mt-2"},null,8,["message"])]),l("div",Mo,[a(p,{for:"nitrate",value:r.$t("Nitrate (NO3)")},null,8,["value"]),a(b,{id:"nitrate",class:"mt-1 block w-full",modelValue:t(e).nitrate,"onUpdate:modelValue":s[13]||(s[13]=o=>t(e).nitrate=o),modelModifiers:{trim:!0},type:"number",ref:"nitrate",placeholder:"mg/l",autocomplete:"nitrate",dusk:"nitrate"},null,8,["modelValue"]),a(u,{message:t(e).errors.nitrate,class:"mt-2"},null,8,["message"])]),l("div",Bo,[a(p,{for:"bicarbonate",value:r.$t("Bicarbonate (HCO3)")},null,8,["value"]),a(b,{id:"bicarbonate",class:"mt-1 block w-full",modelValue:t(e).bicarbonate,"onUpdate:modelValue":s[14]||(s[14]=o=>t(e).bicarbonate=o),modelModifiers:{trim:!0},type:"number",placeholder:"mg/l",ref:"bicarbonate",autocomplete:"bicarbonate",dusk:"bicarbonate"},null,8,["modelValue"]),a(u,{message:t(e).errors.bicarbonate,class:"mt-2"},null,8,["message"])]),l("div",Eo,[a(p,{for:"redox_potential",value:r.$t("Redox potential")},null,8,["value"]),a(b,{id:"redox_potential",class:"mt-1 block w-full",modelValue:t(e).redox_potential,"onUpdate:modelValue":s[15]||(s[15]=o=>t(e).redox_potential=o),modelModifiers:{trim:!0},placeholder:"mV",type:"number",ref:"redox_potential",autocomplete:"redox_potential",dusk:"redox_potential"},null,8,["modelValue"]),a(u,{message:t(e).errors.redox_potential,class:"mt-2"},null,8,["message"])]),l("div",jo,[a(p,{for:"dissolved_oxygen_percent",value:r.$t("Dissolved oxygen (%)")},null,8,["value"]),a(b,{id:"dissolved_oxygen_percent",class:"mt-1 block w-full",placeholder:"%",modelValue:t(e).dissolved_oxygen_percent,"onUpdate:modelValue":s[16]||(s[16]=o=>t(e).dissolved_oxygen_percent=o),modelModifiers:{trim:!0},type:"number",ref:"dissolved_oxygen_percent",autocomplete:"dissolved_oxygen_percent",dusk:"dissolved_oxygen_percent"},null,8,["modelValue"]),a(u,{message:t(e).errors.dissolved_oxygen_percent,class:"mt-2"},null,8,["message"])]),l("div",Ro,[a(p,{for:"dissolved_oxygen_mgl",value:r.$t("Dissolved oxygen (mg/l)")},null,8,["value"]),a(b,{id:"dissolved_oxygen_mgl",class:"mt-1 block w-full",modelValue:t(e).dissolved_oxygen_mgl,"onUpdate:modelValue":s[17]||(s[17]=o=>t(e).dissolved_oxygen_mgl=o),modelModifiers:{trim:!0},type:"number",ref:"dissolved_oxygen_mgl",autocomplete:"dissolved_oxygen_mgl",placeholder:"mg/l",dusk:"dissolved_oxygen_mgl"},null,8,["modelValue"]),a(u,{message:t(e).errors.dissolved_oxygen_mgl,class:"mt-2"},null,8,["message"])]),l("div",Do,[a(p,{for:"discharge",value:r.$t("Discharge")},null,8,["value"]),a(b,{id:"discharge",class:"mt-1 block w-full",modelValue:t(e).discharge,"onUpdate:modelValue":s[18]||(s[18]=o=>t(e).discharge=o),modelModifiers:{trim:!0},type:"number",placeholder:"l/s",ref:"discharge",autocomplete:"discharge",dusk:"discharge"},null,8,["modelValue"]),a(u,{message:t(e).errors.discharge,class:"mt-2"},null,8,["message"])]),l("div",qo,[a(p,{for:"water_flow",value:r.$t("Flow velocity")},null,8,["value"]),a(E,{modelValue:t(e).water_flow,"onUpdate:modelValue":s[19]||(s[19]=o=>t(e).water_flow=o),options:f.water_flows,placeholder:"Please select one",class:"mt-2 block w-full",ref:"water_flow",autocomplete:"water_flow"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.water_flow,class:"mt-2"},null,8,["message"])]),No,Ao,Fo,l("div",Ho,[l("label",Lo,[a(T,{name:"erosion",checked:t(e).erosion,"onUpdate:checked":s[20]||(s[20]=o=>t(e).erosion=o)},null,8,["checked"]),Io]),a(u,{message:t(e).errors.erosion,class:"mt-2"},null,8,["message"])]),l("div",zo,[a(p,{for:"nature",value:"Kaldaala looduslikkus"}),a(E,{modelValue:t(e).nature,"onUpdate:modelValue":s[21]||(s[21]=o=>t(e).nature=o),options:f.natures,placeholder:"Please select one",class:"mt-2 block w-full",ref:"nature",autocomplete:"nature"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.nature,class:"mt-2"},null,8,["message"])]),l("div",Go,[a(p,{for:"riparian_vegetation",value:"Kaldaala taimestik"}),a(E,{modelValue:t(e).riparian_vegetation,"onUpdate:modelValue":s[22]||(s[22]=o=>t(e).riparian_vegetation=o),options:f.riparian_vegetations,placeholder:"Please select one",class:"mt-2 block w-full",ref:"riparian_vegetation",autocomplete:"riparian_vegetation"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.riparian_vegetation,class:"mt-2"},null,8,["message"])]),l("div",Ko,[a(p,{for:"vegetation_coverage",value:"Taimestiku katvus"}),a(E,{modelValue:t(e).vegetation_coverage,"onUpdate:modelValue":s[23]||(s[23]=o=>t(e).vegetation_coverage=o),options:f.vegetation_coverages,placeholder:"Please select one",class:"mt-2 block w-full",ref:"vegetation_coverage",autocomplete:"vegetation_coverage"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.vegetation_coverage,class:"mt-2"},null,8,["message"])]),Zo,Wo,l("div",Jo,[l("label",Qo,[a(T,{name:"tree_roots",checked:t(e).tree_roots,"onUpdate:checked":s[24]||(s[24]=o=>t(e).tree_roots=o)},null,8,["checked"]),Xo]),a(u,{message:t(e).errors.tree_roots,class:"mt-2"},null,8,["message"])]),l("div",Yo,[a(p,{for:"bottom",value:"Veekogu põhi"}),a(E,{modelValue:t(e).bottom,"onUpdate:modelValue":s[25]||(s[25]=o=>t(e).bottom=o),options:f.bottoms,placeholder:"Please select one",class:"mt-2 block w-full",ref:"bottom",autocomplete:"bottom"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.bottom,class:"mt-2"},null,8,["message"])]),l("div",ea,[a(p,{for:"aquatic_vegetation",value:"Veetaimestik"}),a(E,{modelValue:t(e).aquatic_vegetation,"onUpdate:modelValue":s[26]||(s[26]=o=>t(e).aquatic_vegetation=o),options:f.aquatic_vegetations,placeholder:"Please select one",class:"mt-2 block w-full",ref:"aquatic_vegetation",autocomplete:"aquatic_vegetation"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.aquatic_vegetation,class:"mt-2"},null,8,["message"])]),ta,sa,l("div",oa,[l("label",aa,[a(T,{name:"buildings",checked:t(e).buildings,"onUpdate:checked":s[27]||(s[27]=o=>t(e).buildings=o)},null,8,["checked"]),la]),a(u,{message:t(e).errors.buildings,class:"mt-2"},null,8,["message"])]),l("div",ra,[l("label",na,[a(T,{name:"agricultural_activity",checked:t(e).agricultural_activity,"onUpdate:checked":s[28]||(s[28]=o=>t(e).agricultural_activity=o)},null,8,["checked"]),ia]),a(u,{message:t(e).errors.agricultural_activity,class:"mt-2"},null,8,["message"])]),l("div",da,[l("label",ua,[a(T,{name:"roads",checked:t(e).roads,"onUpdate:checked":s[29]||(s[29]=o=>t(e).roads=o)},null,8,["checked"]),ca]),a(u,{message:t(e).errors.roads,class:"mt-2"},null,8,["message"])]),l("div",ma,[l("label",pa,[a(T,{name:"park",checked:t(e).park,"onUpdate:checked":s[30]||(s[30]=o=>t(e).park=o)},null,8,["checked"]),_a]),a(u,{message:t(e).errors.park,class:"mt-2"},null,8,["message"])]),l("div",fa,[l("label",ga,[a(T,{name:"beach",checked:t(e).beach,"onUpdate:checked":s[31]||(s[31]=o=>t(e).beach=o)},null,8,["checked"]),va]),a(u,{message:t(e).errors.beach,class:"mt-2"},null,8,["message"])]),l("div",ba,[l("label",ha,[a(T,{name:"boat_bridge",checked:t(e).boat_bridge,"onUpdate:checked":s[32]||(s[32]=o=>t(e).boat_bridge=o)},null,8,["checked"]),ya]),a(u,{message:t(e).errors.boat_bridge,class:"mt-2"},null,8,["message"])]),l("div",wa,[l("label",ka,[a(T,{name:"shore_facility",checked:t(e).shore_facility,"onUpdate:checked":s[33]||(s[33]=o=>t(e).shore_facility=o)},null,8,["checked"]),xa]),a(u,{message:t(e).errors.shore_facility,class:"mt-2"},null,8,["message"])]),l("div",Ta,[l("label",Va,[a(T,{name:"dams",checked:t(e).dams,"onUpdate:checked":s[34]||(s[34]=o=>t(e).dams=o)},null,8,["checked"]),Sa]),a(u,{message:t(e).errors.dams,class:"mt-2"},null,8,["message"])]),l("div",Oa,[l("label",Ca,[a(T,{name:"littering",checked:t(e).littering,"onUpdate:checked":s[35]||(s[35]=o=>t(e).littering=o)},null,8,["checked"]),$a]),a(u,{message:t(e).errors.littering,class:"mt-2"},null,8,["message"])]),l("div",Ua,[l("label",Pa,[a(T,{name:"water_pollution",checked:t(e).water_pollution,"onUpdate:checked":s[36]||(s[36]=o=>t(e).water_pollution=o)},null,8,["checked"]),Ma]),a(u,{message:t(e).errors.water_pollution,class:"mt-2"},null,8,["message"])]),l("div",Ba,[l("div",Ea,[a(t(Y),{href:r.route("dashboard"),class:"btn btn-secondary",dusk:"cancel"},{default:F(()=>[A(_(r.$t("Cancel")),1)]),_:1},8,["href"]),a(t(Y),{onClick:t(B),class:se(["btn btn-primary",{"btn-disabled":t(e).processing}]),dusk:"save",href:"#"},{default:F(()=>[A(_(r.$t("Save")),1)]),_:1},8,["onClick","class"])])])])])],32)],64))}};export{Aa as default};
