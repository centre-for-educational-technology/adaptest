import{p as oi,d as ht,q as ai,s as He,_ as he,x as Li,m as Ae,y as Ti,z as $c,A as me,k as ys,B as ia,C as Fo,D as na,E as Vc,G as Kc,H as Jc,I as Xc,o as Pn,e as qo,a as pt,g as Ih,t as Yc,n as kh,c as Xr,w as Mn,u as Nt,b as pi,f as Qc,h as tf,F as ef,J as nf,O as sf}from"./app-df5fae30.js";import{_ as of,A as af}from"./AppLayout-84e8c73b.js";import"./_plugin-vue_export-helper-c27b6911.js";function rf(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in t)){const h=Object.getOwnPropertyDescriptor(o,a);h&&Object.defineProperty(t,a,h.get?h:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const Yr=(t,e)=>{for(const n of Object.keys(e))t.on(n,e[n])},Bh=t=>{for(const e of Object.keys(t)){const n=t[e];n&&Ye(n.cancel)&&n.cancel()}},hf=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),Ye=t=>typeof t=="function",ri=(t,e,n)=>{for(const o in n){const a="set"+hf(o);t[a]?Fo(()=>n[o],(h,l)=>{t[a](h,l)}):e[a]&&Fo(()=>n[o],h=>{e[a](h)})}},Ge=(t,e,n={})=>{const o={...n};for(const a in t){const h=e[a],l=t[a];h&&(h&&h.custom===!0||l!==void 0&&(o[a]=l))}return o},Si=t=>{const e={},n={};for(const o in t)if(o.startsWith("on")&&!o.startsWith("onUpdate")&&o!=="onReady"){const a=o.slice(2).toLocaleLowerCase();e[a]=t[o]}else n[o]=t[o];return{listeners:e,attrs:n}},lf=async t=>{const e=await Promise.all([he(()=>import("./marker-icon-2x-9a28b8dd.js"),[]),he(()=>import("./marker-icon-dcc39de6.js"),[]),he(()=>import("./marker-shadow-a3e17d65.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},xs=t=>{const e=ht((...o)=>console.warn(`Method ${t} has been invoked without being replaced`)),n=(...o)=>e.value(...o);return n.wrapped=e,me(t,n),n},Ms=(t,e)=>t.wrapped.value=e,Ee=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,le=t=>{const e=ai(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},hi=Symbol("useGlobalLeaflet"),Ci=Symbol("addLayer"),sa=Symbol("removeLayer"),Nh=Symbol("registerControl"),uf=Symbol("registerLayerControl"),Zh=Symbol("canSetParentHtml"),Rh=Symbol("setParentHtml"),Dh=Symbol("setIcon"),Fh=Symbol("bindPopup"),cf=Symbol("bindTooltip"),qh=Symbol("unbindPopup"),ff=Symbol("unbindTooltip"),Fn={options:{type:Object,default:()=>({}),custom:!0}},qn=t=>({options:t.options,methods:{}}),tn={...Fn,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},oa=(t,e,n)=>{const o=le(Ci),a=le(sa),{options:h,methods:l}=qn(t),c=Ge(t,tn,h),d=()=>o({leafletObject:e.value}),_=()=>a({leafletObject:e.value}),v={...l,setAttribution(p){_(),e.value.options.attribution=p,t.visible&&d()},setName(){_(),t.visible&&d()},setLayerType(){_(),t.visible&&d()},setVisible(p){e.value&&(p?d():_())},bindPopup(p){if(!e.value||!Ye(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(p)},bindTooltip(p){if(!e.value||!Ye(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(p)},unbindTooltip(){e.value&&(Ye(e.value.closeTooltip)&&e.value.closeTooltip(),Ye(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(Ye(e.value.closePopup)&&e.value.closePopup(),Ye(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(p){n.emit("update:visible",p)}};return me(Fh,v.bindPopup),me(cf,v.bindTooltip),me(qh,v.unbindPopup),me(ff,v.unbindTooltip),na(()=>{v.unbindPopup(),v.unbindTooltip(),_()}),{options:c,methods:v}},Wh=(t,e)=>{if(t&&e.default)return Ti("div",{style:{display:"none"}},e.default())},df={...tn,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Hh={...df,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},_f={...Hh,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({..._f});const en={...Fn,position:{type:String}},mf=(t,e)=>{const{options:n,methods:o}=qn(t),a=Ge(t,en,n),h={...o,setPosition(l){e.value&&e.value.setPosition(l)}};return na(()=>{e.value&&e.value.remove()}),{options:a,methods:h}},pf=t=>t.default?Ti("div",{ref:"root"},t.default()):null;oi({name:"LControl",props:{...en,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const n=ht(),o=ht(),a=ai(hi),h=le(Nh),{options:l,methods:c}=mf(t,n);return He(async()=>{const{Control:d,DomEvent:_}=a?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0),v=d.extend({onAdd(){return o.value}});n.value=Li(new v(l)),ri(c,n.value,t),h({leafletObject:n.value}),t.disableClickPropagation&&o.value&&_.disableClickPropagation(o.value),t.disableScrollPropagation&&o.value&&_.disableScrollPropagation(o.value),Ae(()=>e.emit("ready",n.value))}),{root:o,leafletObject:n}},render(){return pf(this.$slots)}});({...en});({...en});({...en});({...en});const aa={...tn},vf=(t,e,n)=>{const{options:o,methods:a}=oa(t,e,n),h=Ge(t,aa,o),l={...a,addLayer(c){e.value.addLayer(c.leafletObject)},removeLayer(c){e.value.removeLayer(c.leafletObject)}};return me(Ci,l.addLayer),me(sa,l.removeLayer),{options:h,methods:l}};({...aa});const Gh={...aa,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},gf=(t,e,n)=>{const{options:o,methods:a}=vf(t,e,n),h=Ge(t,Gh,o);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(h.style=t.optionsStyle);const l={...a,setGeojson(c){e.value.clearLayers(),e.value.addData(c)},setOptionsStyle(c){e.value.setStyle(c)},getGeoJSONData(){return e.value.toGeoJSON()},getBounds(){return e.value.getBounds()}};return{options:h,methods:l}},yf=oi({props:Gh,setup(t,e){const n=ht(),o=ht(!1),a=ai(hi),h=le(Ci),{methods:l,options:c}=gf(t,n,e);return He(async()=>{const{geoJSON:d}=a?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);n.value=Li(d(t.geojson,c));const{listeners:_}=Si(e.attrs);n.value.on(_),ri(l,n.value,t),h({...t,...l,leafletObject:n.value}),o.value=!0,Ae(()=>e.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Wh(this.ready,this.$slots)}}),ra={...tn,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},jh=(t,e,n)=>{const{options:o,methods:a}=oa(t,e,n),h=Ge(t,ra,o),l={...a,setTileComponent(){var c;(c=e.value)==null||c.redraw()}};return na(()=>{e.value.off()}),{options:h,methods:l}},xf=(t,e,n,o)=>t.extend({initialize(a){this.tileComponents={},this.on("tileunload",this._unloadTile),n.setOptions(this,a)},createTile(a){const h=this._tileCoordsToKey(a);this.tileComponents[h]=e.create("div");const l=Ti({setup:o,props:["coords"]},{coords:a});return Vc(l,this.tileComponents[h]),this.tileComponents[h]},_unloadTile(a){const h=this._tileCoordsToKey(a.coords);this.tileComponents[h]&&(this.tileComponents[h].innerHTML="",this.tileComponents[h]=void 0)}});oi({props:{...ra,childRender:{type:Function,required:!0}},setup(t,e){const n=ht(),o=ht(null),a=ht(!1),h=ai(hi),l=le(Ci),{options:c,methods:d}=jh(t,n,e);return He(async()=>{const{GridLayer:_,DomUtil:v,Util:p}=h?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0),y=xf(_,v,p,t.childRender);n.value=Li(new y(c));const{listeners:M}=Si(e.attrs);n.value.on(M),ri(d,n.value,t),l({...t,...d,leafletObject:n.value}),a.value=!0,Ae(()=>e.emit("ready",n.value))}),{root:o,ready:a,leafletObject:n}},render(){return this.ready?Ti("div",{style:{display:"none"},ref:"root"}):null}});const Qr={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};oi({name:"LIcon",props:{...Qr,...Fn},setup(t,e){const n=ht(),o=ai(hi),a=le(Zh),h=le(Rh),l=le(Dh);let c,d,_,v,p;const y=(T,E,k)=>{const B=T&&T.innerHTML;if(!E){k&&p&&a()&&h(B);return}const{listeners:U}=Si(e.attrs);p&&d(p,U);const{options:W}=qn(t),q=Ge(t,Qr,W);B&&(q.html=B),p=q.html?_(q):v(q),c(p,U),l(p)},M=()=>{Ae(()=>y(n.value,!0,!1))},b=()=>{Ae(()=>y(n.value,!1,!0))},P={setIconUrl:M,setIconRetinaUrl:M,setIconSize:M,setIconAnchor:M,setPopupAnchor:M,setTooltipAnchor:M,setShadowUrl:M,setShadowRetinaUrl:M,setShadowAnchor:M,setBgPos:M,setClassName:M,setHtml:M};return He(async()=>{const{DomEvent:T,divIcon:E,icon:k}=o?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);c=T.on,d=T.off,_=E,v=k,ri(P,{},t),new MutationObserver(b).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),M()}),{root:n}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Ti("div",{ref:"root"},t)}});({...tn});function Uh(t,e,n){var o,a,h;e===void 0&&(e=50),n===void 0&&(n={});var l=(o=n.isImmediate)!=null&&o,c=(a=n.callback)!=null&&a,d=n.maxWait,_=Date.now(),v=[];function p(){if(d!==void 0){var M=Date.now()-_;if(M+e>=d)return d-M}return e}var y=function(){var M=[].slice.call(arguments),b=this;return new Promise(function(P,T){var E=l&&h===void 0;if(h!==void 0&&clearTimeout(h),h=setTimeout(function(){if(h=void 0,_=Date.now(),!l){var B=t.apply(b,M);c&&c(B),v.forEach(function(U){return(0,U.resolve)(B)}),v=[]}},p()),E){var k=t.apply(b,M);return c&&c(k),P(k)}v.push({resolve:P,reject:T})})};return y.cancel=function(M){h!==void 0&&clearTimeout(h),v.forEach(function(b){return(0,b.reject)(M)}),v=[]},y}const th={...Fn,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Mf=oi({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:th,setup(t,e){const n=ht(),o=$c({ready:!1,layersToAdd:[],layersInControl:[]}),{options:a}=qn(t),h=Ge(t,th,a),{listeners:l,attrs:c}=Si(e.attrs),d=xs(Ci),_=xs(sa),v=xs(Nh),p=xs(uf);me(hi,t.useGlobalLeaflet);const y=ys(()=>{const E={};return t.noBlockingAnimations&&(E.animate=!1),E}),M=ys(()=>{const E=y.value;return t.padding&&(E.padding=t.padding),t.paddingTopLeft&&(E.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(E.paddingBottomRight=t.paddingBottomRight),E}),b={moveend:Uh(E=>{o.leafletRef&&(e.emit("update:zoom",o.leafletRef.getZoom()),e.emit("update:center",o.leafletRef.getCenter()),e.emit("update:bounds",o.leafletRef.getBounds()))}),overlayadd(E){const k=o.layersInControl.find(B=>B.name===E.name);k&&k.updateVisibleProp(!0)},overlayremove(E){const k=o.layersInControl.find(B=>B.name===E.name);k&&k.updateVisibleProp(!1)}};He(async()=>{t.useGlobalLeaflet&&(Ee.L=Ee.L||await he(()=>Promise.resolve().then(()=>e_),void 0));const{map:E,CRS:k,Icon:B,latLngBounds:U,latLng:W,stamp:q}=t.useGlobalLeaflet?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);try{h.beforeMapMount&&await h.beforeMapMount()}catch(A){console.error(`The following error occurred running the provided beforeMapMount hook ${A.message}`)}await lf(B);const D=typeof h.crs=="string"?k[h.crs]:h.crs;h.crs=D||k.EPSG3857;const I={addLayer(A){A.layerType!==void 0&&(o.layerControl===void 0?o.layersToAdd.push(A):o.layersInControl.find(Q=>q(Q.leafletObject)===q(A.leafletObject))||(o.layerControl.addLayer(A),o.layersInControl.push(A))),A.visible!==!1&&o.leafletRef.addLayer(A.leafletObject)},removeLayer(A){A.layerType!==void 0&&(o.layerControl===void 0?o.layersToAdd=o.layersToAdd.filter(Q=>Q.name!==A.name):(o.layerControl.removeLayer(A.leafletObject),o.layersInControl=o.layersInControl.filter(Q=>q(Q.leafletObject)!==q(A.leafletObject)))),o.leafletRef.removeLayer(A.leafletObject)},registerLayerControl(A){o.layerControl=A,o.layersToAdd.forEach(Q=>{o.layerControl.addLayer(Q)}),o.layersToAdd=[],v(A)},registerControl(A){o.leafletRef.addControl(A.leafletObject)},setZoom(A){const Q=o.leafletRef.getZoom();A!==Q&&o.leafletRef.setZoom(A,y.value)},setCrs(A){const Q=o.leafletRef.getBounds();o.leafletRef.options.crs=A,o.leafletRef.fitBounds(Q,{animate:!1,padding:[0,0]})},fitBounds(A){o.leafletRef.fitBounds(A,M.value)},setBounds(A){if(!A)return;const Q=U(A);Q.isValid()&&!(o.lastSetBounds||o.leafletRef.getBounds()).equals(Q,0)&&(o.lastSetBounds=Q,o.leafletRef.fitBounds(Q))},setCenter(A){if(A==null)return;const Q=W(A),ct=o.lastSetCenter||o.leafletRef.getCenter();(ct.lat!==Q.lat||ct.lng!==Q.lng)&&(o.lastSetCenter=Q,o.leafletRef.panTo(Q,y.value))}};Ms(d,I.addLayer),Ms(_,I.removeLayer),Ms(v,I.registerControl),Ms(p,I.registerLayerControl),o.leafletRef=Li(E(n.value,h)),ri(I,o.leafletRef,t),Yr(o.leafletRef,b),Yr(o.leafletRef,l),o.ready=!0,Ae(()=>e.emit("ready",o.leafletRef))}),ia(()=>{Bh(b),o.leafletRef&&(o.leafletRef.off(),o.leafletRef.remove())});const P=ys(()=>o.leafletRef),T=ys(()=>o.ready);return{root:n,ready:T,leafletObject:P,attrs:c}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Ti("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),wf=["Symbol(Comment)","Symbol(Text)"],bf=["LTooltip","LPopup"],$h={...tn,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Pf=(t,e,n)=>{const{options:o,methods:a}=oa(t,e,n),h=Ge(t,$h,o),l={...a,setDraggable(c){e.value.dragging&&(c?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(c){n.emit("update:latLng",c.latlng),n.emit("update:lat-lng",c.latlng)},setLatLng(c){if(c!=null&&e.value){const d=e.value.getLatLng();(!d||!d.equals(c))&&e.value.setLatLng(c)}}};return{options:h,methods:l}},Lf=(t,e)=>{const n=e.slots.default&&e.slots.default();return n&&n.length&&n.some(Tf)};function Tf(t){return!(wf.includes(t.type.toString())||bf.includes(t.type.name))}const Sf=oi({name:"LMarker",props:$h,setup(t,e){const n=ht(),o=ht(!1),a=ai(hi),h=le(Ci);me(Zh,()=>{var _;return!!((_=n.value)!=null&&_.getElement())}),me(Rh,_=>{var v,p;const y=Ye((v=n.value)==null?void 0:v.getElement)&&((p=n.value)==null?void 0:p.getElement());y&&(y.innerHTML=_)}),me(Dh,_=>{var v;return((v=n.value)==null?void 0:v.setIcon)&&n.value.setIcon(_)});const{options:l,methods:c}=Pf(t,n,e),d={moveHandler:Uh(c.latLngSync)};return He(async()=>{const{marker:_,divIcon:v}=a?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);Lf(l,e)&&(l.icon=v({className:""})),n.value=Li(_(t.latLng,l));const{listeners:p}=Si(e.attrs);n.value.on(p),n.value.on("move",d.moveHandler),ri(c,n.value,t),h({...t,...c,leafletObject:n.value}),o.value=!0,Ae(()=>e.emit("ready",n.value))}),ia(()=>Bh(d)),{ready:o,leafletObject:n}},render(){return Wh(this.ready,this.$slots)}}),Cf={...Hh,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},eh={...Cf},Vh={...Fn,content:{type:String,default:null}},Ef=(t,e)=>{const{options:n,methods:o}=qn(t),a={...o,setContent(h){e.value&&h!==null&&h!==void 0&&e.value.setContent(h)}};return{options:n,methods:a}},Of=t=>t.default?Ti("div",{ref:"root"},t.default()):null,Af={...Vh,latLng:{type:[Object,Array],default:()=>[]}},zf=(t,e)=>{const{options:n,methods:o}=Ef(t,e);return{options:n,methods:o}},If=oi({name:"LPopup",props:Af,setup(t,e){const n=ht(),o=ht(null),a=ai(hi),h=le(Fh),l=le(qh),{options:c,methods:d}=zf(t,n);return He(async()=>{const{popup:_}=a?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);n.value=Li(_(c)),t.latLng!==void 0&&n.value.setLatLng(t.latLng),ri(d,n.value,t);const{listeners:v}=Si(e.attrs);n.value.on(v),n.value.setContent(t.content||o.value||""),h(n.value),Ae(()=>e.emit("ready",n.value))}),ia(()=>{l()}),{root:o,leafletObject:n}},render(){return Of(this.$slots)}});({...eh,latLngs:{...eh.latLngs}});const ha={...ra,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},kf=(t,e,n)=>{const{options:o,methods:a}=jh(t,e,n),h=Ge(t,ha,o),l={...a};return{options:h,methods:l}},ih=oi({props:ha,setup(t,e){const n=ht(),o=ai(hi),a=le(Ci),{options:h,methods:l}=kf(t,n,e);return He(async()=>{const{tileLayer:c}=o?Ee.L:await he(()=>Promise.resolve().then(()=>li),void 0);n.value=Li(c(t.url,h));const{listeners:d}=Si(e.attrs);n.value.on(d),ri(l,n.value,t),a({...t,...l,leafletObject:n.value}),Ae(()=>e.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});({...Vh});({...ha});/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Bf="1.9.4";function _t(t){var e,n,o,a;for(n=1,o=arguments.length;n<o;n++){a=arguments[n];for(e in a)t[e]=a[e]}return t}var zs=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function gt(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}}var Kh=0;function rt(t){return"_leaflet_id"in t||(t._leaflet_id=++Kh),t._leaflet_id}function Jh(t,e,n){var o,a,h,l;return l=function(){o=!1,a&&(h.apply(n,a),a=!1)},h=function(){o?a=arguments:(t.apply(n,arguments),setTimeout(l,e),o=!0)},h}function In(t,e,n){var o=e[1],a=e[0],h=o-a;return t===o&&n?t:((t-a)%h+h)%h+a}function St(){return!1}function Le(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function la(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function vi(t){return la(t).split(/\s+/)}function yt(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?zs(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function Xh(t,e,n){var o=[];for(var a in t)o.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(!e||e.indexOf("?")===-1?"?":"&")+o.join("&")}var Nf=/\{ *([\w_ -]+) *\}/g;function Yh(t,e){return t.replace(Nf,function(n,o){var a=e[o];if(a===void 0)throw new Error("No value provided for variable "+n);return typeof a=="function"&&(a=a(e)),a})}var ge=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ua(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var Ls="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Wo(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var nh=0;function Qh(t){var e=+new Date,n=Math.max(0,16-(e-nh));return nh=e+n,window.setTimeout(t,n)}var Ho=window.requestAnimationFrame||Wo("RequestAnimationFrame")||Qh,tl=window.cancelAnimationFrame||Wo("CancelAnimationFrame")||Wo("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Jt(t,e,n){if(n&&Ho===Qh)t.call(e);else return Ho.call(window,gt(t,e))}function ue(t){t&&tl.call(window,t)}var Zf={__proto__:null,extend:_t,create:zs,bind:gt,get lastId(){return Kh},stamp:rt,throttle:Jh,wrapNum:In,falseFn:St,formatNum:Le,trim:la,splitWords:vi,setOptions:yt,getParamString:Xh,template:Yh,isArray:ge,indexOf:ua,emptyImageUrl:Ls,requestFn:Ho,cancelFn:tl,requestAnimFrame:Jt,cancelAnimFrame:ue};function je(){}je.extend=function(t){var e=function(){yt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=zs(n);o.constructor=e,e.prototype=o;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(e[a]=this[a]);return t.statics&&_t(e,t.statics),t.includes&&(Rf(t.includes),_t.apply(null,[o].concat(t.includes))),_t(o,t),delete o.statics,delete o.includes,o.options&&(o.options=n.options?zs(n.options):{},_t(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var h=0,l=o._initHooks.length;h<l;h++)o._initHooks[h].call(this)}},e};je.include=function(t){var e=this.prototype.options;return _t(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this};je.mergeOptions=function(t){return _t(this.prototype.options,t),this};je.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Rf(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=ge(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var te={on:function(t,e,n){if(typeof t=="object")for(var o in t)this._on(o,t[o],e);else{t=vi(t);for(var a=0,h=t.length;a<h;a++)this._on(t[a],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],e);else{t=vi(t);for(var a=arguments.length===1,h=0,l=t.length;h<l;h++)a?this._off(t[h]):this._off(t[h],e,n)}return this},_on:function(t,e,n,o){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var a={fn:e,ctx:n};o&&(a.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(a)}},_off:function(t,e,n){var o,a,h;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(a=0,h=o.length;a<h;a++)o[a].fn=St;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var l=this._listens(t,e,n);if(l!==!1){var c=o[l];this._firingCount&&(c.fn=St,this._events[t]=o=o.slice()),o.splice(l,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=_t({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var h=0,l=a.length;h<l;h++){var c=a[h],d=c.fn;c.once&&this.off(t,d,c.ctx),d.call(c.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e,n,o){typeof t!="string"&&console.warn('"string" type argument expected');var a=e;typeof e!="function"&&(o=!!e,a=void 0,n=void 0);var h=this._events&&this._events[t];if(h&&h.length&&this._listens(t,a,n)!==!1)return!0;if(o){for(var l in this._eventParents)if(this._eventParents[l].listens(t,e,n,o))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var o=this._events[t]||[];if(!e)return!!o.length;n===this&&(n=void 0);for(var a=0,h=o.length;a<h;a++)if(o[a].fn===e&&o[a].ctx===n)return a;return!1},once:function(t,e,n){if(typeof t=="object")for(var o in t)this._on(o,t[o],e,!0);else{t=vi(t);for(var a=0,h=t.length;a<h;a++)this._on(t[a],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[rt(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[rt(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,_t({layer:t.target,propagatedFrom:t.target},t),!0)}};te.addEventListener=te.on;te.removeEventListener=te.clearAllEventListeners=te.off;te.addOneTimeEventListener=te.once;te.fireEvent=te.fire;te.hasEventListeners=te.listens;var Wn=je.extend(te);function K(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var sh=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(t){return this.clone()._add(j(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(j(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new K(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new K(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=sh(this.x),this.y=sh(this.y),this},distanceTo:function(t){t=j(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=j(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=j(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+Le(this.x)+", "+Le(this.y)+")"}};function j(t,e,n){return t instanceof K?t:ge(t)?new K(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new K(t.x,t.y):new K(t,e,n)}function Pt(t,e){if(t)for(var n=e?[t,e]:t,o=0,a=n.length;o<a;o++)this.extend(n[o])}Pt.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof K||typeof t[0]=="number"||"x"in t)e=n=j(t);else if(t=Kt(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof K?t=j(t):t=Kt(t),t instanceof Pt?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=Kt(t);var e=this.min,n=this.max,o=t.min,a=t.max,h=a.x>=e.x&&o.x<=n.x,l=a.y>=e.y&&o.y<=n.y;return h&&l},overlaps:function(t){t=Kt(t);var e=this.min,n=this.max,o=t.min,a=t.max,h=a.x>e.x&&o.x<n.x,l=a.y>e.y&&o.y<n.y;return h&&l},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,o=Math.abs(e.x-n.x)*t,a=Math.abs(e.y-n.y)*t;return Kt(j(e.x-o,e.y-a),j(n.x+o,n.y+a))},equals:function(t){return t?(t=Kt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Kt(t,e){return!t||t instanceof Pt?t:new Pt(t,e)}function Xt(t,e){if(t)for(var n=e?[t,e]:t,o=0,a=n.length;o<a;o++)this.extend(n[o])}Xt.prototype={extend:function(t){var e=this._southWest,n=this._northEast,o,a;if(t instanceof dt)o=t,a=t;else if(t instanceof Xt){if(o=t._southWest,a=t._northEast,!o||!a)return this}else return t?this.extend(et(t)||Ct(t)):this;return!e&&!n?(this._southWest=new dt(o.lat,o.lng),this._northEast=new dt(a.lat,a.lng)):(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),n.lat=Math.max(a.lat,n.lat),n.lng=Math.max(a.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,a=Math.abs(e.lng-n.lng)*t;return new Xt(new dt(e.lat-o,e.lng-a),new dt(n.lat+o,n.lng+a))},getCenter:function(){return new dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof dt||"lat"in t?t=et(t):t=Ct(t);var e=this._southWest,n=this._northEast,o,a;return t instanceof Xt?(o=t.getSouthWest(),a=t.getNorthEast()):o=a=t,o.lat>=e.lat&&a.lat<=n.lat&&o.lng>=e.lng&&a.lng<=n.lng},intersects:function(t){t=Ct(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),a=t.getNorthEast(),h=a.lat>=e.lat&&o.lat<=n.lat,l=a.lng>=e.lng&&o.lng<=n.lng;return h&&l},overlaps:function(t){t=Ct(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),a=t.getNorthEast(),h=a.lat>e.lat&&o.lat<n.lat,l=a.lng>e.lng&&o.lng<n.lng;return h&&l},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=Ct(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ct(t,e){return t instanceof Xt?t:new Xt(t,e)}function dt(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}dt.prototype={equals:function(t,e){if(!t)return!1;t=et(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+Le(this.lat,t)+", "+Le(this.lng,t)+")"},distanceTo:function(t){return ei.distance(this,et(t))},wrap:function(){return ei.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return Ct([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new dt(this.lat,this.lng,this.alt)}};function et(t,e,n){return t instanceof dt?t:ge(t)&&typeof t[0]!="object"?t.length===3?new dt(t[0],t[1],t[2]):t.length===2?new dt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new dt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new dt(t,e,n)}var Ue={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),o=this.transformation.transform(e.min,n),a=this.transformation.transform(e.max,n);return new Pt(o,a)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?In(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?In(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new dt(n,e,o)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),o=e.lat-n.lat,a=e.lng-n.lng;if(o===0&&a===0)return t;var h=t.getSouthWest(),l=t.getNorthEast(),c=new dt(h.lat-o,h.lng-a),d=new dt(l.lat-o,l.lng-a);return new Xt(c,d)}},ei=_t({},Ue,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,a=e.lat*n,h=Math.sin((e.lat-t.lat)*n/2),l=Math.sin((e.lng-t.lng)*n/2),c=h*h+Math.cos(o)*Math.cos(a)*l*l,d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return this.R*d}}),oh=6378137,Go={R:oh,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),a=Math.sin(o*e);return new K(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new dt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=oh*Math.PI;return new Pt([-t,-t],[t,t])}()};function ca(t,e,n,o){if(ge(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=o}ca.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new K((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Hn(t,e,n,o){return new ca(t,e,n,o)}var fa=_t({},ei,{code:"EPSG:3857",projection:Go,transformation:function(){var t=.5/(Math.PI*Go.R);return Hn(t,.5,-t,.5)}()}),Df=_t({},fa,{code:"EPSG:900913"});function el(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function il(t,e){var n="",o,a,h,l,c,d;for(o=0,h=t.length;o<h;o++){for(c=t[o],a=0,l=c.length;a<l;a++)d=c[a],n+=(a?"L":"M")+d.x+" "+d.y;n+=e?R.svg?"z":"x":""}return n||"M0 0"}var da=document.documentElement.style,Hs="ActiveXObject"in window,Ff=Hs&&!document.addEventListener,nl="msLaunchUri"in navigator&&!("documentMode"in document),_a=ze("webkit"),sl=ze("android"),ol=ze("android 2")||ze("android 3"),qf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wf=sl&&ze("Google")&&qf<537&&!("AudioNode"in window),ma=!!window.opera,al=!nl&&ze("chrome"),rl=ze("gecko")&&!_a&&!ma&&!Hs,Hf=!al&&ze("safari"),hl=ze("phantom"),ll="OTransition"in da,Gf=navigator.platform.indexOf("Win")===0,ul=Hs&&"transition"in da,pa="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ol,cl="MozPerspective"in da,jf=!window.L_DISABLE_3D&&(ul||pa||cl)&&!ll&&!hl,Gn=typeof orientation<"u"||ze("mobile"),Uf=Gn&&_a,$f=Gn&&pa,fl=!window.PointerEvent&&window.MSPointerEvent,dl=!!(window.PointerEvent||fl),_l="ontouchstart"in window||!!window.TouchEvent,Vf=!window.L_NO_TOUCH&&(_l||dl),Kf=Gn&&ma,Jf=Gn&&rl,Xf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yf=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",St,e),window.removeEventListener("testPassiveEventSupport",St,e)}catch{}return t}(),Qf=function(){return!!document.createElement("canvas").getContext}(),va=!!(document.createElementNS&&el("svg").createSVGRect),td=!!va&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ed=!va&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),id=navigator.platform.indexOf("Mac")===0,nd=navigator.platform.indexOf("Linux")===0;function ze(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var R={ie:Hs,ielt9:Ff,edge:nl,webkit:_a,android:sl,android23:ol,androidStock:Wf,opera:ma,chrome:al,gecko:rl,safari:Hf,phantom:hl,opera12:ll,win:Gf,ie3d:ul,webkit3d:pa,gecko3d:cl,any3d:jf,mobile:Gn,mobileWebkit:Uf,mobileWebkit3d:$f,msPointer:fl,pointer:dl,touch:Vf,touchNative:_l,mobileOpera:Kf,mobileGecko:Jf,retina:Xf,passiveEvents:Yf,canvas:Qf,svg:va,vml:ed,inlineSvg:td,mac:id,linux:nd},ml=R.msPointer?"MSPointerDown":"pointerdown",pl=R.msPointer?"MSPointerMove":"pointermove",vl=R.msPointer?"MSPointerUp":"pointerup",gl=R.msPointer?"MSPointerCancel":"pointercancel",jo={touchstart:ml,touchmove:pl,touchend:vl,touchcancel:gl},ah={touchstart:ld,touchmove:Ts,touchend:Ts,touchcancel:Ts},Vi={},rh=!1;function sd(t,e,n){return e==="touchstart"&&hd(),ah[e]?(n=ah[e].bind(this,n),t.addEventListener(jo[e],n,!1),n):(console.warn("wrong event specified:",e),St)}function od(t,e,n){if(!jo[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(jo[e],n,!1)}function ad(t){Vi[t.pointerId]=t}function rd(t){Vi[t.pointerId]&&(Vi[t.pointerId]=t)}function hh(t){delete Vi[t.pointerId]}function hd(){rh||(document.addEventListener(ml,ad,!0),document.addEventListener(pl,rd,!0),document.addEventListener(vl,hh,!0),document.addEventListener(gl,hh,!0),rh=!0)}function Ts(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in Vi)e.touches.push(Vi[n]);e.changedTouches=[e],t(e)}}function ld(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ft(e),Ts(t,e)}function ud(t){var e={},n,o;for(o in t)n=t[o],e[o]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var cd=200;function fd(t,e){t.addEventListener("dblclick",e);var n=0,o;function a(h){if(h.detail!==1){o=h.detail;return}if(!(h.pointerType==="mouse"||h.sourceCapabilities&&!h.sourceCapabilities.firesTouchEvents)){var l=wl(h);if(!(l.some(function(d){return d instanceof HTMLLabelElement&&d.attributes.for})&&!l.some(function(d){return d instanceof HTMLInputElement||d instanceof HTMLSelectElement}))){var c=Date.now();c-n<=cd?(o++,o===2&&e(ud(h))):o=1,n=c}}}return t.addEventListener("click",a),{dblclick:e,simDblclick:a}}function dd(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ga=js(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),En=js(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yl=En==="webkitTransition"||En==="OTransition"?En+"End":"transitionend";function xl(t){return typeof t=="string"?document.getElementById(t):t}function kn(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return n==="auto"?null:n}function at(t,e,n){var o=document.createElement(t);return o.className=e||"",n&&n.appendChild(o),o}function bt(t){var e=t.parentNode;e&&e.removeChild(t)}function Is(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function nn(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function sn(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ya(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=Gs(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function Y(t,e){if(t.classList!==void 0)for(var n=vi(e),o=0,a=n.length;o<a;o++)t.classList.add(n[o]);else if(!ya(t,e)){var h=Gs(t);xa(t,(h?h+" ":"")+e)}}function Et(t,e){t.classList!==void 0?t.classList.remove(e):xa(t,la((" "+Gs(t)+" ").replace(" "+e+" "," ")))}function xa(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Gs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function re(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&_d(t,e)}function _d(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function js(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function xi(t,e,n){var o=e||new K(0,0);t.style[ga]=(R.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")}function kt(t,e){t._leaflet_pos=e,R.any3d?xi(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Mi(t){return t._leaflet_pos||new K(0,0)}var Bn,Nn,Zo;if("onselectstart"in document)Bn=function(){J(window,"selectstart",Ft)},Nn=function(){vt(window,"selectstart",Ft)};else{var wn=js(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bn=function(){if(wn){var t=document.documentElement.style;Zo=t[wn],t[wn]="none"}},Nn=function(){wn&&(document.documentElement.style[wn]=Zo,Zo=void 0)}}function Ma(){J(window,"dragstart",Ft)}function wa(){vt(window,"dragstart",Ft)}var Ss,Uo;function ba(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ks(),Ss=t,Uo=t.style.outlineStyle,t.style.outlineStyle="none",J(window,"keydown",ks))}function ks(){Ss&&(Ss.style.outlineStyle=Uo,Ss=void 0,Uo=void 0,vt(window,"keydown",ks))}function Ml(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Pa(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var md={__proto__:null,TRANSFORM:ga,TRANSITION:En,TRANSITION_END:yl,get:xl,getStyle:kn,create:at,remove:bt,empty:Is,toFront:nn,toBack:sn,hasClass:ya,addClass:Y,removeClass:Et,setClass:xa,getClass:Gs,setOpacity:re,testProp:js,setTransform:xi,setPosition:kt,getPosition:Mi,get disableTextSelection(){return Bn},get enableTextSelection(){return Nn},disableImageDrag:Ma,enableImageDrag:wa,preventOutline:ba,restoreOutline:ks,getSizedParentNode:Ml,getScale:Pa};function J(t,e,n,o){if(e&&typeof e=="object")for(var a in e)Vo(t,a,e[a],n);else{e=vi(e);for(var h=0,l=e.length;h<l;h++)Vo(t,e[h],n,o)}return this}var Te="_leaflet_events";function vt(t,e,n,o){if(arguments.length===1)lh(t),delete t[Te];else if(e&&typeof e=="object")for(var a in e)Ko(t,a,e[a],n);else if(e=vi(e),arguments.length===2)lh(t,function(c){return ua(e,c)!==-1});else for(var h=0,l=e.length;h<l;h++)Ko(t,e[h],n,o);return this}function lh(t,e){for(var n in t[Te]){var o=n.split(/\d/)[0];(!e||e(o))&&Ko(t,o,null,null,n)}}var $o={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vo(t,e,n,o){var a=e+rt(n)+(o?"_"+rt(o):"");if(t[Te]&&t[Te][a])return this;var h=function(c){return n.call(o||t,c||window.event)},l=h;!R.touchNative&&R.pointer&&e.indexOf("touch")===0?h=sd(t,e,h):R.touch&&e==="dblclick"?h=fd(t,h):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener($o[e]||e,h,R.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(h=function(c){c=c||window.event,Ta(t,c)&&l(c)},t.addEventListener($o[e],h,!1)):t.addEventListener(e,l,!1):t.attachEvent("on"+e,h),t[Te]=t[Te]||{},t[Te][a]=h}function Ko(t,e,n,o,a){a=a||e+rt(n)+(o?"_"+rt(o):"");var h=t[Te]&&t[Te][a];if(!h)return this;!R.touchNative&&R.pointer&&e.indexOf("touch")===0?od(t,e,h):R.touch&&e==="dblclick"?dd(t,h):"removeEventListener"in t?t.removeEventListener($o[e]||e,h,!1):t.detachEvent("on"+e,h),t[Te][a]=null}function gi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function La(t){return Vo(t,"wheel",gi),this}function jn(t){return J(t,"mousedown touchstart dblclick contextmenu",gi),t._leaflet_disable_click=!0,this}function Ft(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function wi(t){return Ft(t),gi(t),this}function wl(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function bl(t,e){if(!e)return new K(t.clientX,t.clientY);var n=Pa(e),o=n.boundingClientRect;return new K((t.clientX-o.left)/n.x-e.clientLeft,(t.clientY-o.top)/n.y-e.clientTop)}var pd=R.linux&&R.chrome?window.devicePixelRatio:R.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pl(t){return R.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/pd:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ta(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var vd={__proto__:null,on:J,off:vt,stopPropagation:gi,disableScrollPropagation:La,disableClickPropagation:jn,preventDefault:Ft,stop:wi,getPropagationPath:wl,getMousePosition:bl,getWheelDelta:Pl,isExternalTarget:Ta,addListener:J,removeListener:vt},Ll=Wn.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=Mi(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Jt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),kt(this._el,n),this.fire("step")},_complete:function(){ue(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),st=Wn.extend({options:{crs:fa,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=yt(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=gt(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(et(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=En&&R.any3d&&!R.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),J(this._proxy,yl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(et(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=_t({animate:n.animate},n.zoom),n.pan=_t({animate:n.animate,duration:n.duration},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(R.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),a=this.getSize().divideBy(2),h=t instanceof K?t:this.latLngToContainerPoint(t),l=h.subtract(a).multiplyBy(1-1/o),c=this.containerPointToLatLng(a.add(l));return this.setView(c,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():Ct(t);var n=j(e.paddingTopLeft||e.padding||[0,0]),o=j(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,n.add(o));if(a=typeof e.maxZoom=="number"?Math.min(e.maxZoom,a):a,a===1/0)return{center:t.getCenter(),zoom:a};var h=o.subtract(n).divideBy(2),l=this.project(t.getSouthWest(),a),c=this.project(t.getNorthEast(),a),d=this.unproject(l.add(c).divideBy(2).add(h),a);return{center:d,zoom:a}},fitBounds:function(t,e){if(t=Ct(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=j(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ll,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Y(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!R.any3d)return this.setView(t,e,n);this._stop();var o=this.project(this.getCenter()),a=this.project(t),h=this.getSize(),l=this._zoom;t=et(t),e=e===void 0?l:e;var c=Math.max(h.x,h.y),d=c*this.getZoomScale(l,e),_=a.distanceTo(o)||1,v=1.42,p=v*v;function y(I){var A=I?-1:1,Q=I?d:c,ct=d*d-c*c+A*p*p*_*_,Ot=2*Q*p*_,ui=ct/Ot,ie=Math.sqrt(ui*ui+1)-ui,eo=ie<1e-9?-18:Math.log(ie);return eo}function M(I){return(Math.exp(I)-Math.exp(-I))/2}function b(I){return(Math.exp(I)+Math.exp(-I))/2}function P(I){return M(I)/b(I)}var T=y(0);function E(I){return c*(b(T)/b(T+v*I))}function k(I){return c*(b(T)*P(T+v*I)-M(T))/p}function B(I){return 1-Math.pow(1-I,1.5)}var U=Date.now(),W=(y(1)-T)/v,q=n.duration?1e3*n.duration:1e3*W*.8;function D(){var I=(Date.now()-U)/q,A=B(I)*W;I<=1?(this._flyToFrame=Jt(D,this),this._move(this.unproject(o.add(a.subtract(o).multiplyBy(k(A)/_)),l),this.getScaleZoom(c/E(A),l),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),D.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=Ct(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,Ct(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=j(e.paddingTopLeft||e.padding||[0,0]),o=j(e.paddingBottomRight||e.padding||[0,0]),a=this.project(this.getCenter()),h=this.project(t),l=this.getPixelBounds(),c=Kt([l.min.add(n),l.max.subtract(o)]),d=c.getSize();if(!c.contains(h)){this._enforcingBounds=!0;var _=h.subtract(c.getCenter()),v=c.extend(h).getSize().subtract(d);a.x+=_.x<0?-v.x:v.x,a.y+=_.y<0?-v.y:v.y,this.panTo(this.unproject(a),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=_t({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),a=n.divideBy(2).round(),h=o.subtract(a);return!h.x&&!h.y?this:(t.animate&&t.pan?this.panBy(h):(t.pan&&this._rawPanBy(h),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(gt(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=_t({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=gt(this._handleGeolocationResponse,this),n=gt(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,o=new dt(e,n),a=o.toBounds(t.coords.accuracy*2),h=this._locateOptions;if(h.setView){var l=this.getBoundsZoom(a);this.setView(o,h.maxZoom?Math.min(l,h.maxZoom):l)}var c={latlng:o,bounds:a,timestamp:t.timestamp};for(var d in t.coords)typeof t.coords[d]=="number"&&(c[d]=t.coords[d]);this.fire("locationfound",c)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ue(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)bt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=at("div",n,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new Xt(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=Ct(t),n=j(n||[0,0]);var o=this.getZoom()||0,a=this.getMinZoom(),h=this.getMaxZoom(),l=t.getNorthWest(),c=t.getSouthEast(),d=this.getSize().subtract(n),_=Kt(this.project(c,o),this.project(l,o)).getSize(),v=R.any3d?this.options.zoomSnap:1,p=d.x/_.x,y=d.y/_.y,M=e?Math.max(p,y):Math.min(p,y);return o=this.getScaleZoom(M,o),v&&(o=Math.round(o/(v/100))*(v/100),o=e?Math.ceil(o/v)*v:Math.floor(o/v)*v),Math.max(a,Math.min(h,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new Pt(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(et(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(j(t),e)},layerPointToLatLng:function(t){var e=j(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(et(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(et(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Ct(t))},distance:function(t,e){return this.options.crs.distance(et(t),et(e))},containerPointToLayerPoint:function(t){return j(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return j(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(j(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(et(t)))},mouseEventToContainerPoint:function(t){return bl(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=xl(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");J(e,"scroll",this._onScroll,this),this._containerId=rt(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&R.any3d,Y(t,"leaflet-container"+(R.touch?" leaflet-touch":"")+(R.retina?" leaflet-retina":"")+(R.ielt9?" leaflet-oldie":"")+(R.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=kn(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Y(t.markerPane,"leaflet-zoom-hide"),Y(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){kt(this._mapPane,new K(0,0));var o=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var a=this._zoom!==e;this._moveStart(a,n)._move(t,e)._moveEnd(a),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,o){e===void 0&&(e=this._zoom);var a=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?n&&n.pinch&&this.fire("zoom",n):((a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ue(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){kt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[rt(this._container)]=this;var e=t?vt:J;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),R.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ue(this._resizeRequest),this._resizeRequest=Jt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],o,a=e==="mouseout"||e==="mouseover",h=t.target||t.srcElement,l=!1;h;){if(o=this._targets[rt(h)],o&&(e==="click"||e==="preclick")&&this._draggableMoved(o)){l=!0;break}if(o&&o.listens(e,!0)&&(a&&!Ta(h,t)||(n.push(o),a))||h===this._container)break;h=h.parentNode}return!n.length&&!l&&!a&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&ba(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var o=_t({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}var a=this._findEventTargets(t,e);if(n){for(var h=[],l=0;l<n.length;l++)n[l].listens(e,!0)&&h.push(n[l]);a=h.concat(a)}if(a.length){e==="contextmenu"&&Ft(t);var c=a[0],d={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var _=c.getLatLng&&(!c._radius||c._radius<=10);d.containerPoint=_?this.latLngToContainerPoint(c.getLatLng()):this.mouseEventToContainerPoint(t),d.layerPoint=this.containerPointToLayerPoint(d.containerPoint),d.latlng=_?c.getLatLng():this.layerPointToLatLng(d.layerPoint)}for(l=0;l<a.length;l++)if(a[l].fire(e,d,!0),d.originalEvent._stopped||a[l].options.bubblingMouseEvents===!1&&ua(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Mi(this._mapPane)||new K(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return Kt([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),a=this.getSize().divideBy(2),h=new Pt(o.subtract(a),o.add(a)),l=this._getBoundsOffset(h,n,e);return Math.abs(l.x)<=1&&Math.abs(l.y)<=1?t:this.unproject(o.add(l),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new Pt(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=Kt(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),a=o.min.subtract(t.min),h=o.max.subtract(t.max),l=this._rebound(a.x,-h.x),c=this._rebound(a.y,-h.y);return new K(l,c)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=R.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=at("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=ga,o=this._proxy.style[n];xi(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();xi(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/o);return n.animate!==!0&&!this.getSize().contains(a)?!1:(Jt(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Y(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(gt(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gd(t,e){return new st(t,e)}var ve=je.extend({options:{position:"topright"},initialize:function(t){yt(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return Y(e,"leaflet-control"),n.indexOf("bottom")!==-1?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Un=function(t){return new ve(t)};st.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=at("div",e+"control-container",this._container);function o(a,h){var l=e+a+" "+e+h;t[a+h]=at("div",l,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)bt(this._controlCorners[t]);bt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Tl=ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,o){return n<o?-1:o<n?1:0}},initialize:function(t,e,n){yt(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ve.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(rt(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Y(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Y(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=at("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),jn(e),La(e);var o=this._section=at("section",t+"-list");n&&(this._map.on("click",this.collapse,this),J(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=at("a",t+"-toggle",e);a.href="#",a.title="Layers",a.setAttribute("role","button"),J(a,{keydown:function(h){h.keyCode===13&&this._expandSafely()},click:function(h){Ft(h),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=at("div",t+"-base",o),this._separator=at("div",t+"-separator",o),this._overlaysList=at("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&rt(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(gt(function(o,a){return this.options.sortFunction(o.layer,a.layer,o.name,a.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Is(this._baseLayersList),Is(this._overlaysList),this._layerControlInputs=[];var t,e,n,o,a=0;for(n=0;n<this._layers.length;n++)o=this._layers[n],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,a+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(rt(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=n):o=this._createRadioElement("leaflet-base-layers_"+rt(this),n),this._layerControlInputs.push(o),o.layerId=rt(t.layer),J(o,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var h=document.createElement("span");e.appendChild(h),h.appendChild(o),h.appendChild(a);var l=t.overlay?this._overlaysList:this._baseLayersList;return l.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,o=[],a=[];this._handlingClick=!0;for(var h=t.length-1;h>=0;h--)e=t[h],n=this._getLayer(e.layerId).layer,e.checked?o.push(n):e.checked||a.push(n);for(h=0;h<a.length;h++)this._map.hasLayer(a[h])&&this._map.removeLayer(a[h]);for(h=0;h<o.length;h++)this._map.hasLayer(o[h])||this._map.addLayer(o[h]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,o=this._map.getZoom(),a=t.length-1;a>=0;a--)e=t[a],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&o<n.options.minZoom||n.options.maxZoom!==void 0&&o>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,J(t,"click",Ft),this.expand();var e=this;setTimeout(function(){vt(t,"click",Ft),e._preventClick=!1})}}),yd=function(t,e,n){return new Tl(t,e,n)},Sa=ve.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=at("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,a){var h=at("a",n,o);return h.innerHTML=t,h.href="#",h.title=e,h.setAttribute("role","button"),h.setAttribute("aria-label",e),jn(h),J(h,"click",wi),J(h,"click",a,this),J(h,"click",this._refocusOnMap,this),h},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Et(this._zoomInButton,e),Et(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Y(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Y(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});st.mergeOptions({zoomControl:!0});st.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var xd=function(t){return new Sa(t)},Sl=ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=at("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=at("div",e,n)),t.imperial&&(this._iScale=at("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,o,a;e>5280?(n=e/5280,o=this._getRoundNum(n),this._updateScale(this._iScale,o+" mi",o/n)):(a=this._getRoundNum(e),this._updateScale(this._iScale,a+" ft",a/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Md=function(t){return new Sl(t)},wd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ca=ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(R.inlineSvg?wd+" ":"")+"Leaflet</a>"},initialize:function(t){yt(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=at("div","leaflet-control-attribution"),jn(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});st.mergeOptions({attributionControl:!0});st.addInitHook(function(){this.options.attributionControl&&new Ca().addTo(this)});var bd=function(t){return new Ca(t)};ve.Layers=Tl;ve.Zoom=Sa;ve.Scale=Sl;ve.Attribution=Ca;Un.layers=yd;Un.zoom=xd;Un.scale=Md;Un.attribution=bd;var ke=je.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ke.addTo=function(t,e){return t.addHandler(e,this),this};var Pd={Events:te},uh=R.touch?"touchstart mousedown":"mousedown",Qe=Wn.extend({options:{clickTolerance:3},initialize:function(t,e,n,o){yt(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(J(this._dragStartTarget,uh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qe._dragging===this&&this.finishDrag(!0),vt(this._dragStartTarget,uh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ya(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Qe._dragging===this&&this.finishDrag();return}if(!(Qe._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Qe._dragging=this,this._preventOutline&&ba(this._element),Ma(),Bn(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ml(this._element);this._startPoint=new K(e.clientX,e.clientY),this._startPos=Mi(this._element),this._parentScale=Pa(n);var o=t.type==="mousedown";J(document,o?"mousemove":"touchmove",this._onMove,this),J(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new K(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ft(t),this._moved||(this.fire("dragstart"),this._moved=!0,Y(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Y(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),kt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Et(document.body,"leaflet-dragging"),this._lastTarget&&(Et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vt(document,"mousemove touchmove",this._onMove,this),vt(document,"mouseup touchend touchcancel",this._onUp,this),wa(),Nn();var e=this._moved&&this._moving;this._moving=!1,Qe._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Cl(t,e,n){var o,a=[1,4,2,8],h,l,c,d,_,v,p,y;for(h=0,v=t.length;h<v;h++)t[h]._code=yi(t[h],e);for(c=0;c<4;c++){for(p=a[c],o=[],h=0,v=t.length,l=v-1;h<v;l=h++)d=t[h],_=t[l],d._code&p?_._code&p||(y=Bs(_,d,p,e,n),y._code=yi(y,e),o.push(y)):(_._code&p&&(y=Bs(_,d,p,e,n),y._code=yi(y,e),o.push(y)),o.push(d));t=o}return t}function El(t,e){var n,o,a,h,l,c,d,_,v;if(!t||t.length===0)throw new Error("latlngs not passed");ce(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var p=et([0,0]),y=Ct(t),M=y.getNorthWest().distanceTo(y.getSouthWest())*y.getNorthEast().distanceTo(y.getNorthWest());M<1700&&(p=Ea(t));var b=t.length,P=[];for(n=0;n<b;n++){var T=et(t[n]);P.push(e.project(et([T.lat-p.lat,T.lng-p.lng])))}for(c=d=_=0,n=0,o=b-1;n<b;o=n++)a=P[n],h=P[o],l=a.y*h.x-h.y*a.x,d+=(a.x+h.x)*l,_+=(a.y+h.y)*l,c+=l*3;c===0?v=P[0]:v=[d/c,_/c];var E=e.unproject(j(v));return et([E.lat+p.lat,E.lng+p.lng])}function Ea(t){for(var e=0,n=0,o=0,a=0;a<t.length;a++){var h=et(t[a]);e+=h.lat,n+=h.lng,o++}return et([e/o,n/o])}var Ld={__proto__:null,clipPolygon:Cl,polygonCenter:El,centroid:Ea};function Ol(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Cd(t,n),t=Sd(t,n),t}function Al(t,e,n){return Math.sqrt($n(t,e,n,!0))}function Td(t,e,n){return $n(t,e,n)}function Sd(t,e){var n=t.length,o=typeof Uint8Array!=void 0+""?Uint8Array:Array,a=new o(n);a[0]=a[n-1]=1,Jo(t,a,e,0,n-1);var h,l=[];for(h=0;h<n;h++)a[h]&&l.push(t[h]);return l}function Jo(t,e,n,o,a){var h=0,l,c,d;for(c=o+1;c<=a-1;c++)d=$n(t[c],t[o],t[a],!0),d>h&&(l=c,h=d);h>n&&(e[l]=1,Jo(t,e,n,o,l),Jo(t,e,n,l,a))}function Cd(t,e){for(var n=[t[0]],o=1,a=0,h=t.length;o<h;o++)Ed(t[o],t[a])>e&&(n.push(t[o]),a=o);return a<h-1&&n.push(t[h-1]),n}var ch;function zl(t,e,n,o,a){var h=o?ch:yi(t,n),l=yi(e,n),c,d,_;for(ch=l;;){if(!(h|l))return[t,e];if(h&l)return!1;c=h||l,d=Bs(t,e,c,n,a),_=yi(d,n),c===h?(t=d,h=_):(e=d,l=_)}}function Bs(t,e,n,o,a){var h=e.x-t.x,l=e.y-t.y,c=o.min,d=o.max,_,v;return n&8?(_=t.x+h*(d.y-t.y)/l,v=d.y):n&4?(_=t.x+h*(c.y-t.y)/l,v=c.y):n&2?(_=d.x,v=t.y+l*(d.x-t.x)/h):n&1&&(_=c.x,v=t.y+l*(c.x-t.x)/h),new K(_,v,a)}function yi(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Ed(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o}function $n(t,e,n,o){var a=e.x,h=e.y,l=n.x-a,c=n.y-h,d=l*l+c*c,_;return d>0&&(_=((t.x-a)*l+(t.y-h)*c)/d,_>1?(a=n.x,h=n.y):_>0&&(a+=l*_,h+=c*_)),l=t.x-a,c=t.y-h,o?l*l+c*c:new K(a,h)}function ce(t){return!ge(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Il(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ce(t)}function kl(t,e){var n,o,a,h,l,c,d,_;if(!t||t.length===0)throw new Error("latlngs not passed");ce(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var v=et([0,0]),p=Ct(t),y=p.getNorthWest().distanceTo(p.getSouthWest())*p.getNorthEast().distanceTo(p.getNorthWest());y<1700&&(v=Ea(t));var M=t.length,b=[];for(n=0;n<M;n++){var P=et(t[n]);b.push(e.project(et([P.lat-v.lat,P.lng-v.lng])))}for(n=0,o=0;n<M-1;n++)o+=b[n].distanceTo(b[n+1])/2;if(o===0)_=b[0];else for(n=0,h=0;n<M-1;n++)if(l=b[n],c=b[n+1],a=l.distanceTo(c),h+=a,h>o){d=(h-o)/a,_=[c.x-d*(c.x-l.x),c.y-d*(c.y-l.y)];break}var T=e.unproject(j(_));return et([T.lat+v.lat,T.lng+v.lng])}var Od={__proto__:null,simplify:Ol,pointToSegmentDistance:Al,closestPointOnSegment:Td,clipSegment:zl,_getEdgeIntersection:Bs,_getBitCode:yi,_sqClosestPointOnSegment:$n,isFlat:ce,_flat:Il,polylineCenter:kl},Oa={project:function(t){return new K(t.lng,t.lat)},unproject:function(t){return new dt(t.y,t.x)},bounds:new Pt([-180,-90],[180,90])},Xo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Pt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,a=this.R_MINOR/n,h=Math.sqrt(1-a*a),l=h*Math.sin(o),c=Math.tan(Math.PI/4-o/2)/Math.pow((1-l)/(1+l),h/2);return o=-n*Math.log(Math.max(c,1e-10)),new K(t.lng*e*n,o)},unproject:function(t){for(var e=180/Math.PI,n=this.R,o=this.R_MINOR/n,a=Math.sqrt(1-o*o),h=Math.exp(-t.y/n),l=Math.PI/2-2*Math.atan(h),c=0,d=.1,_;c<15&&Math.abs(d)>1e-7;c++)_=a*Math.sin(l),_=Math.pow((1-_)/(1+_),a/2),d=Math.PI/2-2*Math.atan(h*_)-l,l+=d;return new dt(l*e,t.x*e/n)}},Ad={__proto__:null,LonLat:Oa,Mercator:Xo,SphericalMercator:Go},zd=_t({},ei,{code:"EPSG:3395",projection:Xo,transformation:function(){var t=.5/(Math.PI*Xo.R);return Hn(t,.5,-t,.5)}()}),Bl=_t({},ei,{code:"EPSG:4326",projection:Oa,transformation:Hn(1/180,1,-1/180,.5)}),Id=_t({},Ue,{projection:Oa,transformation:Hn(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0});Ue.Earth=ei;Ue.EPSG3395=zd;Ue.EPSG3857=fa;Ue.EPSG900913=Df;Ue.EPSG4326=Bl;Ue.Simple=Id;var ye=Wn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[rt(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[rt(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});st.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=rt(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=rt(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return rt(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?ge(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[rt(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=rt(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var a=this._zoomBoundLayers[o].options;t=a.minZoom===void 0?t:Math.min(t,a.minZoom),e=a.maxZoom===void 0?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Gi=ye.extend({initialize:function(t,e){yt(this,e),this._layers={};var n,o;if(t)for(n=0,o=t.length;n<o;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,o;for(n in this._layers)o=this._layers[n],o[t]&&o[t].apply(o,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return rt(t)}}),kd=function(t,e){return new Gi(t,e)},We=Gi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Gi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Gi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Xt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Bd=function(t,e){return new We(t,e)},Ki=je.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){yt(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];typeof o=="number"&&(o=[o,o]);var a=j(o),h=j(e==="shadow"&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),h&&(t.style.marginLeft=-h.x+"px",t.style.marginTop=-h.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return R.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Nd(t){return new Ki(t)}var On=Ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof On.imagePath!="string"&&(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Ki.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,o,a){var h=o.exec(n);return h&&h[a]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=at("div","leaflet-default-icon-path",document.body),e=kn(t,"background-image")||kn(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),fh=ke.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qe(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Y(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,o=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,h=Mi(e._icon),l=n.getPixelBounds(),c=n.getPixelOrigin(),d=Kt(l.min._subtract(c).add(a),l.max._subtract(c).subtract(a));if(!d.contains(h)){var _=j((Math.max(d.max.x,h.x)-d.max.x)/(l.max.x-d.max.x)-(Math.min(d.min.x,h.x)-d.min.x)/(l.min.x-d.min.x),(Math.max(d.max.y,h.y)-d.max.y)/(l.max.y-d.max.y)-(Math.min(d.min.y,h.y)-d.min.y)/(l.min.y-d.min.y)).multiplyBy(o);n.panBy(_,{animate:!1}),this._draggable._newPos._add(_),this._draggable._startPos._add(_),kt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Jt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ue(this._panRequest),this._panRequest=Jt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,o=Mi(e._icon),a=e._map.layerPointToLatLng(o);n&&kt(n,o),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ue(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Us=ye.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){yt(this,e),this._latlng=et(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=et(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),Y(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(n,"focus",this._panOnFocus,this);var a=t.icon.createShadow(this._shadow),h=!1;a!==this._shadow&&(this._removeShadow(),h=!0),a&&(Y(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&h&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(this._icon,"focus",this._panOnFocus,this),bt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&kt(this._icon,t),this._shadow&&kt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Y(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fh)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fh(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&re(this._icon,t),this._shadow&&re(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?j(e.iconSize):j(0,0),o=e.iconAnchor?j(e.iconAnchor):j(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:n.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zd(t,e){return new Us(t,e)}var ii=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return yt(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$s=ii.extend({options:{fill:!0,radius:10},initialize:function(t,e){yt(this,e),this._latlng=et(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=et(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ii.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new Pt(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rd(t,e){return new $s(t,e)}var Aa=$s.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=_t({},n,{radius:e})),yt(this,e),this._latlng=et(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Xt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ii.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===ei.distance){var a=Math.PI/180,h=this._mRadius/ei.R/a,l=n.project([e+h,t]),c=n.project([e-h,t]),d=l.add(c).divideBy(2),_=n.unproject(d).lat,v=Math.acos((Math.cos(h*a)-Math.sin(e*a)*Math.sin(_*a))/(Math.cos(e*a)*Math.cos(_*a)))/a;(isNaN(v)||v===0)&&(v=h/Math.cos(Math.PI/180*e)),this._point=d.subtract(n.getPixelOrigin()),this._radius=isNaN(v)?0:d.x-n.project([_,t-v]).x,this._radiusY=d.y-l.y}else{var p=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(p).x}this._updateBounds()}});function Dd(t,e,n){return new Aa(t,e,n)}var qe=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){yt(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,o=$n,a,h,l=0,c=this._parts.length;l<c;l++)for(var d=this._parts[l],_=1,v=d.length;_<v;_++){a=d[_-1],h=d[_];var p=o(t,a,h,!0);p<e&&(e=p,n=o(t,a,h))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=et(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Xt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return ce(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=ce(t),o=0,a=t.length;o<a;o++)n?(e[o]=et(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new Pt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new K(t,t);this._rawPxBounds&&(this._pxBounds=new Pt([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var o=t[0]instanceof dt,a=t.length,h,l;if(o){for(l=[],h=0;h<a;h++)l[h]=this._map.latLngToLayerPoint(t[h]),n.extend(l[h]);e.push(l)}else for(h=0;h<a;h++)this._projectLatlngs(t[h],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,o,a,h,l,c,d;for(n=0,a=0,h=this._rings.length;n<h;n++)for(d=this._rings[n],o=0,l=d.length;o<l-1;o++)c=zl(d[o],d[o+1],t,o,!0),c&&(e[a]=e[a]||[],e[a].push(c[0]),(c[1]!==d[o+1]||o===l-2)&&(e[a].push(c[1]),a++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;n<o;n++)t[n]=Ol(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,o,a,h,l,c,d=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,h=this._parts.length;n<h;n++)for(c=this._parts[n],o=0,l=c.length,a=l-1;o<l;a=o++)if(!(!e&&o===0)&&Al(t,c[a],c[o])<=d)return!0;return!1}});function Fd(t,e){return new qe(t,e)}qe._flat=Il;var Ji=qe.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return El(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=qe.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof dt&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){qe.prototype._setLatLngs.call(this,t),ce(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ce(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new K(e,e);if(t=new Pt(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,a=this._rings.length,h;o<a;o++)h=Cl(this._rings[o],t,!0),h.length&&this._parts.push(h)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,o,a,h,l,c,d,_;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(h=0,d=this._parts.length;h<d;h++)for(n=this._parts[h],l=0,_=n.length,c=_-1;l<_;c=l++)o=n[l],a=n[c],o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(e=!e);return e||qe.prototype._containsPoint.call(this,t,!0)}});function qd(t,e){return new Ji(t,e)}var $e=We.extend({initialize:function(t,e){yt(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=ge(t)?t:t.features,n,o,a;if(e){for(n=0,o=e.length;n<o;n++)a=e[n],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var h=this.options;if(h.filter&&!h.filter(t))return this;var l=Ns(t,h);return l?(l.feature=Ks(t),l.defaultOptions=l.options,this.resetStyle(l),h.onEachFeature&&h.onEachFeature(t,l),this.addLayer(l)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=_t({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Ns(t,e){var n=t.type==="Feature"?t.geometry:t,o=n?n.coordinates:null,a=[],h=e&&e.pointToLayer,l=e&&e.coordsToLatLng||za,c,d,_,v;if(!o&&!n)return null;switch(n.type){case"Point":return c=l(o),dh(h,t,c,e);case"MultiPoint":for(_=0,v=o.length;_<v;_++)c=l(o[_]),a.push(dh(h,t,c,e));return new We(a);case"LineString":case"MultiLineString":return d=Zs(o,n.type==="LineString"?0:1,l),new qe(d,e);case"Polygon":case"MultiPolygon":return d=Zs(o,n.type==="Polygon"?1:2,l),new Ji(d,e);case"GeometryCollection":for(_=0,v=n.geometries.length;_<v;_++){var p=Ns({geometry:n.geometries[_],type:"Feature",properties:t.properties},e);p&&a.push(p)}return new We(a);case"FeatureCollection":for(_=0,v=n.features.length;_<v;_++){var y=Ns(n.features[_],e);y&&a.push(y)}return new We(a);default:throw new Error("Invalid GeoJSON object.")}}function dh(t,e,n,o){return t?t(e,n):new Us(n,o&&o.markersInheritOptions&&o)}function za(t){return new dt(t[1],t[0],t[2])}function Zs(t,e,n){for(var o=[],a=0,h=t.length,l;a<h;a++)l=e?Zs(t[a],e-1,n):(n||za)(t[a]),o.push(l);return o}function Ia(t,e){return t=et(t),t.alt!==void 0?[Le(t.lng,e),Le(t.lat,e),Le(t.alt,e)]:[Le(t.lng,e),Le(t.lat,e)]}function Vs(t,e,n,o){for(var a=[],h=0,l=t.length;h<l;h++)a.push(e?Vs(t[h],ce(t[h])?0:e-1,n,o):Ia(t[h],o));return!e&&n&&a.length>0&&a.push(a[0].slice()),a}function Xi(t,e){return t.feature?_t({},t.feature,{geometry:e}):Ks(e)}function Ks(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ka={toGeoJSON:function(t){return Xi(this,{type:"Point",coordinates:Ia(this.getLatLng(),t)})}};Us.include(ka);Aa.include(ka);$s.include(ka);qe.include({toGeoJSON:function(t){var e=!ce(this._latlngs),n=Vs(this._latlngs,e?1:0,!1,t);return Xi(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}});Ji.include({toGeoJSON:function(t){var e=!ce(this._latlngs),n=e&&!ce(this._latlngs[0]),o=Vs(this._latlngs,n?2:e?1:0,!0,t);return e||(o=[o]),Xi(this,{type:(n?"Multi":"")+"Polygon",coordinates:o})}});Gi.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Xi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",o=[];return this.eachLayer(function(a){if(a.toGeoJSON){var h=a.toGeoJSON(t);if(n)o.push(h.geometry);else{var l=Ks(h);l.type==="FeatureCollection"?o.push.apply(o,l.features):o.push(l)}}}),n?Xi(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function Nl(t,e){return new $e(t,e)}var Wd=Nl,Js=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=Ct(e),yt(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Y(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&nn(this._image),this},bringToBack:function(){return this._map&&sn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Ct(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:at("img");if(Y(e,"leaflet-image-layer"),this._zoomAnimated&&Y(e,"leaflet-zoom-animated"),this.options.className&&Y(e,this.options.className),e.onselectstart=St,e.onmousemove=St,e.onload=gt(this.fire,this,"load"),e.onerror=gt(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xi(this._image,n,e)},_reset:function(){var t=this._image,e=new Pt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();kt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Hd=function(t,e,n){return new Js(t,e,n)},Zl=Js.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:at("video");if(Y(e,"leaflet-image-layer"),this._zoomAnimated&&Y(e,"leaflet-zoom-animated"),this.options.className&&Y(e,this.options.className),e.onselectstart=St,e.onmousemove=St,e.onloadeddata=gt(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),o=[],a=0;a<n.length;a++)o.push(n[a].src);this._url=n.length>0?o:[e.src];return}ge(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var h=0;h<this._url.length;h++){var l=at("source");l.src=this._url[h],e.appendChild(l)}}});function Gd(t,e,n){return new Zl(t,e,n)}var Rl=Js.extend({_initImage:function(){var t=this._image=this._url;Y(t,"leaflet-image-layer"),this._zoomAnimated&&Y(t,"leaflet-zoom-animated"),this.options.className&&Y(t,this.options.className),t.onselectstart=St,t.onmousemove=St}});function jd(t,e,n){return new Rl(t,e,n)}var Se=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof dt||ge(t))?(this._latlng=et(t),yt(this,e)):(yt(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&re(this._container,1),this.bringToFront(),this.options.interactive&&(Y(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(re(this._container,0),this._removeTimeout=setTimeout(gt(bt,void 0,this._container),200)):bt(this._container),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=et(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&nn(this._container),this},bringToBack:function(){return this._map&&sn(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof We){e=null;var n=this._source._layers;for(var o in n)if(n[o]._map){e=n[o];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=j(this.options.offset),n=this._getAnchor();this._zoomAnimated?kt(this._container,t.add(n)):e=e.add(t).add(n);var o=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});st.include({_initOverlay:function(t,e,n,o){var a=e;return a instanceof t||(a=new t(o).setContent(e)),n&&a.setLatLng(n),a}});ye.include({_initOverlay:function(t,e,n,o){var a=n;return a instanceof t?(yt(a,o),a._source=this):(a=e&&!o?e:new t(o,this),a.setContent(n)),a}});var Xs=Se.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Se.prototype.openOn.call(this,t)},onAdd:function(t){Se.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",gi))},onRemove:function(t){Se.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",gi))},getEvents:function(){var t=Se.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=at("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=at("div",t+"-content-wrapper",e);if(this._contentNode=at("div",t+"-content",n),jn(e),La(this._contentNode),J(e,"contextmenu",gi),this._tipContainer=at("div",t+"-tip-container",e),this._tip=at("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=at("a",t+"-close-button",e);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',J(o,"click",function(a){Ft(a),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,a=this.options.maxHeight,h="leaflet-popup-scrolled";a&&o>a?(e.height=a+"px",Y(t,h)):Et(t,h),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();kt(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(kn(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,o=this._containerWidth,a=new K(this._containerLeft,-n-this._containerBottom);a._add(Mi(this._container));var h=t.layerPointToContainerPoint(a),l=j(this.options.autoPanPadding),c=j(this.options.autoPanPaddingTopLeft||l),d=j(this.options.autoPanPaddingBottomRight||l),_=t.getSize(),v=0,p=0;h.x+o+d.x>_.x&&(v=h.x+o-_.x+d.x),h.x-v-c.x<0&&(v=h.x-c.x),h.y+n+d.y>_.y&&(p=h.y+n-_.y+d.y),h.y-p-c.y<0&&(p=h.y-c.y),(v||p)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([v,p]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ud=function(t,e){return new Xs(t,e)};st.mergeOptions({closePopupOnClick:!0});st.include({openPopup:function(t,e,n){return this._initOverlay(Xs,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}});ye.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Xs,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof We||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){wi(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ys=Se.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Se.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Se.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Se.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=at("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+rt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,o=this._map,a=this._container,h=o.latLngToContainerPoint(o.getCenter()),l=o.layerPointToContainerPoint(t),c=this.options.direction,d=a.offsetWidth,_=a.offsetHeight,v=j(this.options.offset),p=this._getAnchor();c==="top"?(e=d/2,n=_):c==="bottom"?(e=d/2,n=0):c==="center"?(e=d/2,n=_/2):c==="right"?(e=0,n=_/2):c==="left"?(e=d,n=_/2):l.x<h.x?(c="right",e=0,n=_/2):(c="left",e=d+(v.x+p.x)*2,n=_/2),t=t.subtract(j(e,n,!0)).add(v).add(p),Et(a,"leaflet-tooltip-right"),Et(a,"leaflet-tooltip-left"),Et(a,"leaflet-tooltip-top"),Et(a,"leaflet-tooltip-bottom"),Y(a,"leaflet-tooltip-"+c),kt(a,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&re(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),$d=function(t,e){return new Ys(t,e)};st.include({openTooltip:function(t,e,n){return this._initOverlay(Ys,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}});ye.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ys,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof We||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(J(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),J(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,o;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var Dl=Ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(Is(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var o=j(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Vd(t){return new Dl(t)}Ki.Default=On;var An=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:R.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){yt(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),bt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(nn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(sn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Jh(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof K?t:new K(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),o=0,a=e.length,h;o<a;o++)h=e[o].style.zIndex,e[o]!==this._container&&h&&(n=t(n,+h));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!R.ielt9){re(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var a=this._tiles[o];if(!(!a.current||!a.loaded)){var h=Math.min(1,(t-a.loaded)/200);re(a.el,h),h<1?e=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(ue(this._fadeFrame),this._fadeFrame=Jt(this._updateOpacity,this))}},_onOpaqueTile:St,_initContainer:function(){this._container||(this._container=at("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(bt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var o=this._levels[t],a=this._map;return o||(o=this._levels[t]={},o.el=at("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,a.getCenter(),a.getZoom()),St(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:St,_onRemoveLevel:St,_onCreateLevel:St,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)bt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,o){var a=Math.floor(t/2),h=Math.floor(e/2),l=n-1,c=new K(+a,+h);c.z=+l;var d=this._tileCoordsToKey(c),_=this._tiles[d];return _&&_.active?(_.retain=!0,!0):(_&&_.loaded&&(_.retain=!0),l>o?this._retainParent(a,h,l,o):!1)},_retainChildren:function(t,e,n,o){for(var a=2*t;a<2*t+2;a++)for(var h=2*e;h<2*e+2;h++){var l=new K(a,h);l.z=n+1;var c=this._tileCoordsToKey(l),d=this._tiles[c];if(d&&d.active){d.retain=!0;continue}else d&&d.loaded&&(d.retain=!0);n+1<o&&this._retainChildren(a,h,n+1,o)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,o){var a=Math.round(e);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var h=this.options.updateWhenZooming&&a!==this._tileZoom;(!o||h)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),a=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();R.any3d?xi(t.el,a,o):kt(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),a=e.project(t,this._tileZoom).floor(),h=e.getSize().divideBy(o*2);return new Pt(a.subtract(h),a.add(h))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(o),h=a.getCenter(),l=[],c=this.options.keepBuffer,d=new Pt(a.getBottomLeft().subtract([c,-c]),a.getTopRight().add([c,-c]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _ in this._tiles){var v=this._tiles[_].coords;(v.z!==this._tileZoom||!d.contains(new K(v.x,v.y)))&&(this._tiles[_].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var p=a.min.y;p<=a.max.y;p++)for(var y=a.min.x;y<=a.max.x;y++){var M=new K(y,p);if(M.z=this._tileZoom,!!this._isValidTile(M)){var b=this._tiles[this._tileCoordsToKey(M)];b?b.current=!0:l.push(M)}}if(l.sort(function(T,E){return T.distanceTo(h)-E.distanceTo(h)}),l.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var P=document.createDocumentFragment();for(y=0;y<l.length;y++)this._addTile(l[y],P);this._level.el.appendChild(P)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return Ct(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),a=o.add(n),h=e.unproject(o,t.z),l=e.unproject(a,t.z);return[h,l]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new Xt(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new K(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(bt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Y(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=St,t.onmousemove=St,R.ielt9&&this.options.opacity<1&&re(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),gt(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&Jt(gt(this._tileReady,this,t,null,a)),kt(a,n),this._tiles[o]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);n=this._tiles[o],n&&(n.loaded=+new Date,this._map._fadeAnimated?(re(n.el,0),ue(this._fadeFrame),this._fadeFrame=Jt(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(Y(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),R.ielt9||!this._map._fadeAnimated?Jt(this._pruneTiles,this):setTimeout(gt(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new K(this._wrapX?In(t.x,this._wrapX):t.x,this._wrapY?In(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new Pt(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Kd(t){return new An(t)}var ji=An.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=yt(this,e),e.detectRetina&&R.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return J(n,"load",gt(this._tileOnLoad,this,e,n)),J(n,"error",gt(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:R.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return Yh(this._url,_t(e,this.options))},_tileOnLoad:function(t,e){R.ielt9?setTimeout(gt(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,o=this.options.zoomOffset;return n&&(t=e-t),t+o},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=St,e.onerror=St,!e.complete)){e.src=Ls;var n=this._tiles[t].coords;bt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",Ls),An.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===Ls))return An.prototype._tileReady.call(this,t,e,n)}});function Fl(t,e){return new ji(t,e)}var ql=ji.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=_t({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);e=yt(this,e);var a=e.detectRetina&&R.retina?2:1,h=this.getTileSize();n.width=h.x*a,n.height=h.y*a,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ji.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,o=Kt(n.project(e[0]),n.project(e[1])),a=o.min,h=o.max,l=(this._wmsVersion>=1.3&&this._crs===Bl?[a.y,a.x,h.y,h.x]:[a.x,a.y,h.x,h.y]).join(","),c=ji.prototype.getTileUrl.call(this,t);return c+Xh(this.wmsParams,c,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(t,e){return _t(this.wmsParams,t),e||this.redraw(),this}});function Jd(t,e){return new ql(t,e)}ji.WMS=ql;Fl.wms=Jd;var Fe=ye.extend({options:{padding:.1},initialize:function(t){yt(this,t),rt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Y(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),h=o.multiplyBy(-n).add(a).subtract(this._map._getNewPixelOrigin(t,e));R.any3d?xi(this._container,h,n):kt(this._container,h)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new Pt(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wl=Fe.extend({options:{tolerance:0},getEvents:function(){var t=Fe.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");J(t,"mousemove",this._onMouseMove,this),J(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),J(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ue(this._redrawRequest),delete this._ctx,bt(this._container),vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fe.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),o=R.retina?2:1;kt(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",R.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Fe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[rt(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,o=e.prev;n?n.prev=o:this._drawLast=o,o?o.next=n:this._drawFirst=n,delete t._order,delete this._layers[rt(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],o,a;for(a=0;a<e.length;a++){if(o=Number(e[a]),isNaN(o))return;n.push(o)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Jt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Pt,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,o,a,h,l=t._parts,c=l.length,d=this._ctx;if(c){for(d.beginPath(),n=0;n<c;n++){for(o=0,a=l[n].length;o<a;o++)h=l[n][o],d[o?"lineTo":"moveTo"](h.x,h.y);e&&d.closePath()}this._fillStroke(d,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,o=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||o)/o;a!==1&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(e.x,e.y/a,o,0,Math.PI*2,!1),a!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,o,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(o=n);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Et(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,o,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(Y(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(gt(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,o=e.prev;if(n)n.prev=o;else return;o?o.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,o=e.prev;if(o)o.next=n;else return;n?n.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Hl(t){return R.canvas?new Wl(t):null}var Ln=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Xd={_initContainer:function(){this._container=at("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fe.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ln("shape");Y(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ln("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[rt(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;bt(e),t.removeInteractiveTarget(e),delete this._layers[rt(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,a=t._container;a.stroked=!!o.stroke,a.filled=!!o.fill,o.stroke?(e||(e=t._stroke=Ln("stroke")),a.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=ge(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(a.removeChild(e),t._stroke=null),o.fill?(n||(n=t._fill=Ln("fill")),a.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(a.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){nn(t._container)},_bringToBack:function(t){sn(t._container)}},Cs=R.vml?Ln:el,Vn=Fe.extend({_initContainer:function(){this._container=Cs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bt(this._container),vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fe.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),kt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Cs("path");t.options.className&&Y(e,t.options.className),t.options.interactive&&Y(e,"leaflet-interactive"),this._updateStyle(t),this._layers[rt(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){bt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[rt(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,il(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||n,a="a"+n+","+o+" 0 1,0 ",h=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+a+n*2+",0 "+a+-n*2+",0 ";this._setPath(t,h)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){nn(t._path)},_bringToBack:function(t){sn(t._path)}});R.vml&&Vn.include(Xd);function Gl(t){return R.svg||R.vml?new Vn(t):null}st.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Hl(t)||Gl(t)}});var jl=Ji.extend({initialize:function(t,e){Ji.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Ct(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Yd(t,e){return new jl(t,e)}Vn.create=Cs;Vn.pointsToPath=il;$e.geometryToLayer=Ns;$e.coordsToLatLng=za;$e.coordsToLatLngs=Zs;$e.latLngToCoords=Ia;$e.latLngsToCoords=Vs;$e.getFeature=Xi;$e.asFeature=Ks;st.mergeOptions({boxZoom:!0});var Ul=ke.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bn(),Ma(),this._startPoint=this._map.mouseEventToContainerPoint(t),J(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=at("div","leaflet-zoom-box",this._container),Y(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new Pt(this._point,this._startPoint),n=e.getSize();kt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(bt(this._box),Et(this._container,"leaflet-crosshair")),Nn(),wa(),vt(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(gt(this._resetState,this),0);var e=new Xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});st.addInitHook("addHandler","boxZoom",Ul);st.mergeOptions({doubleClickZoom:!0});var $l=ke.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,a=t.originalEvent.shiftKey?n-o:n+o;e.options.doubleClickZoom==="center"?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});st.addInitHook("addHandler","doubleClickZoom",$l);st.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vl=ke.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qe(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Y(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,"leaflet-grab"),Et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=Ct(this._map.options.maxBounds);this._offsetLimit=Kt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,a=(o-e+n)%t+e-n,h=(o+e+n)%t-e-n,l=Math.abs(a+n)<Math.abs(h+n)?a:h;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=l},_onDragEnd:function(t){var e=this._map,n=e.options,o=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),h=(this._lastTime-this._times[0])/1e3,l=n.easeLinearity,c=a.multiplyBy(l/h),d=c.distanceTo([0,0]),_=Math.min(n.inertiaMaxSpeed,d),v=c.multiplyBy(_/d),p=_/(n.inertiaDeceleration*l),y=v.multiplyBy(-p/2).round();!y.x&&!y.y?e.fire("moveend"):(y=e._limitOffset(y,e.options.maxBounds),Jt(function(){e.panBy(y,{duration:p,easeLinearity:l,noMoveStart:!0,animate:!0})}))}}});st.addInitHook("addHandler","dragging",Vl);st.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kl=ke.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),J(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,o,a;for(o=0,a=n.left.length;o<a;o++)e[n.left[o]]=[-1*t,0];for(o=0,a=n.right.length;o<a;o++)e[n.right[o]]=[t,0];for(o=0,a=n.down.length;o<a;o++)e[n.down[o]]=[0,t];for(o=0,a=n.up.length;o<a;o++)e[n.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,o,a;for(o=0,a=n.zoomIn.length;o<a;o++)e[n.zoomIn[o]]=t;for(o=0,a=n.zoomOut.length;o<a;o++)e[n.zoomOut[o]]=-t},_addHooks:function(){J(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,o;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(o=this._panKeys[e],t.shiftKey&&(o=j(o).multiplyBy(3)),n.options.maxBounds&&(o=n._limitOffset(j(o),n.options.maxBounds)),n.options.worldCopyJump){var a=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(o)));n.panTo(a)}else n.panBy(o)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;wi(t)}}});st.addInitHook("addHandler","keyboard",Kl);st.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jl=ke.extend({addHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Pl(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(gt(this._performZoom,this),o),wi(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,h=n?Math.ceil(a/n)*n:a,l=t._limitZoom(e+(this._delta>0?h:-h))-e;this._delta=0,this._startTime=null,l&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+l):t.setZoomAround(this._lastMousePos,e+l))}});st.addInitHook("addHandler","scrollWheelZoom",Jl);var Qd=600;st.mergeOptions({tapHold:R.touchNative&&R.safari&&R.mobile,tapTolerance:15});var Xl=ke.extend({addHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new K(e.clientX,e.clientY),this._holdTimeout=setTimeout(gt(function(){this._cancel(),this._isTapValid()&&(J(document,"touchend",Ft),J(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Qd),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){vt(document,"touchend",Ft),vt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new K(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});st.addInitHook("addHandler","tapHold",Xl);st.mergeOptions({touchZoom:R.touch,bounceAtZoomLimits:!0});var Yl=ke.extend({addHooks:function(){Y(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),Ft(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),a=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var h=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(a===1&&h.x===0&&h.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(h),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),ue(this._animRequest);var l=gt(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Jt(l,this,!0),Ft(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ue(this._animRequest),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});st.addInitHook("addHandler","touchZoom",Yl);st.BoxZoom=Ul;st.DoubleClickZoom=$l;st.Drag=Vl;st.Keyboard=Kl;st.ScrollWheelZoom=Jl;st.TapHold=Xl;st.TouchZoom=Yl;const li=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Pt,Browser:R,CRS:Ue,Canvas:Wl,Circle:Aa,CircleMarker:$s,Class:je,Control:ve,DivIcon:Dl,DivOverlay:Se,DomEvent:vd,DomUtil:md,Draggable:Qe,Evented:Wn,FeatureGroup:We,GeoJSON:$e,GridLayer:An,Handler:ke,Icon:Ki,ImageOverlay:Js,LatLng:dt,LatLngBounds:Xt,Layer:ye,LayerGroup:Gi,LineUtil:Od,Map:st,Marker:Us,Mixin:Pd,Path:ii,Point:K,PolyUtil:Ld,Polygon:Ji,Polyline:qe,Popup:Xs,PosAnimation:Ll,Projection:Ad,Rectangle:jl,Renderer:Fe,SVG:Vn,SVGOverlay:Rl,TileLayer:ji,Tooltip:Ys,Transformation:ca,Util:Zf,VideoOverlay:Zl,bind:gt,bounds:Kt,canvas:Hl,circle:Dd,circleMarker:Rd,control:Un,divIcon:Vd,extend:_t,featureGroup:Bd,geoJSON:Nl,geoJson:Wd,gridLayer:Kd,icon:Nd,imageOverlay:Hd,latLng:et,latLngBounds:Ct,layerGroup:kd,map:gd,marker:Zd,point:j,polygon:qd,polyline:Fd,popup:Ud,rectangle:Yd,setOptions:yt,stamp:rt,svg:Gl,svgOverlay:jd,tileLayer:Fl,tooltip:$d,transformation:Hn,version:Bf,videoOverlay:Gd},Symbol.toStringTag,{value:"Module"}));var ws={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var _h;function Ql(){return _h||(_h=1,function(t,e){(function(n,o){o(e)})(Kc,function(n){var o="1.9.4";function a(i){var s,r,u,f;for(r=1,u=arguments.length;r<u;r++){f=arguments[r];for(s in f)i[s]=f[s]}return i}var h=Object.create||function(){function i(){}return function(s){return i.prototype=s,new i}}();function l(i,s){var r=Array.prototype.slice;if(i.bind)return i.bind.apply(i,r.call(arguments,1));var u=r.call(arguments,2);return function(){return i.apply(s,u.length?u.concat(r.call(arguments)):arguments)}}var c=0;function d(i){return"_leaflet_id"in i||(i._leaflet_id=++c),i._leaflet_id}function _(i,s,r){var u,f,m,g;return g=function(){u=!1,f&&(m.apply(r,f),f=!1)},m=function(){u?f=arguments:(i.apply(r,arguments),setTimeout(g,s),u=!0)},m}function v(i,s,r){var u=s[1],f=s[0],m=u-f;return i===u&&r?i:((i-f)%m+m)%m+f}function p(){return!1}function y(i,s){if(s===!1)return i;var r=Math.pow(10,s===void 0?6:s);return Math.round(i*r)/r}function M(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function b(i){return M(i).split(/\s+/)}function P(i,s){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?h(i.options):{});for(var r in s)i.options[r]=s[r];return i.options}function T(i,s,r){var u=[];for(var f in i)u.push(encodeURIComponent(r?f.toUpperCase():f)+"="+encodeURIComponent(i[f]));return(!s||s.indexOf("?")===-1?"?":"&")+u.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function k(i,s){return i.replace(E,function(r,u){var f=s[u];if(f===void 0)throw new Error("No value provided for variable "+r);return typeof f=="function"&&(f=f(s)),f})}var B=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function U(i,s){for(var r=0;r<i.length;r++)if(i[r]===s)return r;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var D=0;function I(i){var s=+new Date,r=Math.max(0,16-(s-D));return D=s+r,window.setTimeout(i,r)}var A=window.requestAnimationFrame||q("RequestAnimationFrame")||I,Q=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function ct(i,s,r){if(r&&A===I)i.call(s);else return A.call(window,l(i,s))}function Ot(i){i&&Q.call(window,i)}var ui={__proto__:null,extend:a,create:h,bind:l,get lastId(){return c},stamp:d,throttle:_,wrapNum:v,falseFn:p,formatNum:y,trim:M,splitWords:b,setOptions:P,getParamString:T,template:k,isArray:B,indexOf:U,emptyImageUrl:W,requestFn:A,cancelFn:Q,requestAnimFrame:ct,cancelAnimFrame:Ot};function ie(){}ie.extend=function(i){var s=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=s.__super__=this.prototype,u=h(r);u.constructor=s,s.prototype=u;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(s[f]=this[f]);return i.statics&&a(s,i.statics),i.includes&&(eo(i.includes),a.apply(null,[u].concat(i.includes))),a(u,i),delete u.statics,delete u.includes,u.options&&(u.options=r.options?h(r.options):{},a(u.options,i.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,g=u._initHooks.length;m<g;m++)u._initHooks[m].call(this)}},s},ie.include=function(i){var s=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=s,this.mergeOptions(i.options)),this},ie.mergeOptions=function(i){return a(this.prototype.options,i),this},ie.addInitHook=function(i){var s=Array.prototype.slice.call(arguments,1),r=typeof i=="function"?i:function(){this[i].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function eo(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=B(i)?i:[i];for(var s=0;s<i.length;s++)i[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qt={on:function(i,s,r){if(typeof i=="object")for(var u in i)this._on(u,i[u],s);else{i=b(i);for(var f=0,m=i.length;f<m;f++)this._on(i[f],s,r)}return this},off:function(i,s,r){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var u in i)this._off(u,i[u],s);else{i=b(i);for(var f=arguments.length===1,m=0,g=i.length;m<g;m++)f?this._off(i[m]):this._off(i[m],s,r)}return this},_on:function(i,s,r,u){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(i,s,r)===!1){r===this&&(r=void 0);var f={fn:s,ctx:r};u&&(f.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(f)}},_off:function(i,s,r){var u,f,m;if(this._events&&(u=this._events[i],!!u)){if(arguments.length===1){if(this._firingCount)for(f=0,m=u.length;f<m;f++)u[f].fn=p;delete this._events[i];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var g=this._listens(i,s,r);if(g!==!1){var x=u[g];this._firingCount&&(x.fn=p,this._events[i]=u=u.slice()),u.splice(g,1)}}},fire:function(i,s,r){if(!this.listens(i,r))return this;var u=a({},s,{type:i,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var f=this._events[i];if(f){this._firingCount=this._firingCount+1||1;for(var m=0,g=f.length;m<g;m++){var x=f[m],w=x.fn;x.once&&this.off(i,w,x.ctx),w.call(x.ctx||this,u)}this._firingCount--}}return r&&this._propagateEvent(u),this},listens:function(i,s,r,u){typeof i!="string"&&console.warn('"string" type argument expected');var f=s;typeof s!="function"&&(u=!!s,f=void 0,r=void 0);var m=this._events&&this._events[i];if(m&&m.length&&this._listens(i,f,r)!==!1)return!0;if(u){for(var g in this._eventParents)if(this._eventParents[g].listens(i,s,r,u))return!0}return!1},_listens:function(i,s,r){if(!this._events)return!1;var u=this._events[i]||[];if(!s)return!!u.length;r===this&&(r=void 0);for(var f=0,m=u.length;f<m;f++)if(u[f].fn===s&&u[f].ctx===r)return f;return!1},once:function(i,s,r){if(typeof i=="object")for(var u in i)this._on(u,i[u],s,!0);else{i=b(i);for(var f=0,m=i.length;f<m;f++)this._on(i[f],s,r,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[d(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[d(i)],this},_propagateEvent:function(i){for(var s in this._eventParents)this._eventParents[s].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};Qt.addEventListener=Qt.on,Qt.removeEventListener=Qt.clearAllEventListeners=Qt.off,Qt.addOneTimeEventListener=Qt.once,Qt.fireEvent=Qt.fire,Qt.hasEventListeners=Qt.listens;var an=ie.extend(Qt);function $(i,s,r){this.x=r?Math.round(i):i,this.y=r?Math.round(s):s}var Fa=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(G(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(G(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new $(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new $(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fa(this.x),this.y=Fa(this.y),this},distanceTo:function(i){i=G(i);var s=i.x-this.x,r=i.y-this.y;return Math.sqrt(s*s+r*r)},equals:function(i){return i=G(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=G(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function G(i,s,r){return i instanceof $?i:B(i)?new $(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new $(i.x,i.y):new $(i,s,r)}function xt(i,s){if(i)for(var r=s?[i,s]:i,u=0,f=r.length;u<f;u++)this.extend(r[u])}xt.prototype={extend:function(i){var s,r;if(!i)return this;if(i instanceof $||typeof i[0]=="number"||"x"in i)s=r=G(i);else if(i=jt(i),s=i.min,r=i.max,!s||!r)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=r.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(i){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var s,r;return typeof i[0]=="number"||i instanceof $?i=G(i):i=jt(i),i instanceof xt?(s=i.min,r=i.max):s=r=i,s.x>=this.min.x&&r.x<=this.max.x&&s.y>=this.min.y&&r.y<=this.max.y},intersects:function(i){i=jt(i);var s=this.min,r=this.max,u=i.min,f=i.max,m=f.x>=s.x&&u.x<=r.x,g=f.y>=s.y&&u.y<=r.y;return m&&g},overlaps:function(i){i=jt(i);var s=this.min,r=this.max,u=i.min,f=i.max,m=f.x>s.x&&u.x<r.x,g=f.y>s.y&&u.y<r.y;return m&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var s=this.min,r=this.max,u=Math.abs(s.x-r.x)*i,f=Math.abs(s.y-r.y)*i;return jt(G(s.x-u,s.y-f),G(r.x+u,r.y+f))},equals:function(i){return i?(i=jt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function jt(i,s){return!i||i instanceof xt?i:new xt(i,s)}function Ut(i,s){if(i)for(var r=s?[i,s]:i,u=0,f=r.length;u<f;u++)this.extend(r[u])}Ut.prototype={extend:function(i){var s=this._southWest,r=this._northEast,u,f;if(i instanceof ft)u=i,f=i;else if(i instanceof Ut){if(u=i._southWest,f=i._northEast,!u||!f)return this}else return i?this.extend(it(i)||At(i)):this;return!s&&!r?(this._southWest=new ft(u.lat,u.lng),this._northEast=new ft(f.lat,f.lng)):(s.lat=Math.min(u.lat,s.lat),s.lng=Math.min(u.lng,s.lng),r.lat=Math.max(f.lat,r.lat),r.lng=Math.max(f.lng,r.lng)),this},pad:function(i){var s=this._southWest,r=this._northEast,u=Math.abs(s.lat-r.lat)*i,f=Math.abs(s.lng-r.lng)*i;return new Ut(new ft(s.lat-u,s.lng-f),new ft(r.lat+u,r.lng+f))},getCenter:function(){return new ft((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ft(this.getNorth(),this.getWest())},getSouthEast:function(){return new ft(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ft||"lat"in i?i=it(i):i=At(i);var s=this._southWest,r=this._northEast,u,f;return i instanceof Ut?(u=i.getSouthWest(),f=i.getNorthEast()):u=f=i,u.lat>=s.lat&&f.lat<=r.lat&&u.lng>=s.lng&&f.lng<=r.lng},intersects:function(i){i=At(i);var s=this._southWest,r=this._northEast,u=i.getSouthWest(),f=i.getNorthEast(),m=f.lat>=s.lat&&u.lat<=r.lat,g=f.lng>=s.lng&&u.lng<=r.lng;return m&&g},overlaps:function(i){i=At(i);var s=this._southWest,r=this._northEast,u=i.getSouthWest(),f=i.getNorthEast(),m=f.lat>s.lat&&u.lat<r.lat,g=f.lng>s.lng&&u.lng<r.lng;return m&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,s){return i?(i=At(i),this._southWest.equals(i.getSouthWest(),s)&&this._northEast.equals(i.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(i,s){return i instanceof Ut?i:new Ut(i,s)}function ft(i,s,r){if(isNaN(i)||isNaN(s))throw new Error("Invalid LatLng object: ("+i+", "+s+")");this.lat=+i,this.lng=+s,r!==void 0&&(this.alt=+r)}ft.prototype={equals:function(i,s){if(!i)return!1;i=it(i);var r=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return r<=(s===void 0?1e-9:s)},toString:function(i){return"LatLng("+y(this.lat,i)+", "+y(this.lng,i)+")"},distanceTo:function(i){return Ke.distance(this,it(i))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(i){var s=180*i/40075017,r=s/Math.cos(Math.PI/180*this.lat);return At([this.lat-s,this.lng-r],[this.lat+s,this.lng+r])},clone:function(){return new ft(this.lat,this.lng,this.alt)}};function it(i,s,r){return i instanceof ft?i:B(i)&&typeof i[0]!="object"?i.length===3?new ft(i[0],i[1],i[2]):i.length===2?new ft(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ft(i.lat,"lng"in i?i.lng:i.lon,i.alt):s===void 0?null:new ft(i,s,r)}var Be={latLngToPoint:function(i,s){var r=this.projection.project(i),u=this.scale(s);return this.transformation._transform(r,u)},pointToLatLng:function(i,s){var r=this.scale(s),u=this.transformation.untransform(i,r);return this.projection.unproject(u)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var s=this.projection.bounds,r=this.scale(i),u=this.transformation.transform(s.min,r),f=this.transformation.transform(s.max,r);return new xt(u,f)},infinite:!1,wrapLatLng:function(i){var s=this.wrapLng?v(i.lng,this.wrapLng,!0):i.lng,r=this.wrapLat?v(i.lat,this.wrapLat,!0):i.lat,u=i.alt;return new ft(r,s,u)},wrapLatLngBounds:function(i){var s=i.getCenter(),r=this.wrapLatLng(s),u=s.lat-r.lat,f=s.lng-r.lng;if(u===0&&f===0)return i;var m=i.getSouthWest(),g=i.getNorthEast(),x=new ft(m.lat-u,m.lng-f),w=new ft(g.lat-u,g.lng-f);return new Ut(x,w)}},Ke=a({},Be,{wrapLng:[-180,180],R:6371e3,distance:function(i,s){var r=Math.PI/180,u=i.lat*r,f=s.lat*r,m=Math.sin((s.lat-i.lat)*r/2),g=Math.sin((s.lng-i.lng)*r/2),x=m*m+Math.cos(u)*Math.cos(f)*g*g,w=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*w}}),qa=6378137,io={R:qa,MAX_LATITUDE:85.0511287798,project:function(i){var s=Math.PI/180,r=this.MAX_LATITUDE,u=Math.max(Math.min(r,i.lat),-r),f=Math.sin(u*s);return new $(this.R*i.lng*s,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(i){var s=180/Math.PI;return new ft((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*s,i.x*s/this.R)},bounds:function(){var i=qa*Math.PI;return new xt([-i,-i],[i,i])}()};function no(i,s,r,u){if(B(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=s,this._c=r,this._d=u}no.prototype={transform:function(i,s){return this._transform(i.clone(),s)},_transform:function(i,s){return s=s||1,i.x=s*(this._a*i.x+this._b),i.y=s*(this._c*i.y+this._d),i},untransform:function(i,s){return s=s||1,new $((i.x/s-this._b)/this._a,(i.y/s-this._d)/this._c)}};function rn(i,s,r,u){return new no(i,s,r,u)}var so=a({},Ke,{code:"EPSG:3857",projection:io,transformation:function(){var i=.5/(Math.PI*io.R);return rn(i,.5,-i,.5)}()}),bu=a({},so,{code:"EPSG:900913"});function Wa(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ha(i,s){var r="",u,f,m,g,x,w;for(u=0,m=i.length;u<m;u++){for(x=i[u],f=0,g=x.length;f<g;f++)w=x[f],r+=(f?"L":"M")+w.x+" "+w.y;r+=s?Z.svg?"z":"x":""}return r||"M0 0"}var oo=document.documentElement.style,ts="ActiveXObject"in window,Pu=ts&&!document.addEventListener,Ga="msLaunchUri"in navigator&&!("documentMode"in document),ao=xe("webkit"),ja=xe("android"),Ua=xe("android 2")||xe("android 3"),Lu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Tu=ja&&xe("Google")&&Lu<537&&!("AudioNode"in window),ro=!!window.opera,$a=!Ga&&xe("chrome"),Va=xe("gecko")&&!ao&&!ro&&!ts,Su=!$a&&xe("safari"),Ka=xe("phantom"),Ja="OTransition"in oo,Cu=navigator.platform.indexOf("Win")===0,Xa=ts&&"transition"in oo,ho="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ua,Ya="MozPerspective"in oo,Eu=!window.L_DISABLE_3D&&(Xa||ho||Ya)&&!Ja&&!Ka,hn=typeof orientation<"u"||xe("mobile"),Ou=hn&&ao,Au=hn&&ho,Qa=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||Qa),er="ontouchstart"in window||!!window.TouchEvent,zu=!window.L_NO_TOUCH&&(er||tr),Iu=hn&&ro,ku=hn&&Va,Bu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nu=function(){var i=!1;try{var s=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",p,s),window.removeEventListener("testPassiveEventSupport",p,s)}catch{}return i}(),Zu=function(){return!!document.createElement("canvas").getContext}(),lo=!!(document.createElementNS&&Wa("svg").createSVGRect),Ru=!!lo&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Du=!lo&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var s=i.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Fu=navigator.platform.indexOf("Mac")===0,qu=navigator.platform.indexOf("Linux")===0;function xe(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Z={ie:ts,ielt9:Pu,edge:Ga,webkit:ao,android:ja,android23:Ua,androidStock:Tu,opera:ro,chrome:$a,gecko:Va,safari:Su,phantom:Ka,opera12:Ja,win:Cu,ie3d:Xa,webkit3d:ho,gecko3d:Ya,any3d:Eu,mobile:hn,mobileWebkit:Ou,mobileWebkit3d:Au,msPointer:Qa,pointer:tr,touch:zu,touchNative:er,mobileOpera:Iu,mobileGecko:ku,retina:Bu,passiveEvents:Nu,canvas:Zu,svg:lo,vml:Du,inlineSvg:Ru,mac:Fu,linux:qu},ir=Z.msPointer?"MSPointerDown":"pointerdown",nr=Z.msPointer?"MSPointerMove":"pointermove",sr=Z.msPointer?"MSPointerUp":"pointerup",or=Z.msPointer?"MSPointerCancel":"pointercancel",uo={touchstart:ir,touchmove:nr,touchend:sr,touchcancel:or},ar={touchstart:$u,touchmove:es,touchend:es,touchcancel:es},Ei={},rr=!1;function Wu(i,s,r){return s==="touchstart"&&Uu(),ar[s]?(r=ar[s].bind(this,r),i.addEventListener(uo[s],r,!1),r):(console.warn("wrong event specified:",s),p)}function Hu(i,s,r){if(!uo[s]){console.warn("wrong event specified:",s);return}i.removeEventListener(uo[s],r,!1)}function Gu(i){Ei[i.pointerId]=i}function ju(i){Ei[i.pointerId]&&(Ei[i.pointerId]=i)}function hr(i){delete Ei[i.pointerId]}function Uu(){rr||(document.addEventListener(ir,Gu,!0),document.addEventListener(nr,ju,!0),document.addEventListener(sr,hr,!0),document.addEventListener(or,hr,!0),rr=!0)}function es(i,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var r in Ei)s.touches.push(Ei[r]);s.changedTouches=[s],i(s)}}function $u(i,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Rt(s),es(i,s)}function Vu(i){var s={},r,u;for(u in i)r=i[u],s[u]=r&&r.bind?r.bind(i):r;return i=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var Ku=200;function Ju(i,s){i.addEventListener("dblclick",s);var r=0,u;function f(m){if(m.detail!==1){u=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var g=dr(m);if(!(g.some(function(w){return w instanceof HTMLLabelElement&&w.attributes.for})&&!g.some(function(w){return w instanceof HTMLInputElement||w instanceof HTMLSelectElement}))){var x=Date.now();x-r<=Ku?(u++,u===2&&s(Vu(m))):u=1,r=x}}}return i.addEventListener("click",f),{dblclick:s,simDblclick:f}}function Xu(i,s){i.removeEventListener("dblclick",s.dblclick),i.removeEventListener("click",s.simDblclick)}var co=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ln=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lr=ln==="webkitTransition"||ln==="OTransition"?ln+"End":"transitionend";function ur(i){return typeof i=="string"?document.getElementById(i):i}function un(i,s){var r=i.style[s]||i.currentStyle&&i.currentStyle[s];if((!r||r==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(i,null);r=u?u[s]:null}return r==="auto"?null:r}function ot(i,s,r){var u=document.createElement(i);return u.className=s||"",r&&r.appendChild(u),u}function Mt(i){var s=i.parentNode;s&&s.removeChild(i)}function is(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Oi(i){var s=i.parentNode;s&&s.lastChild!==i&&s.appendChild(i)}function Ai(i){var s=i.parentNode;s&&s.firstChild!==i&&s.insertBefore(i,s.firstChild)}function fo(i,s){if(i.classList!==void 0)return i.classList.contains(s);var r=ns(i);return r.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(r)}function X(i,s){if(i.classList!==void 0)for(var r=b(s),u=0,f=r.length;u<f;u++)i.classList.add(r[u]);else if(!fo(i,s)){var m=ns(i);_o(i,(m?m+" ":"")+s)}}function Lt(i,s){i.classList!==void 0?i.classList.remove(s):_o(i,M((" "+ns(i)+" ").replace(" "+s+" "," ")))}function _o(i,s){i.className.baseVal===void 0?i.className=s:i.className.baseVal=s}function ns(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ne(i,s){"opacity"in i.style?i.style.opacity=s:"filter"in i.style&&Yu(i,s)}function Yu(i,s){var r=!1,u="DXImageTransform.Microsoft.Alpha";try{r=i.filters.item(u)}catch{if(s===1)return}s=Math.round(s*100),r?(r.Enabled=s!==100,r.Opacity=s):i.style.filter+=" progid:"+u+"(opacity="+s+")"}function ss(i){for(var s=document.documentElement.style,r=0;r<i.length;r++)if(i[r]in s)return i[r];return!1}function ci(i,s,r){var u=s||new $(0,0);i.style[co]=(Z.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(r?" scale("+r+")":"")}function zt(i,s){i._leaflet_pos=s,Z.any3d?ci(i,s):(i.style.left=s.x+"px",i.style.top=s.y+"px")}function fi(i){return i._leaflet_pos||new $(0,0)}var cn,fn,mo;if("onselectstart"in document)cn=function(){V(window,"selectstart",Rt)},fn=function(){mt(window,"selectstart",Rt)};else{var dn=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cn=function(){if(dn){var i=document.documentElement.style;mo=i[dn],i[dn]="none"}},fn=function(){dn&&(document.documentElement.style[dn]=mo,mo=void 0)}}function po(){V(window,"dragstart",Rt)}function vo(){mt(window,"dragstart",Rt)}var os,go;function yo(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(as(),os=i,go=i.style.outlineStyle,i.style.outlineStyle="none",V(window,"keydown",as))}function as(){os&&(os.style.outlineStyle=go,os=void 0,go=void 0,mt(window,"keydown",as))}function cr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function xo(i){var s=i.getBoundingClientRect();return{x:s.width/i.offsetWidth||1,y:s.height/i.offsetHeight||1,boundingClientRect:s}}var Qu={__proto__:null,TRANSFORM:co,TRANSITION:ln,TRANSITION_END:lr,get:ur,getStyle:un,create:ot,remove:Mt,empty:is,toFront:Oi,toBack:Ai,hasClass:fo,addClass:X,removeClass:Lt,setClass:_o,getClass:ns,setOpacity:ne,testProp:ss,setTransform:ci,setPosition:zt,getPosition:fi,get disableTextSelection(){return cn},get enableTextSelection(){return fn},disableImageDrag:po,enableImageDrag:vo,preventOutline:yo,restoreOutline:as,getSizedParentNode:cr,getScale:xo};function V(i,s,r,u){if(s&&typeof s=="object")for(var f in s)wo(i,f,s[f],r);else{s=b(s);for(var m=0,g=s.length;m<g;m++)wo(i,s[m],r,u)}return this}var Me="_leaflet_events";function mt(i,s,r,u){if(arguments.length===1)fr(i),delete i[Me];else if(s&&typeof s=="object")for(var f in s)bo(i,f,s[f],r);else if(s=b(s),arguments.length===2)fr(i,function(x){return U(s,x)!==-1});else for(var m=0,g=s.length;m<g;m++)bo(i,s[m],r,u);return this}function fr(i,s){for(var r in i[Me]){var u=r.split(/\d/)[0];(!s||s(u))&&bo(i,u,null,null,r)}}var Mo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wo(i,s,r,u){var f=s+d(r)+(u?"_"+d(u):"");if(i[Me]&&i[Me][f])return this;var m=function(x){return r.call(u||i,x||window.event)},g=m;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?m=Wu(i,s,m):Z.touch&&s==="dblclick"?m=Ju(i,m):"addEventListener"in i?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?i.addEventListener(Mo[s]||s,m,Z.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(m=function(x){x=x||window.event,Lo(i,x)&&g(x)},i.addEventListener(Mo[s],m,!1)):i.addEventListener(s,g,!1):i.attachEvent("on"+s,m),i[Me]=i[Me]||{},i[Me][f]=m}function bo(i,s,r,u,f){f=f||s+d(r)+(u?"_"+d(u):"");var m=i[Me]&&i[Me][f];if(!m)return this;!Z.touchNative&&Z.pointer&&s.indexOf("touch")===0?Hu(i,s,m):Z.touch&&s==="dblclick"?Xu(i,m):"removeEventListener"in i?i.removeEventListener(Mo[s]||s,m,!1):i.detachEvent("on"+s,m),i[Me][f]=null}function di(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Po(i){return wo(i,"wheel",di),this}function _n(i){return V(i,"mousedown touchstart dblclick contextmenu",di),i._leaflet_disable_click=!0,this}function Rt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function _i(i){return Rt(i),di(i),this}function dr(i){if(i.composedPath)return i.composedPath();for(var s=[],r=i.target;r;)s.push(r),r=r.parentNode;return s}function _r(i,s){if(!s)return new $(i.clientX,i.clientY);var r=xo(s),u=r.boundingClientRect;return new $((i.clientX-u.left)/r.x-s.clientLeft,(i.clientY-u.top)/r.y-s.clientTop)}var tc=Z.linux&&Z.chrome?window.devicePixelRatio:Z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mr(i){return Z.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/tc:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Lo(i,s){var r=s.relatedTarget;if(!r)return!0;try{for(;r&&r!==i;)r=r.parentNode}catch{return!1}return r!==i}var ec={__proto__:null,on:V,off:mt,stopPropagation:di,disableScrollPropagation:Po,disableClickPropagation:_n,preventDefault:Rt,stop:_i,getPropagationPath:dr,getMousePosition:_r,getWheelDelta:mr,isExternalTarget:Lo,addListener:V,removeListener:mt},pr=an.extend({run:function(i,s,r,u){this.stop(),this._el=i,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=fi(i),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ct(this._animate,this),this._step()},_step:function(i){var s=+new Date-this._startTime,r=this._duration*1e3;s<r?this._runFrame(this._easeOut(s/r),i):(this._runFrame(1),this._complete())},_runFrame:function(i,s){var r=this._startPos.add(this._offset.multiplyBy(i));s&&r._round(),zt(this._el,r),this.fire("step")},_complete:function(){Ot(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),nt=an.extend({options:{crs:so,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,s){s=P(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(it(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ln&&Z.any3d&&!Z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),V(this._proxy,lr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,s,r){if(s=s===void 0?this._zoom:this._limitZoom(s),i=this._limitCenter(it(i),s,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=a({animate:r.animate},r.zoom),r.pan=a({animate:r.animate,duration:r.duration},r.pan));var u=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,s,r.zoom):this._tryAnimatedPan(i,r.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(i,s,r.pan&&r.pan.noMoveStart),this},setZoom:function(i,s){return this._loaded?this.setView(this.getCenter(),i,{zoom:s}):(this._zoom=i,this)},zoomIn:function(i,s){return i=i||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,s)},zoomOut:function(i,s){return i=i||(Z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,s)},setZoomAround:function(i,s,r){var u=this.getZoomScale(s),f=this.getSize().divideBy(2),m=i instanceof $?i:this.latLngToContainerPoint(i),g=m.subtract(f).multiplyBy(1-1/u),x=this.containerPointToLatLng(f.add(g));return this.setView(x,s,{zoom:r})},_getBoundsCenterZoom:function(i,s){s=s||{},i=i.getBounds?i.getBounds():At(i);var r=G(s.paddingTopLeft||s.padding||[0,0]),u=G(s.paddingBottomRight||s.padding||[0,0]),f=this.getBoundsZoom(i,!1,r.add(u));if(f=typeof s.maxZoom=="number"?Math.min(s.maxZoom,f):f,f===1/0)return{center:i.getCenter(),zoom:f};var m=u.subtract(r).divideBy(2),g=this.project(i.getSouthWest(),f),x=this.project(i.getNorthEast(),f),w=this.unproject(g.add(x).divideBy(2).add(m),f);return{center:w,zoom:f}},fitBounds:function(i,s){if(i=At(i),!i.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(i,s);return this.setView(r.center,r.zoom,s)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,s){return this.setView(i,this._zoom,{pan:s})},panBy:function(i,s){if(i=G(i).round(),s=s||{},!i.x&&!i.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){X(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,r,s.duration||.25,s.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,s,r){if(r=r||{},r.animate===!1||!Z.any3d)return this.setView(i,s,r);this._stop();var u=this.project(this.getCenter()),f=this.project(i),m=this.getSize(),g=this._zoom;i=it(i),s=s===void 0?g:s;var x=Math.max(m.x,m.y),w=x*this.getZoomScale(g,s),S=f.distanceTo(u)||1,z=1.42,F=z*z;function tt(It){var gs=It?-1:1,Hc=It?w:x,Gc=w*w-x*x+gs*F*F*S*S,jc=2*Hc*F*S,No=Gc/jc,Jr=Math.sqrt(No*No+1)-No,Uc=Jr<1e-9?-18:Math.log(Jr);return Uc}function Wt(It){return(Math.exp(It)-Math.exp(-It))/2}function Bt(It){return(Math.exp(It)+Math.exp(-It))/2}function oe(It){return Wt(It)/Bt(It)}var $t=tt(0);function Zi(It){return x*(Bt($t)/Bt($t+z*It))}function Dc(It){return x*(Bt($t)*oe($t+z*It)-Wt($t))/F}function Fc(It){return 1-Math.pow(1-It,1.5)}var qc=Date.now(),Vr=(tt(1)-$t)/z,Wc=r.duration?1e3*r.duration:1e3*Vr*.8;function Kr(){var It=(Date.now()-qc)/Wc,gs=Fc(It)*Vr;It<=1?(this._flyToFrame=ct(Kr,this),this._move(this.unproject(u.add(f.subtract(u).multiplyBy(Dc(gs)/S)),g),this.getScaleZoom(x/Zi(gs),g),{flyTo:!0})):this._move(i,s)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),Kr.call(this),this},flyToBounds:function(i,s){var r=this._getBoundsCenterZoom(i,s);return this.flyTo(r.center,r.zoom,s)},setMaxBounds:function(i){return i=At(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var s=this.options.minZoom;return this.options.minZoom=i,this._loaded&&s!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var s=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&s!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,s){this._enforcingBounds=!0;var r=this.getCenter(),u=this._limitCenter(r,this._zoom,At(i));return r.equals(u)||this.panTo(u,s),this._enforcingBounds=!1,this},panInside:function(i,s){s=s||{};var r=G(s.paddingTopLeft||s.padding||[0,0]),u=G(s.paddingBottomRight||s.padding||[0,0]),f=this.project(this.getCenter()),m=this.project(i),g=this.getPixelBounds(),x=jt([g.min.add(r),g.max.subtract(u)]),w=x.getSize();if(!x.contains(m)){this._enforcingBounds=!0;var S=m.subtract(x.getCenter()),z=x.extend(m).getSize().subtract(w);f.x+=S.x<0?-z.x:z.x,f.y+=S.y<0?-z.y:z.y,this.panTo(this.unproject(f),s),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),u=s.divideBy(2).round(),f=r.divideBy(2).round(),m=u.subtract(f);return!m.x&&!m.y?this:(i.animate&&i.pan?this.panBy(m):(i.pan&&this._rawPanBy(m),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=l(this._handleGeolocationResponse,this),r=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,r,i):navigator.geolocation.getCurrentPosition(s,r,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var s=i.code,r=i.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var s=i.coords.latitude,r=i.coords.longitude,u=new ft(s,r),f=u.toBounds(i.coords.accuracy*2),m=this._locateOptions;if(m.setView){var g=this.getBoundsZoom(f);this.setView(u,m.maxZoom?Math.min(g,m.maxZoom):g)}var x={latlng:u,bounds:f,timestamp:i.timestamp};for(var w in i.coords)typeof i.coords[w]=="number"&&(x[w]=i.coords[w]);this.fire("locationfound",x)}},addHandler:function(i,s){if(!s)return this;var r=this[i]=new s(this);return this._handlers.push(r),this.options[i]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ot(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Mt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,s){var r="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),u=ot("div",r,s||this._mapPane);return i&&(this._panes[i]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),s=this.unproject(i.getBottomLeft()),r=this.unproject(i.getTopRight());return new Ut(s,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,s,r){i=At(i),r=G(r||[0,0]);var u=this.getZoom()||0,f=this.getMinZoom(),m=this.getMaxZoom(),g=i.getNorthWest(),x=i.getSouthEast(),w=this.getSize().subtract(r),S=jt(this.project(x,u),this.project(g,u)).getSize(),z=Z.any3d?this.options.zoomSnap:1,F=w.x/S.x,tt=w.y/S.y,Wt=s?Math.max(F,tt):Math.min(F,tt);return u=this.getScaleZoom(Wt,u),z&&(u=Math.round(u/(z/100))*(z/100),u=s?Math.ceil(u/z)*z:Math.floor(u/z)*z),Math.max(f,Math.min(m,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,s){var r=this._getTopLeftPoint(i,s);return new xt(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,s){var r=this.options.crs;return s=s===void 0?this._zoom:s,r.scale(i)/r.scale(s)},getScaleZoom:function(i,s){var r=this.options.crs;s=s===void 0?this._zoom:s;var u=r.zoom(i*r.scale(s));return isNaN(u)?1/0:u},project:function(i,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(it(i),s)},unproject:function(i,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(G(i),s)},layerPointToLatLng:function(i){var s=G(i).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(i){var s=this.project(it(i))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(it(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(At(i))},distance:function(i,s){return this.options.crs.distance(it(i),it(s))},containerPointToLayerPoint:function(i){return G(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return G(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var s=this.containerPointToLayerPoint(G(i));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(it(i)))},mouseEventToContainerPoint:function(i){return _r(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var s=this._container=ur(i);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");V(s,"scroll",this._onScroll,this),this._containerId=d(s)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Z.any3d,X(i,"leaflet-container"+(Z.touch?" leaflet-touch":"")+(Z.retina?" leaflet-retina":"")+(Z.ielt9?" leaflet-oldie":"")+(Z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=un(i,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(X(i.markerPane,"leaflet-zoom-hide"),X(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,s,r){zt(this._mapPane,new $(0,0));var u=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var f=this._zoom!==s;this._moveStart(f,r)._move(i,s)._moveEnd(f),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(i,s){return i&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(i,s,r,u){s===void 0&&(s=this._zoom);var f=this._zoom!==s;return this._zoom=s,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),u?r&&r.pinch&&this.fire("zoom",r):((f||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ot(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){zt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[d(this._container)]=this;var s=i?mt:V;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Z.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ot(this._resizeRequest),this._resizeRequest=ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,s){for(var r=[],u,f=s==="mouseout"||s==="mouseover",m=i.target||i.srcElement,g=!1;m;){if(u=this._targets[d(m)],u&&(s==="click"||s==="preclick")&&this._draggableMoved(u)){g=!0;break}if(u&&u.listens(s,!0)&&(f&&!Lo(m,i)||(r.push(u),f))||m===this._container)break;m=m.parentNode}return!r.length&&!g&&!f&&this.listens(s,!0)&&(r=[this]),r},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var s=i.target||i.srcElement;if(!(!this._loaded||s._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(s))){var r=i.type;r==="mousedown"&&yo(s),this._fireDOMEvent(i,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,s,r){if(i.type==="click"){var u=a({},i);u.type="preclick",this._fireDOMEvent(u,u.type,r)}var f=this._findEventTargets(i,s);if(r){for(var m=[],g=0;g<r.length;g++)r[g].listens(s,!0)&&m.push(r[g]);f=m.concat(f)}if(f.length){s==="contextmenu"&&Rt(i);var x=f[0],w={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var S=x.getLatLng&&(!x._radius||x._radius<=10);w.containerPoint=S?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(i),w.layerPoint=this.containerPointToLayerPoint(w.containerPoint),w.latlng=S?x.getLatLng():this.layerPointToLatLng(w.layerPoint)}for(g=0;g<f.length;g++)if(f[g].fire(s,w,!0),w.originalEvent._stopped||f[g].options.bubblingMouseEvents===!1&&U(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,s=this._handlers.length;i<s;i++)this._handlers[i].disable()},whenReady:function(i,s){return this._loaded?i.call(s||this,{target:this}):this.on("load",i,s),this},_getMapPanePos:function(){return fi(this._mapPane)||new $(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,s){var r=i&&s!==void 0?this._getNewPixelOrigin(i,s):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,s){var r=this.getSize()._divideBy(2);return this.project(i,s)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,s,r){var u=this._getNewPixelOrigin(r,s);return this.project(i,s)._subtract(u)},_latLngBoundsToNewLayerBounds:function(i,s,r){var u=this._getNewPixelOrigin(r,s);return jt([this.project(i.getSouthWest(),s)._subtract(u),this.project(i.getNorthWest(),s)._subtract(u),this.project(i.getSouthEast(),s)._subtract(u),this.project(i.getNorthEast(),s)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,s,r){if(!r)return i;var u=this.project(i,s),f=this.getSize().divideBy(2),m=new xt(u.subtract(f),u.add(f)),g=this._getBoundsOffset(m,r,s);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?i:this.unproject(u.add(g),s)},_limitOffset:function(i,s){if(!s)return i;var r=this.getPixelBounds(),u=new xt(r.min.add(i),r.max.add(i));return i.add(this._getBoundsOffset(u,s))},_getBoundsOffset:function(i,s,r){var u=jt(this.project(s.getNorthEast(),r),this.project(s.getSouthWest(),r)),f=u.min.subtract(i.min),m=u.max.subtract(i.max),g=this._rebound(f.x,-m.x),x=this._rebound(f.y,-m.y);return new $(g,x)},_rebound:function(i,s){return i+s>0?Math.round(i-s)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(s))},_limitZoom:function(i){var s=this.getMinZoom(),r=this.getMaxZoom(),u=Z.any3d?this.options.zoomSnap:1;return u&&(i=Math.round(i/u)*u),Math.max(s,Math.min(r,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,s){var r=this._getCenterOffset(i)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,s),!0)},_createAnimProxy:function(){var i=this._proxy=ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(s){var r=co,u=this._proxy.style[r];ci(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),u===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),s=this.getZoom();ci(this._proxy,this.project(i,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,s,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(s),f=this._getCenterOffset(i)._divideBy(1-1/u);return r.animate!==!0&&!this.getSize().contains(f)?!1:(ct(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(i,s,!0)},this),!0)},_animateZoom:function(i,s,r,u){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=s,X(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:s,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ic(i,s){return new nt(i,s)}var fe=ie.extend({options:{position:"topright"},initialize:function(i){P(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var s=this._map;return s&&s.removeControl(this),this.options.position=i,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var s=this._container=this.onAdd(i),r=this.getPosition(),u=i._controlCorners[r];return X(s,"leaflet-control"),r.indexOf("bottom")!==-1?u.insertBefore(s,u.firstChild):u.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),mn=function(i){return new fe(i)};nt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},s="leaflet-",r=this._controlContainer=ot("div",s+"control-container",this._container);function u(f,m){var g=s+f+" "+s+m;i[f+m]=ot("div",g,r)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Mt(this._controlCorners[i]);Mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vr=fe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,s,r,u){return r<u?-1:u<r?1:0}},initialize:function(i,s,r){P(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var u in i)this._addLayer(i[u],u);for(u in s)this._addLayer(s[u],u,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return fe.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,s){return this._addLayer(i,s),this._map?this._update():this},addOverlay:function(i,s){return this._addLayer(i,s,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var s=this._getLayer(d(i));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){X(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(X(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",s=this._container=ot("div",i),r=this.options.collapsed;s.setAttribute("aria-haspopup",!0),_n(s),Po(s);var u=this._section=ot("section",i+"-list");r&&(this._map.on("click",this.collapse,this),V(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=ot("a",i+"-toggle",s);f.href="#",f.title="Layers",f.setAttribute("role","button"),V(f,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){Rt(m),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=ot("div",i+"-base",u),this._separator=ot("div",i+"-separator",u),this._overlaysList=ot("div",i+"-overlays",u),s.appendChild(u)},_getLayer:function(i){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&d(this._layers[s].layer)===i)return this._layers[s]},_addLayer:function(i,s,r){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:s,overlay:r}),this.options.sortLayers&&this._layers.sort(l(function(u,f){return this.options.sortFunction(u.layer,f.layer,u.name,f.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;is(this._baseLayersList),is(this._overlaysList),this._layerControlInputs=[];var i,s,r,u,f=0;for(r=0;r<this._layers.length;r++)u=this._layers[r],this._addItem(u),s=s||u.overlay,i=i||!u.overlay,f+=u.overlay?0:1;return this.options.hideSingleBase&&(i=i&&f>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=s&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var s=this._getLayer(d(i.target)),r=s.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;r&&this._map.fire(r,s)},_createRadioElement:function(i,s){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(s?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=r,u.firstChild},_addItem:function(i){var s=document.createElement("label"),r=this._map.hasLayer(i.layer),u;i.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=r):u=this._createRadioElement("leaflet-base-layers_"+d(this),r),this._layerControlInputs.push(u),u.layerId=d(i.layer),V(u,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+i.name;var m=document.createElement("span");s.appendChild(m),m.appendChild(u),m.appendChild(f);var g=i.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,s,r,u=[],f=[];this._handlingClick=!0;for(var m=i.length-1;m>=0;m--)s=i[m],r=this._getLayer(s.layerId).layer,s.checked?u.push(r):s.checked||f.push(r);for(m=0;m<f.length;m++)this._map.hasLayer(f[m])&&this._map.removeLayer(f[m]);for(m=0;m<u.length;m++)this._map.hasLayer(u[m])||this._map.addLayer(u[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,s,r,u=this._map.getZoom(),f=i.length-1;f>=0;f--)s=i[f],r=this._getLayer(s.layerId).layer,s.disabled=r.options.minZoom!==void 0&&u<r.options.minZoom||r.options.maxZoom!==void 0&&u>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,V(i,"click",Rt),this.expand();var s=this;setTimeout(function(){mt(i,"click",Rt),s._preventClick=!1})}}),nc=function(i,s,r){return new vr(i,s,r)},To=fe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var s="leaflet-control-zoom",r=ot("div",s+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,s+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,s+"-out",r,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,s,r,u,f){var m=ot("a",r,u);return m.innerHTML=i,m.href="#",m.title=s,m.setAttribute("role","button"),m.setAttribute("aria-label",s),_n(m),V(m,"click",_i),V(m,"click",f,this),V(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var i=this._map,s="leaflet-disabled";Lt(this._zoomInButton,s),Lt(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(X(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(X(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new To,this.addControl(this.zoomControl))});var sc=function(i){return new To(i)},gr=fe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var s="leaflet-control-scale",r=ot("div",s),u=this.options;return this._addScales(u,s+"-line",r),i.on(u.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),r},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,s,r){i.metric&&(this._mScale=ot("div",s,r)),i.imperial&&(this._iScale=ot("div",s,r))},_update:function(){var i=this._map,s=i.getSize().y/2,r=i.distance(i.containerPointToLatLng([0,s]),i.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(r)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var s=this._getRoundNum(i),r=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,r,s/i)},_updateImperial:function(i){var s=i*3.2808399,r,u,f;s>5280?(r=s/5280,u=this._getRoundNum(r),this._updateScale(this._iScale,u+" mi",u/r)):(f=this._getRoundNum(s),this._updateScale(this._iScale,f+" ft",f/s))},_updateScale:function(i,s,r){i.style.width=Math.round(this.options.maxWidth*r)+"px",i.innerHTML=s},_getRoundNum:function(i){var s=Math.pow(10,(Math.floor(i)+"").length-1),r=i/s;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,s*r}}),oc=function(i){return new gr(i)},ac='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',So=fe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Z.inlineSvg?ac+" ":"")+"Leaflet</a>"},initialize:function(i){P(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ot("div","leaflet-control-attribution"),_n(this._container);for(var s in i._layers)i._layers[s].getAttribution&&this.addAttribution(i._layers[s].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var s in this._attributions)this._attributions[s]&&i.push(s);var r=[];this.options.prefix&&r.push(this.options.prefix),i.length&&r.push(i.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new So().addTo(this)});var rc=function(i){return new So(i)};fe.Layers=vr,fe.Zoom=To,fe.Scale=gr,fe.Attribution=So,mn.layers=nc,mn.zoom=sc,mn.scale=oc,mn.attribution=rc;var we=ie.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});we.addTo=function(i,s){return i.addHandler(s,this),this};var hc={Events:Qt},yr=Z.touch?"touchstart mousedown":"mousedown",Je=an.extend({options:{clickTolerance:3},initialize:function(i,s,r,u){P(this,u),this._element=i,this._dragStartTarget=s||i,this._preventOutline=r},enable:function(){this._enabled||(V(this._dragStartTarget,yr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Je._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,yr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!fo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Je._dragging===this&&this.finishDrag();return}if(!(Je._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Je._dragging=this,this._preventOutline&&yo(this._element),po(),cn(),!this._moving)){this.fire("down");var s=i.touches?i.touches[0]:i,r=cr(this._element);this._startPoint=new $(s.clientX,s.clientY),this._startPos=fi(this._element),this._parentScale=xo(r);var u=i.type==="mousedown";V(document,u?"mousemove":"touchmove",this._onMove,this),V(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var s=i.touches&&i.touches.length===1?i.touches[0]:i,r=new $(s.clientX,s.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Rt(i),this._moved||(this.fire("dragstart"),this._moved=!0,X(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),X(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),zt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Lt(document.body,"leaflet-dragging"),this._lastTarget&&(Lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),vo(),fn();var s=this._moved&&this._moving;this._moving=!1,Je._dragging=!1,s&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function xr(i,s,r){var u,f=[1,4,2,8],m,g,x,w,S,z,F,tt;for(m=0,z=i.length;m<z;m++)i[m]._code=mi(i[m],s);for(x=0;x<4;x++){for(F=f[x],u=[],m=0,z=i.length,g=z-1;m<z;g=m++)w=i[m],S=i[g],w._code&F?S._code&F||(tt=rs(S,w,F,s,r),tt._code=mi(tt,s),u.push(tt)):(S._code&F&&(tt=rs(S,w,F,s,r),tt._code=mi(tt,s),u.push(tt)),u.push(w));i=u}return i}function Mr(i,s){var r,u,f,m,g,x,w,S,z;if(!i||i.length===0)throw new Error("latlngs not passed");se(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var F=it([0,0]),tt=At(i),Wt=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());Wt<1700&&(F=Co(i));var Bt=i.length,oe=[];for(r=0;r<Bt;r++){var $t=it(i[r]);oe.push(s.project(it([$t.lat-F.lat,$t.lng-F.lng])))}for(x=w=S=0,r=0,u=Bt-1;r<Bt;u=r++)f=oe[r],m=oe[u],g=f.y*m.x-m.y*f.x,w+=(f.x+m.x)*g,S+=(f.y+m.y)*g,x+=g*3;x===0?z=oe[0]:z=[w/x,S/x];var Zi=s.unproject(G(z));return it([Zi.lat+F.lat,Zi.lng+F.lng])}function Co(i){for(var s=0,r=0,u=0,f=0;f<i.length;f++){var m=it(i[f]);s+=m.lat,r+=m.lng,u++}return it([s/u,r/u])}var lc={__proto__:null,clipPolygon:xr,polygonCenter:Mr,centroid:Co};function wr(i,s){if(!s||!i.length)return i.slice();var r=s*s;return i=fc(i,r),i=cc(i,r),i}function br(i,s,r){return Math.sqrt(pn(i,s,r,!0))}function uc(i,s,r){return pn(i,s,r)}function cc(i,s){var r=i.length,u=typeof Uint8Array!=void 0+""?Uint8Array:Array,f=new u(r);f[0]=f[r-1]=1,Eo(i,f,s,0,r-1);var m,g=[];for(m=0;m<r;m++)f[m]&&g.push(i[m]);return g}function Eo(i,s,r,u,f){var m=0,g,x,w;for(x=u+1;x<=f-1;x++)w=pn(i[x],i[u],i[f],!0),w>m&&(g=x,m=w);m>r&&(s[g]=1,Eo(i,s,r,u,g),Eo(i,s,r,g,f))}function fc(i,s){for(var r=[i[0]],u=1,f=0,m=i.length;u<m;u++)dc(i[u],i[f])>s&&(r.push(i[u]),f=u);return f<m-1&&r.push(i[m-1]),r}var Pr;function Lr(i,s,r,u,f){var m=u?Pr:mi(i,r),g=mi(s,r),x,w,S;for(Pr=g;;){if(!(m|g))return[i,s];if(m&g)return!1;x=m||g,w=rs(i,s,x,r,f),S=mi(w,r),x===m?(i=w,m=S):(s=w,g=S)}}function rs(i,s,r,u,f){var m=s.x-i.x,g=s.y-i.y,x=u.min,w=u.max,S,z;return r&8?(S=i.x+m*(w.y-i.y)/g,z=w.y):r&4?(S=i.x+m*(x.y-i.y)/g,z=x.y):r&2?(S=w.x,z=i.y+g*(w.x-i.x)/m):r&1&&(S=x.x,z=i.y+g*(x.x-i.x)/m),new $(S,z,f)}function mi(i,s){var r=0;return i.x<s.min.x?r|=1:i.x>s.max.x&&(r|=2),i.y<s.min.y?r|=4:i.y>s.max.y&&(r|=8),r}function dc(i,s){var r=s.x-i.x,u=s.y-i.y;return r*r+u*u}function pn(i,s,r,u){var f=s.x,m=s.y,g=r.x-f,x=r.y-m,w=g*g+x*x,S;return w>0&&(S=((i.x-f)*g+(i.y-m)*x)/w,S>1?(f=r.x,m=r.y):S>0&&(f+=g*S,m+=x*S)),g=i.x-f,x=i.y-m,u?g*g+x*x:new $(f,m)}function se(i){return!B(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Tr(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),se(i)}function Sr(i,s){var r,u,f,m,g,x,w,S;if(!i||i.length===0)throw new Error("latlngs not passed");se(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var z=it([0,0]),F=At(i),tt=F.getNorthWest().distanceTo(F.getSouthWest())*F.getNorthEast().distanceTo(F.getNorthWest());tt<1700&&(z=Co(i));var Wt=i.length,Bt=[];for(r=0;r<Wt;r++){var oe=it(i[r]);Bt.push(s.project(it([oe.lat-z.lat,oe.lng-z.lng])))}for(r=0,u=0;r<Wt-1;r++)u+=Bt[r].distanceTo(Bt[r+1])/2;if(u===0)S=Bt[0];else for(r=0,m=0;r<Wt-1;r++)if(g=Bt[r],x=Bt[r+1],f=g.distanceTo(x),m+=f,m>u){w=(m-u)/f,S=[x.x-w*(x.x-g.x),x.y-w*(x.y-g.y)];break}var $t=s.unproject(G(S));return it([$t.lat+z.lat,$t.lng+z.lng])}var _c={__proto__:null,simplify:wr,pointToSegmentDistance:br,closestPointOnSegment:uc,clipSegment:Lr,_getEdgeIntersection:rs,_getBitCode:mi,_sqClosestPointOnSegment:pn,isFlat:se,_flat:Tr,polylineCenter:Sr},Oo={project:function(i){return new $(i.lng,i.lat)},unproject:function(i){return new ft(i.y,i.x)},bounds:new xt([-180,-90],[180,90])},Ao={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var s=Math.PI/180,r=this.R,u=i.lat*s,f=this.R_MINOR/r,m=Math.sqrt(1-f*f),g=m*Math.sin(u),x=Math.tan(Math.PI/4-u/2)/Math.pow((1-g)/(1+g),m/2);return u=-r*Math.log(Math.max(x,1e-10)),new $(i.lng*s*r,u)},unproject:function(i){for(var s=180/Math.PI,r=this.R,u=this.R_MINOR/r,f=Math.sqrt(1-u*u),m=Math.exp(-i.y/r),g=Math.PI/2-2*Math.atan(m),x=0,w=.1,S;x<15&&Math.abs(w)>1e-7;x++)S=f*Math.sin(g),S=Math.pow((1-S)/(1+S),f/2),w=Math.PI/2-2*Math.atan(m*S)-g,g+=w;return new ft(g*s,i.x*s/r)}},mc={__proto__:null,LonLat:Oo,Mercator:Ao,SphericalMercator:io},pc=a({},Ke,{code:"EPSG:3395",projection:Ao,transformation:function(){var i=.5/(Math.PI*Ao.R);return rn(i,.5,-i,.5)}()}),Cr=a({},Ke,{code:"EPSG:4326",projection:Oo,transformation:rn(1/180,1,-1/180,.5)}),vc=a({},Be,{projection:Oo,transformation:rn(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,s){var r=s.lng-i.lng,u=s.lat-i.lat;return Math.sqrt(r*r+u*u)},infinite:!0});Be.Earth=Ke,Be.EPSG3395=pc,Be.EPSG3857=so,Be.EPSG900913=bu,Be.EPSG4326=Cr,Be.Simple=vc;var de=an.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[d(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[d(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var s=i.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var r=this.getEvents();s.on(r,this),this.once("remove",function(){s.off(r,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var s=d(i);return this._layers[s]?this:(this._layers[s]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var s=d(i);return this._layers[s]?(this._loaded&&i.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return d(i)in this._layers},eachLayer:function(i,s){for(var r in this._layers)i.call(s,this._layers[r]);return this},_addLayers:function(i){i=i?B(i)?i:[i]:[];for(var s=0,r=i.length;s<r;s++)this.addLayer(i[s])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[d(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var s=d(i);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,s=-1/0,r=this._getZoomSpan();for(var u in this._zoomBoundLayers){var f=this._zoomBoundLayers[u].options;i=f.minZoom===void 0?i:Math.min(i,f.minZoom),s=f.maxZoom===void 0?s:Math.max(s,f.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=i===1/0?void 0:i,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zi=de.extend({initialize:function(i,s){P(this,s),this._layers={};var r,u;if(i)for(r=0,u=i.length;r<u;r++)this.addLayer(i[r])},addLayer:function(i){var s=this.getLayerId(i);return this._layers[s]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var s=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(i){var s=typeof i=="number"?i:this.getLayerId(i);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var s=Array.prototype.slice.call(arguments,1),r,u;for(r in this._layers)u=this._layers[r],u[i]&&u[i].apply(u,s);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,s){for(var r in this._layers)i.call(s,this._layers[r]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return d(i)}}),gc=function(i,s){return new zi(i,s)},Ne=zi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),zi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),zi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ut;for(var s in this._layers){var r=this._layers[s];i.extend(r.getBounds?r.getBounds():r.getLatLng())}return i}}),yc=function(i,s){return new Ne(i,s)},Ii=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){P(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,s){var r=this._getIconUrl(i);if(!r){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(r,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(u,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(i,s){var r=this.options,u=r[s+"Size"];typeof u=="number"&&(u=[u,u]);var f=G(u),m=G(s==="shadow"&&r.shadowAnchor||r.iconAnchor||f&&f.divideBy(2,!0));i.className="leaflet-marker-"+s+" "+(r.className||""),m&&(i.style.marginLeft=-m.x+"px",i.style.marginTop=-m.y+"px"),f&&(i.style.width=f.x+"px",i.style.height=f.y+"px")},_createImg:function(i,s){return s=s||document.createElement("img"),s.src=i,s},_getIconUrl:function(i){return Z.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function xc(i){return new Ii(i)}var vn=Ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof vn.imagePath!="string"&&(vn.imagePath=this._detectIconPath()),(this.options.imagePath||vn.imagePath)+Ii.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var s=function(r,u,f){var m=u.exec(r);return m&&m[f]};return i=s(i,/^url\((['"])?(.+)\1\)$/,2),i&&s(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=ot("div","leaflet-default-icon-path",document.body),s=un(i,"background-image")||un(i,"backgroundImage");if(document.body.removeChild(i),s=this._stripUrl(s),s)return s;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),Er=we.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Je(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),X(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var s=this._marker,r=s._map,u=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,m=fi(s._icon),g=r.getPixelBounds(),x=r.getPixelOrigin(),w=jt(g.min._subtract(x).add(f),g.max._subtract(x).subtract(f));if(!w.contains(m)){var S=G((Math.max(w.max.x,m.x)-w.max.x)/(g.max.x-w.max.x)-(Math.min(w.min.x,m.x)-w.min.x)/(g.min.x-w.min.x),(Math.max(w.max.y,m.y)-w.max.y)/(g.max.y-w.max.y)-(Math.min(w.min.y,m.y)-w.min.y)/(g.min.y-w.min.y)).multiplyBy(u);r.panBy(S,{animate:!1}),this._draggable._newPos._add(S),this._draggable._startPos._add(S),zt(s._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=ct(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(Ot(this._panRequest),this._panRequest=ct(this._adjustPan.bind(this,i)))},_onDrag:function(i){var s=this._marker,r=s._shadow,u=fi(s._icon),f=s._map.layerPointToLatLng(u);r&&zt(r,u),s._latlng=f,i.latlng=f,i.oldLatLng=this._oldLatLng,s.fire("move",i).fire("drag",i)},_onDragEnd:function(i){Ot(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),hs=de.extend({options:{icon:new vn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,s){P(this,s),this._latlng=it(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var s=this._latlng;return this._latlng=it(i),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=i.icon.createIcon(this._icon),u=!1;r!==this._icon&&(this._icon&&this._removeIcon(),u=!0,i.title&&(r.title=i.title),r.tagName==="IMG"&&(r.alt=i.alt||"")),X(r,s),i.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&V(r,"focus",this._panOnFocus,this);var f=i.icon.createShadow(this._shadow),m=!1;f!==this._shadow&&(this._removeShadow(),m=!0),f&&(X(f,s),f.alt=""),this._shadow=f,i.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&m&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),Mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&zt(this._icon,i),this._shadow&&zt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(X(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Er)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Er(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ne(this._icon,i),this._shadow&&ne(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var s=this.options.icon.options,r=s.iconSize?G(s.iconSize):G(0,0),u=s.iconAnchor?G(s.iconAnchor):G(0,0);i.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:r.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mc(i,s){return new hs(i,s)}var Xe=de.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return P(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ls=Xe.extend({options:{fill:!0,radius:10},initialize:function(i,s){P(this,s),this._latlng=it(i),this._radius=this.options.radius},setLatLng:function(i){var s=this._latlng;return this._latlng=it(i),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var s=i&&i.radius||this._radius;return Xe.prototype.setStyle.call(this,i),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,s=this._radiusY||i,r=this._clickTolerance(),u=[i+r,s+r];this._pxBounds=new xt(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wc(i,s){return new ls(i,s)}var zo=ls.extend({initialize:function(i,s,r){if(typeof s=="number"&&(s=a({},r,{radius:s})),P(this,s),this._latlng=it(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ut(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Xe.prototype.setStyle,_project:function(){var i=this._latlng.lng,s=this._latlng.lat,r=this._map,u=r.options.crs;if(u.distance===Ke.distance){var f=Math.PI/180,m=this._mRadius/Ke.R/f,g=r.project([s+m,i]),x=r.project([s-m,i]),w=g.add(x).divideBy(2),S=r.unproject(w).lat,z=Math.acos((Math.cos(m*f)-Math.sin(s*f)*Math.sin(S*f))/(Math.cos(s*f)*Math.cos(S*f)))/f;(isNaN(z)||z===0)&&(z=m/Math.cos(Math.PI/180*s)),this._point=w.subtract(r.getPixelOrigin()),this._radius=isNaN(z)?0:w.x-r.project([S,i-z]).x,this._radiusY=w.y-g.y}else{var F=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(F).x}this._updateBounds()}});function bc(i,s,r){return new zo(i,s,r)}var Ze=Xe.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,s){P(this,s),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var s=1/0,r=null,u=pn,f,m,g=0,x=this._parts.length;g<x;g++)for(var w=this._parts[g],S=1,z=w.length;S<z;S++){f=w[S-1],m=w[S];var F=u(i,f,m,!0);F<s&&(s=F,r=u(i,f,m))}return r&&(r.distance=Math.sqrt(s)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,s){return s=s||this._defaultShape(),i=it(i),s.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ut,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return se(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var s=[],r=se(i),u=0,f=i.length;u<f;u++)r?(s[u]=it(i[u]),this._bounds.extend(s[u])):s[u]=this._convertLatLngs(i[u]);return s},_project:function(){var i=new xt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),s=new $(i,i);this._rawPxBounds&&(this._pxBounds=new xt([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(i,s,r){var u=i[0]instanceof ft,f=i.length,m,g;if(u){for(g=[],m=0;m<f;m++)g[m]=this._map.latLngToLayerPoint(i[m]),r.extend(g[m]);s.push(g)}else for(m=0;m<f;m++)this._projectLatlngs(i[m],s,r)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,r,u,f,m,g,x,w;for(r=0,f=0,m=this._rings.length;r<m;r++)for(w=this._rings[r],u=0,g=w.length;u<g-1;u++)x=Lr(w[u],w[u+1],i,u,!0),x&&(s[f]=s[f]||[],s[f].push(x[0]),(x[1]!==w[u+1]||u===g-2)&&(s[f].push(x[1]),f++))}},_simplifyPoints:function(){for(var i=this._parts,s=this.options.smoothFactor,r=0,u=i.length;r<u;r++)i[r]=wr(i[r],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,s){var r,u,f,m,g,x,w=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(r=0,m=this._parts.length;r<m;r++)for(x=this._parts[r],u=0,g=x.length,f=g-1;u<g;f=u++)if(!(!s&&u===0)&&br(i,x[f],x[u])<=w)return!0;return!1}});function Pc(i,s){return new Ze(i,s)}Ze._flat=Tr;var ki=Ze.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var s=Ze.prototype._convertLatLngs.call(this,i),r=s.length;return r>=2&&s[0]instanceof ft&&s[0].equals(s[r-1])&&s.pop(),s},_setLatLngs:function(i){Ze.prototype._setLatLngs.call(this,i),se(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return se(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,s=this.options.weight,r=new $(s,s);if(i=new xt(i.min.subtract(r),i.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,f=this._rings.length,m;u<f;u++)m=xr(this._rings[u],i,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var s=!1,r,u,f,m,g,x,w,S;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(m=0,w=this._parts.length;m<w;m++)for(r=this._parts[m],g=0,S=r.length,x=S-1;g<S;x=g++)u=r[g],f=r[x],u.y>i.y!=f.y>i.y&&i.x<(f.x-u.x)*(i.y-u.y)/(f.y-u.y)+u.x&&(s=!s);return s||Ze.prototype._containsPoint.call(this,i,!0)}});function Lc(i,s){return new ki(i,s)}var Re=Ne.extend({initialize:function(i,s){P(this,s),this._layers={},i&&this.addData(i)},addData:function(i){var s=B(i)?i:i.features,r,u,f;if(s){for(r=0,u=s.length;r<u;r++)f=s[r],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var m=this.options;if(m.filter&&!m.filter(i))return this;var g=us(i,m);return g?(g.feature=ds(i),g.defaultOptions=g.options,this.resetStyle(g),m.onEachFeature&&m.onEachFeature(i,g),this.addLayer(g)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(s){this._setLayerStyle(s,i)},this)},_setLayerStyle:function(i,s){i.setStyle&&(typeof s=="function"&&(s=s(i.feature)),i.setStyle(s))}});function us(i,s){var r=i.type==="Feature"?i.geometry:i,u=r?r.coordinates:null,f=[],m=s&&s.pointToLayer,g=s&&s.coordsToLatLng||Io,x,w,S,z;if(!u&&!r)return null;switch(r.type){case"Point":return x=g(u),Or(m,i,x,s);case"MultiPoint":for(S=0,z=u.length;S<z;S++)x=g(u[S]),f.push(Or(m,i,x,s));return new Ne(f);case"LineString":case"MultiLineString":return w=cs(u,r.type==="LineString"?0:1,g),new Ze(w,s);case"Polygon":case"MultiPolygon":return w=cs(u,r.type==="Polygon"?1:2,g),new ki(w,s);case"GeometryCollection":for(S=0,z=r.geometries.length;S<z;S++){var F=us({geometry:r.geometries[S],type:"Feature",properties:i.properties},s);F&&f.push(F)}return new Ne(f);case"FeatureCollection":for(S=0,z=r.features.length;S<z;S++){var tt=us(r.features[S],s);tt&&f.push(tt)}return new Ne(f);default:throw new Error("Invalid GeoJSON object.")}}function Or(i,s,r,u){return i?i(s,r):new hs(r,u&&u.markersInheritOptions&&u)}function Io(i){return new ft(i[1],i[0],i[2])}function cs(i,s,r){for(var u=[],f=0,m=i.length,g;f<m;f++)g=s?cs(i[f],s-1,r):(r||Io)(i[f]),u.push(g);return u}function ko(i,s){return i=it(i),i.alt!==void 0?[y(i.lng,s),y(i.lat,s),y(i.alt,s)]:[y(i.lng,s),y(i.lat,s)]}function fs(i,s,r,u){for(var f=[],m=0,g=i.length;m<g;m++)f.push(s?fs(i[m],se(i[m])?0:s-1,r,u):ko(i[m],u));return!s&&r&&f.length>0&&f.push(f[0].slice()),f}function Bi(i,s){return i.feature?a({},i.feature,{geometry:s}):ds(s)}function ds(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Bo={toGeoJSON:function(i){return Bi(this,{type:"Point",coordinates:ko(this.getLatLng(),i)})}};hs.include(Bo),zo.include(Bo),ls.include(Bo),Ze.include({toGeoJSON:function(i){var s=!se(this._latlngs),r=fs(this._latlngs,s?1:0,!1,i);return Bi(this,{type:(s?"Multi":"")+"LineString",coordinates:r})}}),ki.include({toGeoJSON:function(i){var s=!se(this._latlngs),r=s&&!se(this._latlngs[0]),u=fs(this._latlngs,r?2:s?1:0,!0,i);return s||(u=[u]),Bi(this,{type:(r?"Multi":"")+"Polygon",coordinates:u})}}),zi.include({toMultiPoint:function(i){var s=[];return this.eachLayer(function(r){s.push(r.toGeoJSON(i).geometry.coordinates)}),Bi(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(i){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(i);var r=s==="GeometryCollection",u=[];return this.eachLayer(function(f){if(f.toGeoJSON){var m=f.toGeoJSON(i);if(r)u.push(m.geometry);else{var g=ds(m);g.type==="FeatureCollection"?u.push.apply(u,g.features):u.push(g)}}}),r?Bi(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function Ar(i,s){return new Re(i,s)}var Tc=Ar,_s=de.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,s,r){this._url=i,this._bounds=At(s),P(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(X(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Oi(this._image),this},bringToBack:function(){return this._map&&Ai(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=At(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",s=this._image=i?this._url:ot("img");if(X(s,"leaflet-image-layer"),this._zoomAnimated&&X(s,"leaflet-zoom-animated"),this.options.className&&X(s,this.options.className),s.onselectstart=p,s.onmousemove=p,s.onload=l(this.fire,this,"load"),s.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(i){var s=this._map.getZoomScale(i.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ci(this._image,r,s)},_reset:function(){var i=this._image,s=new xt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=s.getSize();zt(i,s.min),i.style.width=r.x+"px",i.style.height=r.y+"px"},_updateOpacity:function(){ne(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Sc=function(i,s,r){return new _s(i,s,r)},zr=_s.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",s=this._image=i?this._url:ot("video");if(X(s,"leaflet-image-layer"),this._zoomAnimated&&X(s,"leaflet-zoom-animated"),this.options.className&&X(s,this.options.className),s.onselectstart=p,s.onmousemove=p,s.onloadeddata=l(this.fire,this,"load"),i){for(var r=s.getElementsByTagName("source"),u=[],f=0;f<r.length;f++)u.push(r[f].src);this._url=r.length>0?u:[s.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var g=ot("source");g.src=this._url[m],s.appendChild(g)}}});function Cc(i,s,r){return new zr(i,s,r)}var Ir=_s.extend({_initImage:function(){var i=this._image=this._url;X(i,"leaflet-image-layer"),this._zoomAnimated&&X(i,"leaflet-zoom-animated"),this.options.className&&X(i,this.options.className),i.onselectstart=p,i.onmousemove=p}});function Ec(i,s,r){return new Ir(i,s,r)}var be=de.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,s){i&&(i instanceof ft||B(i))?(this._latlng=it(i),P(this,s)):(P(this,i),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ne(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ne(this._container,1),this.bringToFront(),this.options.interactive&&(X(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(ne(this._container,0),this._removeTimeout=setTimeout(l(Mt,void 0,this._container),200)):Mt(this._container),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=it(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Oi(this._container),this},bringToBack:function(){return this._map&&Ai(this._container),this},_prepareOpen:function(i){var s=this._source;if(!s._map)return!1;if(s instanceof Ne){s=null;var r=this._source._layers;for(var u in r)if(r[u]._map){s=r[u];break}if(!s)return!1;this._source=s}if(!i)if(s.getCenter)i=s.getCenter();else if(s.getLatLng)i=s.getLatLng();else if(s.getBounds)i=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")i.innerHTML=s;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),s=G(this.options.offset),r=this._getAnchor();this._zoomAnimated?zt(this._container,i.add(r)):s=s.add(i).add(r);var u=this._containerBottom=-s.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=u+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(i,s,r,u){var f=s;return f instanceof i||(f=new i(u).setContent(s)),r&&f.setLatLng(r),f}}),de.include({_initOverlay:function(i,s,r,u){var f=r;return f instanceof i?(P(f,u),f._source=this):(f=s&&!u?s:new i(u,this),f.setContent(r)),f}});var ms=be.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,be.prototype.openOn.call(this,i)},onAdd:function(i){be.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xe||this._source.on("preclick",di))},onRemove:function(i){be.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xe||this._source.off("preclick",di))},getEvents:function(){var i=be.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",s=this._container=ot("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=ot("div",i+"-content-wrapper",s);if(this._contentNode=ot("div",i+"-content",r),_n(s),Po(this._contentNode),V(s,"contextmenu",di),this._tipContainer=ot("div",i+"-tip-container",s),this._tip=ot("div",i+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=ot("a",i+"-close-button",s);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',V(u,"click",function(f){Rt(f),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,s=i.style;s.width="",s.whiteSpace="nowrap";var r=i.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),s.width=r+1+"px",s.whiteSpace="",s.height="";var u=i.offsetHeight,f=this.options.maxHeight,m="leaflet-popup-scrolled";f&&u>f?(s.height=f+"px",X(i,m)):Lt(i,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),r=this._getAnchor();zt(this._container,s.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,s=parseInt(un(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+s,u=this._containerWidth,f=new $(this._containerLeft,-r-this._containerBottom);f._add(fi(this._container));var m=i.layerPointToContainerPoint(f),g=G(this.options.autoPanPadding),x=G(this.options.autoPanPaddingTopLeft||g),w=G(this.options.autoPanPaddingBottomRight||g),S=i.getSize(),z=0,F=0;m.x+u+w.x>S.x&&(z=m.x+u-S.x+w.x),m.x-z-x.x<0&&(z=m.x-x.x),m.y+r+w.y>S.y&&(F=m.y+r-S.y+w.y),m.y-F-x.y<0&&(F=m.y-x.y),(z||F)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([z,F]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Oc=function(i,s){return new ms(i,s)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(i,s,r){return this._initOverlay(ms,i,s,r).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),de.include({bindPopup:function(i,s){return this._popup=this._initOverlay(ms,this._popup,i,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Ne||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){_i(i);var s=i.layer||i.target;if(this._popup._source===s&&!(s instanceof Xe)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=s,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ps=be.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){be.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){be.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=be.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",s=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ot("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var s,r,u=this._map,f=this._container,m=u.latLngToContainerPoint(u.getCenter()),g=u.layerPointToContainerPoint(i),x=this.options.direction,w=f.offsetWidth,S=f.offsetHeight,z=G(this.options.offset),F=this._getAnchor();x==="top"?(s=w/2,r=S):x==="bottom"?(s=w/2,r=0):x==="center"?(s=w/2,r=S/2):x==="right"?(s=0,r=S/2):x==="left"?(s=w,r=S/2):g.x<m.x?(x="right",s=0,r=S/2):(x="left",s=w+(z.x+F.x)*2,r=S/2),i=i.subtract(G(s,r,!0)).add(z).add(F),Lt(f,"leaflet-tooltip-right"),Lt(f,"leaflet-tooltip-left"),Lt(f,"leaflet-tooltip-top"),Lt(f,"leaflet-tooltip-bottom"),X(f,"leaflet-tooltip-"+x),zt(f,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ne(this._container,i)},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(s)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ac=function(i,s){return new ps(i,s)};nt.include({openTooltip:function(i,s,r){return this._initOverlay(ps,i,s,r).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),de.include({bindTooltip:function(i,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ps,this._tooltip,i,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var s=i?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[s](r),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Ne||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var s=typeof i.getElement=="function"&&i.getElement();s&&(V(s,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),V(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var s=typeof i.getElement=="function"&&i.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var s=i.latlng,r,u;this._tooltip.options.sticky&&i.originalEvent&&(r=this._map.mouseEventToContainerPoint(i.originalEvent),u=this._map.containerPointToLayerPoint(r),s=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(s)}});var kr=Ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var s=i&&i.tagName==="DIV"?i:document.createElement("div"),r=this.options;if(r.html instanceof Element?(is(s),s.appendChild(r.html)):s.innerHTML=r.html!==!1?r.html:"",r.bgPos){var u=G(r.bgPos);s.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function zc(i){return new kr(i)}Ii.Default=vn;var gn=de.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){P(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Mt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Oi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ai(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof $?i:new $(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var s=this.getPane().children,r=-i(-1/0,1/0),u=0,f=s.length,m;u<f;u++)m=s[u].style.zIndex,s[u]!==this._container&&m&&(r=i(r,+m));isFinite(r)&&(this.options.zIndex=r+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Z.ielt9){ne(this._container,this.options.opacity);var i=+new Date,s=!1,r=!1;for(var u in this._tiles){var f=this._tiles[u];if(!(!f.current||!f.loaded)){var m=Math.min(1,(i-f.loaded)/200);ne(f.el,m),m<1?s=!0:(f.active?r=!0:this._onOpaqueTile(f),f.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),s&&(Ot(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,s=this.options.maxZoom;if(i!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===i?(this._levels[r].el.style.zIndex=s-Math.abs(i-r),this._onUpdateLevel(r)):(Mt(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var u=this._levels[i],f=this._map;return u||(u=this._levels[i]={},u.el=ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=s,u.origin=f.project(f.unproject(f.getPixelOrigin()),i).round(),u.zoom=i,this._setZoomTransform(u,f.getCenter(),f.getZoom()),p(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var i,s,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)s=this._tiles[i],s.retain=s.current;for(i in this._tiles)if(s=this._tiles[i],s.current&&!s.active){var u=s.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var s in this._tiles)this._tiles[s].coords.z===i&&this._removeTile(s)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Mt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,s,r,u){var f=Math.floor(i/2),m=Math.floor(s/2),g=r-1,x=new $(+f,+m);x.z=+g;var w=this._tileCoordsToKey(x),S=this._tiles[w];return S&&S.active?(S.retain=!0,!0):(S&&S.loaded&&(S.retain=!0),g>u?this._retainParent(f,m,g,u):!1)},_retainChildren:function(i,s,r,u){for(var f=2*i;f<2*i+2;f++)for(var m=2*s;m<2*s+2;m++){var g=new $(f,m);g.z=r+1;var x=this._tileCoordsToKey(g),w=this._tiles[x];if(w&&w.active){w.retain=!0;continue}else w&&w.loaded&&(w.retain=!0);r+1<u&&this._retainChildren(f,m,r+1,u)}},_resetView:function(i){var s=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var s=this.options;return s.minNativeZoom!==void 0&&i<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<i?s.maxNativeZoom:i},_setView:function(i,s,r,u){var f=Math.round(s);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var m=this.options.updateWhenZooming&&f!==this._tileZoom;(!u||m)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(i),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(i,s)},_setZoomTransforms:function(i,s){for(var r in this._levels)this._setZoomTransform(this._levels[r],i,s)},_setZoomTransform:function(i,s,r){var u=this._map.getZoomScale(r,i.zoom),f=i.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(s,r)).round();Z.any3d?ci(i.el,f,u):zt(i.el,f)},_resetGrid:function(){var i=this._map,s=i.options.crs,r=this._tileSize=this.getTileSize(),u=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,s.wrapLng[0]],u).x/r.x),Math.ceil(i.project([0,s.wrapLng[1]],u).x/r.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([s.wrapLat[0],0],u).y/r.x),Math.ceil(i.project([s.wrapLat[1],0],u).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var s=this._map,r=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),u=s.getZoomScale(r,this._tileZoom),f=s.project(i,this._tileZoom).floor(),m=s.getSize().divideBy(u*2);return new xt(f.subtract(m),f.add(m))},_update:function(i){var s=this._map;if(s){var r=this._clampZoom(s.getZoom());if(i===void 0&&(i=s.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(i),f=this._pxBoundsToTileRange(u),m=f.getCenter(),g=[],x=this.options.keepBuffer,w=new xt(f.getBottomLeft().subtract([x,-x]),f.getTopRight().add([x,-x]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var S in this._tiles){var z=this._tiles[S].coords;(z.z!==this._tileZoom||!w.contains(new $(z.x,z.y)))&&(this._tiles[S].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(i,r);return}for(var F=f.min.y;F<=f.max.y;F++)for(var tt=f.min.x;tt<=f.max.x;tt++){var Wt=new $(tt,F);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var Bt=this._tiles[this._tileCoordsToKey(Wt)];Bt?Bt.current=!0:g.push(Wt)}}if(g.sort(function($t,Zi){return $t.distanceTo(m)-Zi.distanceTo(m)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var oe=document.createDocumentFragment();for(tt=0;tt<g.length;tt++)this._addTile(g[tt],oe);this._level.el.appendChild(oe)}}}},_isValidTile:function(i){var s=this._map.options.crs;if(!s.infinite){var r=this._globalTileRange;if(!s.wrapLng&&(i.x<r.min.x||i.x>r.max.x)||!s.wrapLat&&(i.y<r.min.y||i.y>r.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(i);return At(this.options.bounds).overlaps(u)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var s=this._map,r=this.getTileSize(),u=i.scaleBy(r),f=u.add(r),m=s.unproject(u,i.z),g=s.unproject(f,i.z);return[m,g]},_tileCoordsToBounds:function(i){var s=this._tileCoordsToNwSe(i),r=new Ut(s[0],s[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var s=i.split(":"),r=new $(+s[0],+s[1]);return r.z=+s[2],r},_removeTile:function(i){var s=this._tiles[i];s&&(Mt(s.el),delete this._tiles[i],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){X(i,"leaflet-tile");var s=this.getTileSize();i.style.width=s.x+"px",i.style.height=s.y+"px",i.onselectstart=p,i.onmousemove=p,Z.ielt9&&this.options.opacity<1&&ne(i,this.options.opacity)},_addTile:function(i,s){var r=this._getTilePos(i),u=this._tileCoordsToKey(i),f=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(f),this.createTile.length<2&&ct(l(this._tileReady,this,i,null,f)),zt(f,r),this._tiles[u]={el:f,coords:i,current:!0},s.appendChild(f),this.fire("tileloadstart",{tile:f,coords:i})},_tileReady:function(i,s,r){s&&this.fire("tileerror",{error:s,tile:r,coords:i});var u=this._tileCoordsToKey(i);r=this._tiles[u],r&&(r.loaded=+new Date,this._map._fadeAnimated?(ne(r.el,0),Ot(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),s||(X(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Z.ielt9||!this._map._fadeAnimated?ct(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var s=new $(this._wrapX?v(i.x,this._wrapX):i.x,this._wrapY?v(i.y,this._wrapY):i.y);return s.z=i.z,s},_pxBoundsToTileRange:function(i){var s=this.getTileSize();return new xt(i.min.unscaleBy(s).floor(),i.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Ic(i){return new gn(i)}var Ni=gn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,s){this._url=i,s=P(this,s),s.detectRetina&&Z.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,s){return this._url===i&&s===void 0&&(s=!0),this._url=i,s||this.redraw(),this},createTile:function(i,s){var r=document.createElement("img");return V(r,"load",l(this._tileOnLoad,this,s,r)),V(r,"error",l(this._tileOnError,this,s,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(i),r},getTileUrl:function(i){var s={r:Z.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-i.y;this.options.tms&&(s.y=r),s["-y"]=r}return k(this._url,a(s,this.options))},_tileOnLoad:function(i,s){Z.ielt9?setTimeout(l(i,this,null,s),0):i(null,s)},_tileOnError:function(i,s,r){var u=this.options.errorTileUrl;u&&s.getAttribute("src")!==u&&(s.src=u),i(r,s)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,s=this.options.maxZoom,r=this.options.zoomReverse,u=this.options.zoomOffset;return r&&(i=s-i),i+u},_getSubdomain:function(i){var s=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var i,s;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(s=this._tiles[i].el,s.onload=p,s.onerror=p,!s.complete)){s.src=W;var r=this._tiles[i].coords;Mt(s),delete this._tiles[i],this.fire("tileabort",{tile:s,coords:r})}},_removeTile:function(i){var s=this._tiles[i];if(s)return s.el.setAttribute("src",W),gn.prototype._removeTile.call(this,i)},_tileReady:function(i,s,r){if(!(!this._map||r&&r.getAttribute("src")===W))return gn.prototype._tileReady.call(this,i,s,r)}});function Br(i,s){return new Ni(i,s)}var Nr=Ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,s){this._url=i;var r=a({},this.defaultWmsParams);for(var u in s)u in this.options||(r[u]=s[u]);s=P(this,s);var f=s.detectRetina&&Z.retina?2:1,m=this.getTileSize();r.width=m.x*f,r.height=m.y*f,this.wmsParams=r},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Ni.prototype.onAdd.call(this,i)},getTileUrl:function(i){var s=this._tileCoordsToNwSe(i),r=this._crs,u=jt(r.project(s[0]),r.project(s[1])),f=u.min,m=u.max,g=(this._wmsVersion>=1.3&&this._crs===Cr?[f.y,f.x,m.y,m.x]:[f.x,f.y,m.x,m.y]).join(","),x=Ni.prototype.getTileUrl.call(this,i);return x+T(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(i,s){return a(this.wmsParams,i),s||this.redraw(),this}});function kc(i,s){return new Nr(i,s)}Ni.WMS=Nr,Br.wms=kc;var De=de.extend({options:{padding:.1},initialize:function(i){P(this,i),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),X(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,s){var r=this._map.getZoomScale(s,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,s),m=u.multiplyBy(-r).add(f).subtract(this._map._getNewPixelOrigin(i,s));Z.any3d?ci(this._container,m,r):zt(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,s=this._map.getSize(),r=this._map.containerPointToLayerPoint(s.multiplyBy(-i)).round();this._bounds=new xt(r,r.add(s.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zr=De.extend({options:{tolerance:0},getEvents:function(){var i=De.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){De.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");V(i,"mousemove",this._onMouseMove,this),V(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),V(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){Ot(this._redrawRequest),delete this._ctx,Mt(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var s in this._layers)i=this._layers[s],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){De.prototype._update.call(this);var i=this._bounds,s=this._container,r=i.getSize(),u=Z.retina?2:1;zt(s,i.min),s.width=u*r.x,s.height=u*r.y,s.style.width=r.x+"px",s.style.height=r.y+"px",Z.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){De.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[d(i)]=i;var s=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var s=i._order,r=s.next,u=s.prev;r?r.prev=u:this._drawLast=u,u?u.next=r:this._drawFirst=r,delete i._order,delete this._layers[d(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var s=i.options.dashArray.split(/[, ]+/),r=[],u,f;for(f=0;f<s.length;f++){if(u=Number(s[f]),isNaN(u))return;r.push(u)}i.options._dashArray=r}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||ct(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var s=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xt,this._redrawBounds.extend(i._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(i._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var s=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,s=this._redrawBounds;if(this._ctx.save(),s){var r=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)i=u.layer,(!s||i._pxBounds&&i._pxBounds.intersects(s))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,s){if(this._drawing){var r,u,f,m,g=i._parts,x=g.length,w=this._ctx;if(x){for(w.beginPath(),r=0;r<x;r++){for(u=0,f=g[r].length;u<f;u++)m=g[r][u],w[u?"lineTo":"moveTo"](m.x,m.y);s&&w.closePath()}this._fillStroke(w,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var s=i._point,r=this._ctx,u=Math.max(Math.round(i._radius),1),f=(Math.max(Math.round(i._radiusY),1)||u)/u;f!==1&&(r.save(),r.scale(1,f)),r.beginPath(),r.arc(s.x,s.y/f,u,0,Math.PI*2,!1),f!==1&&r.restore(),this._fillStroke(r,i)}},_fillStroke:function(i,s){var r=s.options;r.fill&&(i.globalAlpha=r.fillOpacity,i.fillStyle=r.fillColor||r.color,i.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(i.setLineDash&&i.setLineDash(s.options&&s.options._dashArray||[]),i.globalAlpha=r.opacity,i.lineWidth=r.weight,i.strokeStyle=r.color,i.lineCap=r.lineCap,i.lineJoin=r.lineJoin,i.stroke())},_onClick:function(i){for(var s=this._map.mouseEventToLayerPoint(i),r,u,f=this._drawFirst;f;f=f.next)r=f.layer,r.options.interactive&&r._containsPoint(s)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(r))&&(u=r);this._fireEvent(u?[u]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,s)}},_handleMouseOut:function(i){var s=this._hoveredLayer;s&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([s],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,s){if(!this._mouseHoverThrottled){for(var r,u,f=this._drawFirst;f;f=f.next)r=f.layer,r.options.interactive&&r._containsPoint(s)&&(u=r);u!==this._hoveredLayer&&(this._handleMouseOut(i),u&&(X(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,s,r){this._map._fireDOMEvent(s,r||s.type,i)},_bringToFront:function(i){var s=i._order;if(s){var r=s.next,u=s.prev;if(r)r.prev=u;else return;u?u.next=r:r&&(this._drawFirst=r),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(i)}},_bringToBack:function(i){var s=i._order;if(s){var r=s.next,u=s.prev;if(u)u.next=r;else return;r?r.prev=u:u&&(this._drawLast=u),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(i)}}});function Rr(i){return Z.canvas?new Zr(i):null}var yn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Bc={_initContainer:function(){this._container=ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(De.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var s=i._container=yn("shape");X(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",i._path=yn("path"),s.appendChild(i._path),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){var s=i._container;this._container.appendChild(s),i.options.interactive&&i.addInteractiveTarget(s)},_removePath:function(i){var s=i._container;Mt(s),i.removeInteractiveTarget(s),delete this._layers[d(i)]},_updateStyle:function(i){var s=i._stroke,r=i._fill,u=i.options,f=i._container;f.stroked=!!u.stroke,f.filled=!!u.fill,u.stroke?(s||(s=i._stroke=yn("stroke")),f.appendChild(s),s.weight=u.weight+"px",s.color=u.color,s.opacity=u.opacity,u.dashArray?s.dashStyle=B(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=u.lineCap.replace("butt","flat"),s.joinstyle=u.lineJoin):s&&(f.removeChild(s),i._stroke=null),u.fill?(r||(r=i._fill=yn("fill")),f.appendChild(r),r.color=u.fillColor||u.color,r.opacity=u.fillOpacity):r&&(f.removeChild(r),i._fill=null)},_updateCircle:function(i){var s=i._point.round(),r=Math.round(i._radius),u=Math.round(i._radiusY||r);this._setPath(i,i._empty()?"M0 0":"AL "+s.x+","+s.y+" "+r+","+u+" 0,"+65535*360)},_setPath:function(i,s){i._path.v=s},_bringToFront:function(i){Oi(i._container)},_bringToBack:function(i){Ai(i._container)}},vs=Z.vml?yn:Wa,xn=De.extend({_initContainer:function(){this._container=vs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mt(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){De.prototype._update.call(this);var i=this._bounds,s=i.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,r.setAttribute("width",s.x),r.setAttribute("height",s.y)),zt(r,i.min),r.setAttribute("viewBox",[i.min.x,i.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(i){var s=i._path=vs("path");i.options.className&&X(s,i.options.className),i.options.interactive&&X(s,"leaflet-interactive"),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Mt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[d(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var s=i._path,r=i.options;s&&(r.stroke?(s.setAttribute("stroke",r.color),s.setAttribute("stroke-opacity",r.opacity),s.setAttribute("stroke-width",r.weight),s.setAttribute("stroke-linecap",r.lineCap),s.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?s.setAttribute("stroke-dasharray",r.dashArray):s.removeAttribute("stroke-dasharray"),r.dashOffset?s.setAttribute("stroke-dashoffset",r.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),r.fill?(s.setAttribute("fill",r.fillColor||r.color),s.setAttribute("fill-opacity",r.fillOpacity),s.setAttribute("fill-rule",r.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(i,s){this._setPath(i,Ha(i._parts,s))},_updateCircle:function(i){var s=i._point,r=Math.max(Math.round(i._radius),1),u=Math.max(Math.round(i._radiusY),1)||r,f="a"+r+","+u+" 0 1,0 ",m=i._empty()?"M0 0":"M"+(s.x-r)+","+s.y+f+r*2+",0 "+f+-r*2+",0 ";this._setPath(i,m)},_setPath:function(i,s){i._path.setAttribute("d",s)},_bringToFront:function(i){Oi(i._path)},_bringToBack:function(i){Ai(i._path)}});Z.vml&&xn.include(Bc);function Dr(i){return Z.svg||Z.vml?new xn(i):null}nt.include({getRenderer:function(i){var s=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var s=this._paneRenderers[i];return s===void 0&&(s=this._createRenderer({pane:i}),this._paneRenderers[i]=s),s},_createRenderer:function(i){return this.options.preferCanvas&&Rr(i)||Dr(i)}});var Fr=ki.extend({initialize:function(i,s){ki.prototype.initialize.call(this,this._boundsToLatLngs(i),s)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=At(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Nc(i,s){return new Fr(i,s)}xn.create=vs,xn.pointsToPath=Ha,Re.geometryToLayer=us,Re.coordsToLatLng=Io,Re.coordsToLatLngs=cs,Re.latLngToCoords=ko,Re.latLngsToCoords=fs,Re.getFeature=Bi,Re.asFeature=ds,nt.mergeOptions({boxZoom:!0});var qr=we.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){V(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cn(),po(),this._startPoint=this._map.mouseEventToContainerPoint(i),V(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ot("div","leaflet-zoom-box",this._container),X(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var s=new xt(this._point,this._startPoint),r=s.getSize();zt(this._box,s.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(Mt(this._box),Lt(this._container,"leaflet-crosshair")),fn(),vo(),mt(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var s=new Ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",qr),nt.mergeOptions({doubleClickZoom:!0});var Wr=we.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var s=this._map,r=s.getZoom(),u=s.options.zoomDelta,f=i.originalEvent.shiftKey?r-u:r+u;s.options.doubleClickZoom==="center"?s.setZoom(f):s.setZoomAround(i.containerPoint,f)}});nt.addInitHook("addHandler","doubleClickZoom",Wr),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Hr=we.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Je(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}X(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lt(this._map._container,"leaflet-grab"),Lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=At(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var s=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(s),this._prunePositions(s)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,s){return i-(i-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;i.x<s.min.x&&(i.x=this._viscousLimit(i.x,s.min.x)),i.y<s.min.y&&(i.y=this._viscousLimit(i.y,s.min.y)),i.x>s.max.x&&(i.x=this._viscousLimit(i.x,s.max.x)),i.y>s.max.y&&(i.y=this._viscousLimit(i.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,s=Math.round(i/2),r=this._initialWorldOffset,u=this._draggable._newPos.x,f=(u-s+r)%i+s-r,m=(u+s+r)%i-s-r,g=Math.abs(f+r)<Math.abs(m+r)?f:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(i){var s=this._map,r=s.options,u=!r.inertia||i.noInertia||this._times.length<2;if(s.fire("dragend",i),u)s.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,g=r.easeLinearity,x=f.multiplyBy(g/m),w=x.distanceTo([0,0]),S=Math.min(r.inertiaMaxSpeed,w),z=x.multiplyBy(S/w),F=S/(r.inertiaDeceleration*g),tt=z.multiplyBy(-F/2).round();!tt.x&&!tt.y?s.fire("moveend"):(tt=s._limitOffset(tt,s.options.maxBounds),ct(function(){s.panBy(tt,{duration:F,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",Hr),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gr=we.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),V(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,s=document.documentElement,r=i.scrollTop||s.scrollTop,u=i.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(u,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var s=this._panKeys={},r=this.keyCodes,u,f;for(u=0,f=r.left.length;u<f;u++)s[r.left[u]]=[-1*i,0];for(u=0,f=r.right.length;u<f;u++)s[r.right[u]]=[i,0];for(u=0,f=r.down.length;u<f;u++)s[r.down[u]]=[0,i];for(u=0,f=r.up.length;u<f;u++)s[r.up[u]]=[0,-1*i]},_setZoomDelta:function(i){var s=this._zoomKeys={},r=this.keyCodes,u,f;for(u=0,f=r.zoomIn.length;u<f;u++)s[r.zoomIn[u]]=i;for(u=0,f=r.zoomOut.length;u<f;u++)s[r.zoomOut[u]]=-i},_addHooks:function(){V(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var s=i.keyCode,r=this._map,u;if(s in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(u=this._panKeys[s],i.shiftKey&&(u=G(u).multiplyBy(3)),r.options.maxBounds&&(u=r._limitOffset(G(u),r.options.maxBounds)),r.options.worldCopyJump){var f=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(u)));r.panTo(f)}else r.panBy(u)}else if(s in this._zoomKeys)r.setZoom(r.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;_i(i)}}});nt.addInitHook("addHandler","keyboard",Gr),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var jr=we.extend({addHooks:function(){V(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var s=mr(i),r=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var u=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),u),_i(i)},_performZoom:function(){var i=this._map,s=i.getZoom(),r=this._map.options.zoomSnap||0;i._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,m=r?Math.ceil(f/r)*r:f,g=i._limitZoom(s+(this._delta>0?m:-m))-s;this._delta=0,this._startTime=null,g&&(i.options.scrollWheelZoom==="center"?i.setZoom(s+g):i.setZoomAround(this._lastMousePos,s+g))}});nt.addInitHook("addHandler","scrollWheelZoom",jr);var Zc=600;nt.mergeOptions({tapHold:Z.touchNative&&Z.safari&&Z.mobile,tapTolerance:15});var Ur=we.extend({addHooks:function(){V(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var s=i.touches[0];this._startPos=this._newPos=new $(s.clientX,s.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(V(document,"touchend",Rt),V(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Zc),V(document,"touchend touchcancel contextmenu",this._cancel,this),V(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){mt(document,"touchend",Rt),mt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(i){var s=i.touches[0];this._newPos=new $(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,s){var r=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});r._simulated=!0,s.target.dispatchEvent(r)}});nt.addInitHook("addHandler","tapHold",Ur),nt.mergeOptions({touchZoom:Z.touch,bounceAtZoomLimits:!0});var $r=we.extend({addHooks:function(){X(this._map._container,"leaflet-touch-zoom"),V(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var s=this._map;if(!(!i.touches||i.touches.length!==2||s._animatingZoom||this._zooming)){var r=s.mouseEventToContainerPoint(i.touches[0]),u=s.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(r.add(u)._divideBy(2))),this._startDist=r.distanceTo(u),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),V(document,"touchmove",this._onTouchMove,this),V(document,"touchend touchcancel",this._onTouchEnd,this),Rt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var s=this._map,r=s.mouseEventToContainerPoint(i.touches[0]),u=s.mouseEventToContainerPoint(i.touches[1]),f=r.distanceTo(u)/this._startDist;if(this._zoom=s.getScaleZoom(f,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&f<1||this._zoom>s.getMaxZoom()&&f>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var m=r._add(u)._divideBy(2)._subtract(this._centerPoint);if(f===1&&m.x===0&&m.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Ot(this._animRequest);var g=l(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ct(g,this,!0),Rt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ot(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",$r),nt.BoxZoom=qr,nt.DoubleClickZoom=Wr,nt.Drag=Hr,nt.Keyboard=Gr,nt.ScrollWheelZoom=jr,nt.TapHold=Ur,nt.TouchZoom=$r,n.Bounds=xt,n.Browser=Z,n.CRS=Be,n.Canvas=Zr,n.Circle=zo,n.CircleMarker=ls,n.Class=ie,n.Control=fe,n.DivIcon=kr,n.DivOverlay=be,n.DomEvent=ec,n.DomUtil=Qu,n.Draggable=Je,n.Evented=an,n.FeatureGroup=Ne,n.GeoJSON=Re,n.GridLayer=gn,n.Handler=we,n.Icon=Ii,n.ImageOverlay=_s,n.LatLng=ft,n.LatLngBounds=Ut,n.Layer=de,n.LayerGroup=zi,n.LineUtil=_c,n.Map=nt,n.Marker=hs,n.Mixin=hc,n.Path=Xe,n.Point=$,n.PolyUtil=lc,n.Polygon=ki,n.Polyline=Ze,n.Popup=ms,n.PosAnimation=pr,n.Projection=mc,n.Rectangle=Fr,n.Renderer=De,n.SVG=xn,n.SVGOverlay=Ir,n.TileLayer=Ni,n.Tooltip=ps,n.Transformation=no,n.Util=ui,n.VideoOverlay=zr,n.bind=l,n.bounds=jt,n.canvas=Rr,n.circle=bc,n.circleMarker=wc,n.control=mn,n.divIcon=zc,n.extend=a,n.featureGroup=yc,n.geoJSON=Ar,n.geoJson=Tc,n.gridLayer=Ic,n.icon=xc,n.imageOverlay=Sc,n.latLng=it,n.latLngBounds=At,n.layerGroup=gc,n.map=ic,n.marker=Mc,n.point=G,n.polygon=Lc,n.polyline=Pc,n.popup=Oc,n.rectangle=Nc,n.setOptions=P,n.stamp=d,n.svg=Dr,n.svgOverlay=Ec,n.tileLayer=Br,n.tooltip=Ac,n.transformation=rn,n.version=o,n.videoOverlay=Cc;var Rc=window.L;n.noConflict=function(){return window.L=Rc,this},window.L=n})}(ws,ws.exports)),ws.exports}var Di=Ql();const t_=Jc(Di),e_=rf({__proto__:null,default:t_},[Di]);var i_={exports:{}};function n_(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var bi=1,Pi=2,Ui=3,s_=4,Yo=5,mh=6378137,o_=6356752314e-3,ph=.0066943799901413165,zn=484813681109536e-20,C=Math.PI/2,a_=.16666666666666666,r_=.04722222222222222,h_=.022156084656084655,O=1e-10,Dt=.017453292519943295,Ce=57.29577951308232,lt=Math.PI/4,Zn=Math.PI*2,Tt=3.14159265359,Yt={};Yt.greenwich=0;Yt.lisbon=-9.131906111111;Yt.paris=2.337229166667;Yt.bogota=-74.080916666667;Yt.madrid=-3.687938888889;Yt.rome=12.452333333333;Yt.bern=7.439583333333;Yt.jakarta=106.807719444444;Yt.ferro=-17.666666666667;Yt.brussels=4.367975;Yt.stockholm=18.058277777778;Yt.athens=23.7163375;Yt.oslo=10.722916666667;const l_={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var vh=/[\s_\-\/\(\)]/g;function ni(t,e){if(t[e])return t[e];for(var n=Object.keys(t),o=e.toLowerCase().replace(vh,""),a=-1,h,l;++a<n.length;)if(h=n[a],l=h.toLowerCase().replace(vh,""),l===o)return t[h]}function Qo(t){var e={},n=t.split("+").map(function(c){return c.trim()}).filter(function(c){return c}).reduce(function(c,d){var _=d.split("=");return _.push(!0),c[_[0].toLowerCase()]=_[1],c},{}),o,a,h,l={proj:"projName",datum:"datumCode",rf:function(c){e.rf=parseFloat(c)},lat_0:function(c){e.lat0=c*Dt},lat_1:function(c){e.lat1=c*Dt},lat_2:function(c){e.lat2=c*Dt},lat_ts:function(c){e.lat_ts=c*Dt},lon_0:function(c){e.long0=c*Dt},lon_1:function(c){e.long1=c*Dt},lon_2:function(c){e.long2=c*Dt},alpha:function(c){e.alpha=parseFloat(c)*Dt},gamma:function(c){e.rectified_grid_angle=parseFloat(c)},lonc:function(c){e.longc=c*Dt},x_0:function(c){e.x0=parseFloat(c)},y_0:function(c){e.y0=parseFloat(c)},k_0:function(c){e.k0=parseFloat(c)},k:function(c){e.k0=parseFloat(c)},a:function(c){e.a=parseFloat(c)},b:function(c){e.b=parseFloat(c)},r_a:function(){e.R_A=!0},zone:function(c){e.zone=parseInt(c,10)},south:function(){e.utmSouth=!0},towgs84:function(c){e.datum_params=c.split(",").map(function(d){return parseFloat(d)})},to_meter:function(c){e.to_meter=parseFloat(c)},units:function(c){e.units=c;var d=ni(l_,c);d&&(e.to_meter=d.to_meter)},from_greenwich:function(c){e.from_greenwich=c*Dt},pm:function(c){var d=ni(Yt,c);e.from_greenwich=(d||parseFloat(c))*Dt},nadgrids:function(c){c==="@null"?e.datumCode="none":e.nadgrids=c},axis:function(c){var d="ewnsud";c.length===3&&d.indexOf(c.substr(0,1))!==-1&&d.indexOf(c.substr(1,1))!==-1&&d.indexOf(c.substr(2,1))!==-1&&(e.axis=c)},approx:function(){e.approx=!0}};for(o in n)a=n[o],o in l?(h=l[o],typeof h=="function"?h(a):e[h]=a):e[o]=a;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Rn=1,tu=2,eu=3,Rs=4,iu=5,Ba=-1,u_=/\s/,c_=/[A-Za-z]/,f_=/[A-Za-z84_]/,Qs=/[,\]]/,nu=/[\d\.E\-\+]/;function Ve(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Rn}Ve.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Rs)for(;u_.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Rn:return this.neutral(t);case tu:return this.keyword(t);case Rs:return this.quoted(t);case iu:return this.afterquote(t);case eu:return this.number(t);case Ba:return}};Ve.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Rs;return}if(Qs.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Ve.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Rn;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Rn,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Ba);return}};Ve.prototype.number=function(t){if(nu.test(t)){this.word+=t;return}if(Qs.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Ve.prototype.quoted=function(t){if(t==='"'){this.state=iu;return}this.word+=t};Ve.prototype.keyword=function(t){if(f_.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Rn;return}if(Qs.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Ve.prototype.neutral=function(t){if(c_.test(t)){this.word=t,this.state=tu;return}if(t==='"'){this.word="",this.state=Rs;return}if(nu.test(t)){this.word=t,this.state=eu;return}if(Qs.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Ve.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ba)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function d_(t){var e=new Ve(t);return e.output()}function gh(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var o=e?{}:t,a=n.reduce(function(h,l){return Fi(l,h),h},o);e&&(t[e]=a)}function Fi(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Fi(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var o;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Fi(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Fi(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],gh(e,n,t);return;default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return Fi(t,e[n]);return gh(e,n,t)}}var __=.017453292519943295;function m_(t,e){var n=e[0],o=e[1];!(n in t)&&o in t&&(t[n]=t[o],e.length===3&&(t[n]=e[2](t[n])))}function Pe(t){return t*__}function p_(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,o=t.AXIS.length;n<o;++n){var a=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?e+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?e+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?e+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var h=t.GEOGCS;t.type==="GEOGCS"&&(h=t),h&&(h.DATUM?t.datumCode=h.DATUM.name.toLowerCase():t.datumCode=h.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(t.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=h.DATUM.SPHEROID.a,t.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(t.datum_params=h.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function l(_){var v=t.to_meter||1;return _*v}var c=function(_){return m_(t,_)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Pe],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Pe],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",Pe],["lat0","latitude_of_origin",Pe],["lat0","standard_parallel_1",Pe],["lat1","standard_parallel_1",Pe],["lat2","standard_parallel_2",Pe],["azimuth","Azimuth"],["alpha","azimuth",Pe],["srsCode","name"]];d.forEach(c),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Pe(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Pe(t.lat0>0?90:-90))}function su(t){var e=d_(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var a={};return Fi(e,a),p_(a),a}function Ht(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Ht[t]=Qo(arguments[1]):Ht[t]=su(arguments[1]):Ht[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(o){Array.isArray(o)?Ht.apply(e,o):Ht(o)});if(typeof t=="string"){if(t in Ht)return Ht[t]}else"EPSG"in t?Ht["EPSG:"+t.EPSG]=t:"ESRI"in t?Ht["ESRI:"+t.ESRI]=t:"IAU2000"in t?Ht["IAU2000:"+t.IAU2000]=t:console.log(t);return}}n_(Ht);function v_(t){return typeof t=="string"}function g_(t){return t in Ht}var y_=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function x_(t){return y_.some(function(e){return t.indexOf(e)>-1})}var M_=["3857","900913","3785","102113"];function w_(t){var e=ni(t,"authority");if(e){var n=ni(e,"epsg");return n&&M_.indexOf(n)>-1}}function b_(t){var e=ni(t,"extension");if(e)return ni(e,"proj4")}function P_(t){return t[0]==="+"}function L_(t){if(v_(t)){if(g_(t))return Ht[t];if(x_(t)){var e=su(t);if(w_(e))return Ht["EPSG:3857"];var n=b_(e);return n?Qo(n):e}if(P_(t))return Qo(t)}else return t}function yh(t,e){t=t||{};var n,o;if(!e)return t;for(o in e)n=e[o],n!==void 0&&(t[o]=n);return t}function Ie(t,e,n){var o=t*e;return n/Math.sqrt(1-o*o)}function Kn(t){return t<0?-1:1}function N(t){return Math.abs(t)<=Tt?t:t-Kn(t)*Zn}function pe(t,e,n){var o=t*n,a=.5*t;return o=Math.pow((1-o)/(1+o),a),Math.tan(.5*(C-e))/o}function Dn(t,e){for(var n=.5*t,o,a,h=C-2*Math.atan(e),l=0;l<=15;l++)if(o=t*Math.sin(h),a=C-2*Math.atan(e*Math.pow((1-o)/(1+o),n))-h,h+=a,Math.abs(a)<=1e-10)return h;return-9999}function T_(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ie(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function S_(t){var e=t.x,n=t.y;if(n*Ce>90&&n*Ce<-90&&e*Ce>180&&e*Ce<-180)return null;var o,a;if(Math.abs(Math.abs(n)-C)<=O)return null;if(this.sphere)o=this.x0+this.a*this.k0*N(e-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(lt+.5*n));else{var h=Math.sin(n),l=pe(this.e,n,h);o=this.x0+this.a*this.k0*N(e-this.long0),a=this.y0-this.a*this.k0*Math.log(l)}return t.x=o,t.y=a,t}function C_(t){var e=t.x-this.x0,n=t.y-this.y0,o,a;if(this.sphere)a=C-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var h=Math.exp(-n/(this.a*this.k0));if(a=Dn(this.e,h),a===-9999)return null}return o=N(this.long0+e/(this.a*this.k0)),t.x=o,t.y=a,t}var E_=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const O_={init:T_,forward:S_,inverse:C_,names:E_};function A_(){}function xh(t){return t}var z_=["longlat","identity"];const I_={init:A_,forward:xh,inverse:xh,names:z_};var k_=[O_,I_],Es={},Ds=[];function ou(t,e){var n=Ds.length;return t.names?(Ds[n]=t,t.names.forEach(function(o){Es[o.toLowerCase()]=n}),this):(console.log(e),!0)}function B_(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Es[e]<"u"&&Ds[Es[e]])return Ds[Es[e]]}function N_(){k_.forEach(ou)}const Z_={start:N_,add:ou,get:B_};var H={};H.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};H.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};H.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};H.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};H.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};H.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};H.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};H.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};H.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};H.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};H.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};H.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};H.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};H.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};H.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};H.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};H.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};H.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};H.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};H.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};H.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};H.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};H.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};H.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};H.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};H.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};H.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};H.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};H.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};H.hough={a:6378270,rf:297,ellipseName:"Hough"};H.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};H.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};H.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};H.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};H.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};H.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};H.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};H.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};H.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};H.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};H.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};H.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var R_=H.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};H.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function D_(t,e,n,o){var a=t*t,h=e*e,l=(a-h)/a,c=0;o?(t*=1-l*(a_+l*(r_+l*h_)),a=t*t,l=0):c=Math.sqrt(l);var d=(a-h)/h;return{es:l,e:c,ep2:d}}function F_(t,e,n,o,a){if(!t){var h=ni(H,o);h||(h=R_),t=h.a,e=h.b,n=h.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<O)&&(a=!0,e=t),{a:t,b:e,rf:n,sphere:a}}var Zt={};Zt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Zt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Zt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Zt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Zt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Zt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Zt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Zt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Zt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Zt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Zt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Zt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Zt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Zt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Zt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Zt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Zt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function q_(t,e,n,o,a,h,l){var c={};return t===void 0||t==="none"?c.datum_type=Yo:c.datum_type=s_,e&&(c.datum_params=e.map(parseFloat),(c.datum_params[0]!==0||c.datum_params[1]!==0||c.datum_params[2]!==0)&&(c.datum_type=bi),c.datum_params.length>3&&(c.datum_params[3]!==0||c.datum_params[4]!==0||c.datum_params[5]!==0||c.datum_params[6]!==0)&&(c.datum_type=Pi,c.datum_params[3]*=zn,c.datum_params[4]*=zn,c.datum_params[5]*=zn,c.datum_params[6]=c.datum_params[6]/1e6+1)),l&&(c.datum_type=Ui,c.grids=l),c.a=n,c.b=o,c.es=a,c.ep2=h,c}var au={};function W_(t,e){var n=new DataView(e),o=j_(n),a=U_(n,o);a.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var h=$_(n,a,o),l={header:a,subgrids:h};return au[t]=l,l}function H_(t){if(t===void 0)return null;var e=t.split(",");return e.map(G_)}function G_(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:au[t]||null,isNull:!1}}function qi(t){return t/3600*Math.PI/180}function j_(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function U_(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ta(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function ta(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function $_(t,e,n){for(var o=176,a=[],h=0;h<e.nSubgrids;h++){var l=K_(t,o,n),c=J_(t,o,l,n),d=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),_=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);a.push({ll:[qi(l.lowerLongitude),qi(l.lowerLatitude)],del:[qi(l.longitudeInterval),qi(l.latitudeInterval)],lim:[d,_],count:l.gridNodeCount,cvs:V_(c)})}return a}function V_(t){return t.map(function(e){return[qi(e.longitudeShift),qi(e.latitudeShift)]})}function K_(t,e,n){return{name:ta(t,e+8,e+16).trim(),parent:ta(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function J_(t,e,n,o){for(var a=e+176,h=16,l=[],c=0;c<n.gridNodeCount;c++){var d={latitudeShift:t.getFloat32(a+c*h,o),longitudeShift:t.getFloat32(a+c*h+4,o),latitudeAccuracy:t.getFloat32(a+c*h+8,o),longitudeAccuracy:t.getFloat32(a+c*h+12,o)};l.push(d)}return l}function Oe(t,e){if(!(this instanceof Oe))return new Oe(t);e=e||function(_){if(_)throw _};var n=L_(t);if(typeof n!="object"){e(t);return}var o=Oe.projections.get(n.projName);if(!o){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var a=ni(Zt,n.datumCode);a&&(n.datum_params=n.datum_params||(a.towgs84?a.towgs84.split(","):null),n.ellps=a.ellipse,n.datumName=a.datumName?a.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var h=F_(n.a,n.b,n.rf,n.ellps,n.sphere),l=D_(h.a,h.b,h.rf,n.R_A),c=H_(n.nadgrids),d=n.datum||q_(n.datumCode,n.datum_params,h.a,h.b,l.es,l.ep2,c);yh(this,n),yh(this,o),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=d,this.init(),e(null,this)}Oe.projections=Z_;Oe.projections.start();function X_(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===bi?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Pi?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function ru(t,e,n){var o=t.x,a=t.y,h=t.z?t.z:0,l,c,d,_;if(a<-C&&a>-1.001*C)a=-C;else if(a>C&&a<1.001*C)a=C;else{if(a<-C)return{x:-1/0,y:-1/0,z:t.z};if(a>C)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),c=Math.sin(a),_=Math.cos(a),d=c*c,l=n/Math.sqrt(1-e*d),{x:(l+h)*_*Math.cos(o),y:(l+h)*_*Math.sin(o),z:(l*(1-e)+h)*c}}function hu(t,e,n,o){var a=1e-12,h=a*a,l=30,c,d,_,v,p,y,M,b,P,T,E,k,B,U=t.x,W=t.y,q=t.z?t.z:0,D,I,A;if(c=Math.sqrt(U*U+W*W),d=Math.sqrt(U*U+W*W+q*q),c/n<a){if(D=0,d/n<a)return I=C,A=-o,{x:t.x,y:t.y,z:t.z}}else D=Math.atan2(W,U);_=q/d,v=c/d,p=1/Math.sqrt(1-e*(2-e)*v*v),b=v*(1-e)*p,P=_*p,B=0;do B++,M=n/Math.sqrt(1-e*P*P),A=c*b+q*P-M*(1-e*P*P),y=e*M/(M+A),p=1/Math.sqrt(1-y*(2-y)*v*v),T=v*(1-y)*p,E=_*p,k=E*b-T*P,b=T,P=E;while(k*k>h&&B<l);return I=Math.atan(E/Math.abs(T)),{x:D,y:I,z:A}}function Y_(t,e,n){if(e===bi)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Pi){var o=n[0],a=n[1],h=n[2],l=n[3],c=n[4],d=n[5],_=n[6];return{x:_*(t.x-d*t.y+c*t.z)+o,y:_*(d*t.x+t.y-l*t.z)+a,z:_*(-c*t.x+l*t.y+t.z)+h}}}function Q_(t,e,n){if(e===bi)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Pi){var o=n[0],a=n[1],h=n[2],l=n[3],c=n[4],d=n[5],_=n[6],v=(t.x-o)/_,p=(t.y-a)/_,y=(t.z-h)/_;return{x:v+d*p-c*y,y:-d*v+p+l*y,z:c*v-l*p+y}}}function bs(t){return t===bi||t===Pi}function tm(t,e,n){if(X_(t,e)||t.datum_type===Yo||e.datum_type===Yo)return n;var o=t.a,a=t.es;if(t.datum_type===Ui){var h=Mh(t,!1,n);if(h!==0)return;o=mh,a=ph}var l=e.a,c=e.b,d=e.es;if(e.datum_type===Ui&&(l=mh,c=o_,d=ph),a===d&&o===l&&!bs(t.datum_type)&&!bs(e.datum_type))return n;if(n=ru(n,a,o),bs(t.datum_type)&&(n=Y_(n,t.datum_type,t.datum_params)),bs(e.datum_type)&&(n=Q_(n,e.datum_type,e.datum_params)),n=hu(n,d,l,c),e.datum_type===Ui){var _=Mh(e,!0,n);if(_!==0)return}return n}function Mh(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var o={x:-n.x,y:n.y},a={x:Number.NaN,y:Number.NaN},h=[],l=0;l<t.grids.length;l++){var c=t.grids[l];if(h.push(c.name),c.isNull){a=o;break}if(c.mandatory,c.grid===null){if(c.mandatory)return console.log("Unable to find mandatory grid '"+c.name+"'"),-1;continue}var d=c.grid.subgrids[0],_=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,v=d.ll[0]-_,p=d.ll[1]-_,y=d.ll[0]+(d.lim[0]-1)*d.del[0]+_,M=d.ll[1]+(d.lim[1]-1)*d.del[1]+_;if(!(p>o.y||v>o.x||M<o.y||y<o.x)&&(a=em(o,e,d),!isNaN(a.x)))break}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-o.x*Ce+" "+o.y*Ce+" tried: '"+h+"'"),-1):(n.x=-a.x,n.y=a.y,0)}function em(t,e,n){var o={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return o;var a={x:t.x,y:t.y};a.x-=n.ll[0],a.y-=n.ll[1],a.x=N(a.x-Math.PI)+Math.PI;var h=wh(a,n);if(e){if(isNaN(h.x))return o;h.x=a.x-h.x,h.y=a.y-h.y;var l=9,c=1e-12,d,_;do{if(_=wh(h,n),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:a.x-(_.x+h.x),y:a.y-(_.y+h.y)},h.x+=d.x,h.y+=d.y}while(l--&&Math.abs(d.x)>c&&Math.abs(d.y)>c);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),o;o.x=N(h.x+n.ll[0]),o.y=h.y+n.ll[1]}else isNaN(h.x)||(o.x=t.x+h.x,o.y=t.y+h.y);return o}function wh(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},o={x:Math.floor(n.x),y:Math.floor(n.y)},a={x:n.x-1*o.x,y:n.y-1*o.y},h={x:Number.NaN,y:Number.NaN},l;if(o.x<0||o.x>=e.lim[0]||o.y<0||o.y>=e.lim[1])return h;l=o.y*e.lim[0]+o.x;var c={x:e.cvs[l][0],y:e.cvs[l][1]};l++;var d={x:e.cvs[l][0],y:e.cvs[l][1]};l+=e.lim[0];var _={x:e.cvs[l][0],y:e.cvs[l][1]};l--;var v={x:e.cvs[l][0],y:e.cvs[l][1]},p=a.x*a.y,y=a.x*(1-a.y),M=(1-a.x)*(1-a.y),b=(1-a.x)*a.y;return h.x=M*c.x+y*d.x+b*v.x+p*_.x,h.y=M*c.y+y*d.y+b*v.y+p*_.y,h}function bh(t,e,n){var o=n.x,a=n.y,h=n.z||0,l,c,d,_={};for(d=0;d<3;d++)if(!(e&&d===2&&n.z===void 0))switch(d===0?(l=o,"ew".indexOf(t.axis[d])!==-1?c="x":c="y"):d===1?(l=a,"ns".indexOf(t.axis[d])!==-1?c="y":c="x"):(l=h,c="z"),t.axis[d]){case"e":_[c]=l;break;case"w":_[c]=-l;break;case"n":_[c]=l;break;case"s":_[c]=-l;break;case"u":n[c]!==void 0&&(_.z=l);break;case"d":n[c]!==void 0&&(_.z=-l);break;default:return null}return _}function lu(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function im(t){Ph(t.x),Ph(t.y)}function Ph(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function nm(t,e){return(t.datum.datum_type===bi||t.datum.datum_type===Pi||t.datum.datum_type===Ui)&&e.datumCode!=="WGS84"||(e.datum.datum_type===bi||e.datum.datum_type===Pi||e.datum.datum_type===Ui)&&t.datumCode!=="WGS84"}function Fs(t,e,n,o){var a;Array.isArray(n)?n=lu(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var h=n.z!==void 0;if(im(n),t.datum&&e.datum&&nm(t,e)&&(a=new Oe("WGS84"),n=Fs(t,a,n,o),t=a),o&&t.axis!=="enu"&&(n=bh(t,!1,n)),t.projName==="longlat")n={x:n.x*Dt,y:n.y*Dt,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=tm(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Ce,y:n.y*Ce,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),o&&e.axis!=="enu"?bh(e,!0,n):(h||delete n.z,n)}var Lh=Oe("WGS84");function Ro(t,e,n,o){var a,h,l;return Array.isArray(n)?(a=Fs(t,e,n,o)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof a.z=="number"?[a.x,a.y,a.z].concat(n.splice(3)):[a.x,a.y,n[2]].concat(n.splice(3)):[a.x,a.y].concat(n.splice(2)):[a.x,a.y]):(h=Fs(t,e,n,o),l=Object.keys(n),l.length===2||l.forEach(function(c){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(c==="x"||c==="y"||c==="z")return}else if(c==="x"||c==="y")return;h[c]=n[c]}),h)}function Th(t){return t instanceof Oe?t:t.oProj?t.oProj:Oe(t)}function ee(t,e,n){t=Th(t);var o=!1,a;return typeof e>"u"?(e=t,t=Lh,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=Lh,o=!0),e=Th(e),n?Ro(t,e,n):(a={forward:function(h,l){return Ro(t,e,h,l)},inverse:function(h,l){return Ro(e,t,h,l)}},o&&(a.oProj=e),a)}var Sh=6,uu="AJSAJS",cu="AFAFAF",Wi=65,Vt=73,ae=79,Tn=86,Sn=90;const sm={forward:fu,inverse:om,toPoint:du};function fu(t,e){return e=e||5,hm(am({lat:t[1],lon:t[0]}),e)}function om(t){var e=Na(mu(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function du(t){var e=Na(mu(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Do(t){return t*(Math.PI/180)}function Ch(t){return 180*(t/Math.PI)}function am(t){var e=t.lat,n=t.lon,o=6378137,a=.00669438,h=.9996,l,c,d,_,v,p,y,M=Do(e),b=Do(n),P,T;T=Math.floor((n+180)/6)+1,n===180&&(T=60),e>=56&&e<64&&n>=3&&n<12&&(T=32),e>=72&&e<84&&(n>=0&&n<9?T=31:n>=9&&n<21?T=33:n>=21&&n<33?T=35:n>=33&&n<42&&(T=37)),l=(T-1)*6-180+3,P=Do(l),c=a/(1-a),d=o/Math.sqrt(1-a*Math.sin(M)*Math.sin(M)),_=Math.tan(M)*Math.tan(M),v=c*Math.cos(M)*Math.cos(M),p=Math.cos(M)*(b-P),y=o*((1-a/4-3*a*a/64-5*a*a*a/256)*M-(3*a/8+3*a*a/32+45*a*a*a/1024)*Math.sin(2*M)+(15*a*a/256+45*a*a*a/1024)*Math.sin(4*M)-35*a*a*a/3072*Math.sin(6*M));var E=h*d*(p+(1-_+v)*p*p*p/6+(5-18*_+_*_+72*v-58*c)*p*p*p*p*p/120)+5e5,k=h*(y+d*Math.tan(M)*(p*p/2+(5-_+9*v+4*v*v)*p*p*p*p/24+(61-58*_+_*_+600*v-330*c)*p*p*p*p*p*p/720));return e<0&&(k+=1e7),{northing:Math.round(k),easting:Math.round(E),zoneNumber:T,zoneLetter:rm(e)}}function Na(t){var e=t.northing,n=t.easting,o=t.zoneLetter,a=t.zoneNumber;if(a<0||a>60)return null;var h=.9996,l=6378137,c=.00669438,d,_=(1-Math.sqrt(1-c))/(1+Math.sqrt(1-c)),v,p,y,M,b,P,T,E,k,B=n-5e5,U=e;o<"N"&&(U-=1e7),T=(a-1)*6-180+3,d=c/(1-c),P=U/h,E=P/(l*(1-c/4-3*c*c/64-5*c*c*c/256)),k=E+(3*_/2-27*_*_*_/32)*Math.sin(2*E)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*E)+151*_*_*_/96*Math.sin(6*E),v=l/Math.sqrt(1-c*Math.sin(k)*Math.sin(k)),p=Math.tan(k)*Math.tan(k),y=d*Math.cos(k)*Math.cos(k),M=l*(1-c)/Math.pow(1-c*Math.sin(k)*Math.sin(k),1.5),b=B/(v*h);var W=k-v*Math.tan(k)/M*(b*b/2-(5+3*p+10*y-4*y*y-9*d)*b*b*b*b/24+(61+90*p+298*y+45*p*p-252*d-3*y*y)*b*b*b*b*b*b/720);W=Ch(W);var q=(b-(1+2*p+y)*b*b*b/6+(5-2*y+28*p-3*y*y+8*d+24*p*p)*b*b*b*b*b/120)/Math.cos(k);q=T+Ch(q);var D;if(t.accuracy){var I=Na({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});D={top:I.lat,right:I.lon,bottom:W,left:q}}else D={lat:W,lon:q};return D}function rm(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function hm(t,e){var n="00000"+t.easting,o="00000"+t.northing;return t.zoneNumber+t.zoneLetter+lm(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+o.substr(o.length-5,e)}function lm(t,e,n){var o=_u(n),a=Math.floor(t/1e5),h=Math.floor(e/1e5)%20;return um(a,h,o)}function _u(t){var e=t%Sh;return e===0&&(e=Sh),e}function um(t,e,n){var o=n-1,a=uu.charCodeAt(o),h=cu.charCodeAt(o),l=a+t-1,c=h+e,d=!1;l>Sn&&(l=l-Sn+Wi-1,d=!0),(l===Vt||a<Vt&&l>Vt||(l>Vt||a<Vt)&&d)&&l++,(l===ae||a<ae&&l>ae||(l>ae||a<ae)&&d)&&(l++,l===Vt&&l++),l>Sn&&(l=l-Sn+Wi-1),c>Tn?(c=c-Tn+Wi-1,d=!0):d=!1,(c===Vt||h<Vt&&c>Vt||(c>Vt||h<Vt)&&d)&&c++,(c===ae||h<ae&&c>ae||(c>ae||h<ae)&&d)&&(c++,c===Vt&&c++),c>Tn&&(c=c-Tn+Wi-1);var _=String.fromCharCode(l)+String.fromCharCode(c);return _}function mu(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,o="",a,h=0;!/[A-Z]/.test(a=t.charAt(h));){if(h>=2)throw"MGRSPoint bad conversion from: "+t;o+=a,h++}var l=parseInt(o,10);if(h===0||h+3>e)throw"MGRSPoint bad conversion from: "+t;var c=t.charAt(h++);if(c<="A"||c==="B"||c==="Y"||c>="Z"||c==="I"||c==="O")throw"MGRSPoint zone letter "+c+" not handled: "+t;n=t.substring(h,h+=2);for(var d=_u(l),_=cm(n.charAt(0),d),v=fm(n.charAt(1),d);v<dm(c);)v+=2e6;var p=e-h;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var y=p/2,M=0,b=0,P,T,E,k,B;return y>0&&(P=1e5/Math.pow(10,y),T=t.substring(h,h+y),M=parseFloat(T)*P,E=t.substring(h+y),b=parseFloat(E)*P),k=M+_,B=b+v,{easting:k,northing:B,zoneLetter:c,zoneNumber:l,accuracy:P}}function cm(t,e){for(var n=uu.charCodeAt(e-1),o=1e5,a=!1;n!==t.charCodeAt(0);){if(n++,n===Vt&&n++,n===ae&&n++,n>Sn){if(a)throw"Bad character: "+t;n=Wi,a=!0}o+=1e5}return o}function fm(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=cu.charCodeAt(e-1),o=0,a=!1;n!==t.charCodeAt(0);){if(n++,n===Vt&&n++,n===ae&&n++,n>Tn){if(a)throw"Bad character: "+t;n=Wi,a=!0}o+=1e5}return o}function dm(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Yi(t,e,n){if(!(this instanceof Yi))return new Yi(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var o=t.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Yi.fromMGRS=function(t){return new Yi(du(t))};Yi.prototype.toMGRS=function(t){return fu([this.x,this.y],t)};var _m=1,mm=.25,Eh=.046875,Oh=.01953125,Ah=.01068115234375,pm=.75,vm=.46875,gm=.013020833333333334,ym=.007120768229166667,xm=.3645833333333333,Mm=.005696614583333333,wm=.3076171875;function pu(t){var e=[];e[0]=_m-t*(mm+t*(Eh+t*(Oh+t*Ah))),e[1]=t*(pm-t*(Eh+t*(Oh+t*Ah)));var n=t*t;return e[2]=n*(vm-t*(gm+t*ym)),n*=t,e[3]=n*(xm-t*Mm),e[4]=n*t*wm,e}function to(t,e,n,o){return n*=e,e*=e,o[0]*t-n*(o[1]+e*(o[2]+e*(o[3]+e*o[4])))}var bm=20;function vu(t,e,n){for(var o=1/(1-e),a=t,h=bm;h;--h){var l=Math.sin(a),c=1-e*l*l;if(c=(to(a,l,Math.cos(a),n)-t)*(c*Math.sqrt(c))*o,a-=c,Math.abs(c)<O)return a}return a}function Pm(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pu(this.es),this.ml0=to(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Lm(t){var e=t.x,n=t.y,o=N(e-this.long0),a,h,l,c=Math.sin(n),d=Math.cos(n);if(this.es){var v=d*o,p=Math.pow(v,2),y=this.ep2*Math.pow(d,2),M=Math.pow(y,2),b=Math.abs(d)>O?Math.tan(n):0,P=Math.pow(b,2),T=Math.pow(P,2);a=1-this.es*Math.pow(c,2),v=v/Math.sqrt(a);var E=to(n,c,d,this.en);h=this.a*(this.k0*v*(1+p/6*(1-P+y+p/20*(5-18*P+T+14*y-58*P*y+p/42*(61+179*T-T*P-479*P)))))+this.x0,l=this.a*(this.k0*(E-this.ml0+c*o*v/2*(1+p/12*(5-P+9*y+4*M+p/30*(61+T-58*P+270*y-330*P*y+p/56*(1385+543*T-T*P-3111*P))))))+this.y0}else{var _=d*Math.sin(o);if(Math.abs(Math.abs(_)-1)<O)return 93;if(h=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,l=d*Math.cos(o)/Math.sqrt(1-Math.pow(_,2)),_=Math.abs(l),_>=1){if(_-1>O)return 93;l=0}else l=Math.acos(l);n<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return t.x=h,t.y=l,t}function Tm(t){var e,n,o,a,h=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+l/this.k0,n=vu(e,this.es,this.en),Math.abs(n)<C){var p=Math.sin(n),y=Math.cos(n),M=Math.abs(y)>O?Math.tan(n):0,b=this.ep2*Math.pow(y,2),P=Math.pow(b,2),T=Math.pow(M,2),E=Math.pow(T,2);e=1-this.es*Math.pow(p,2);var k=h*Math.sqrt(e)/this.k0,B=Math.pow(k,2);e=e*M,o=n-e*B/(1-this.es)*.5*(1-B/12*(5+3*T-9*b*T+b-4*P-B/30*(61+90*T-252*b*T+45*E+46*b-B/56*(1385+3633*T+4095*E+1574*E*T)))),a=N(this.long0+k*(1-B/6*(1+2*T+b-B/20*(5+28*T+24*E+8*b*T+6*b-B/42*(61+662*T+1320*E+720*E*T))))/y)}else o=C*Kn(l),a=0;else{var c=Math.exp(h/this.k0),d=.5*(c-1/c),_=this.lat0+l/this.k0,v=Math.cos(_);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(d,2))),o=Math.asin(e),l<0&&(o=-o),d===0&&v===0?a=0:a=N(Math.atan2(d,v)+this.long0)}return t.x=a,t.y=o,t}var Sm=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Os={init:Pm,forward:Lm,inverse:Tm,names:Sm};function gu(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function _e(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),o=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(o,2))}function Cm(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function Em(t){var e=Math.abs(t);return e=Cm(e*(1+e/(_e(1,e)+1))),t<0?-e:e}function Za(t,e){for(var n=2*Math.cos(2*e),o=t.length-1,a=t[o],h=0,l;--o>=0;)l=-h+n*a+t[o],h=a,a=l;return e+l*Math.sin(2*e)}function Om(t,e){for(var n=2*Math.cos(e),o=t.length-1,a=t[o],h=0,l;--o>=0;)l=-h+n*a+t[o],h=a,a=l;return Math.sin(e)*l}function Am(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function yu(t,e,n){for(var o=Math.sin(e),a=Math.cos(e),h=gu(n),l=Am(n),c=2*a*l,d=-2*o*h,_=t.length-1,v=t[_],p=0,y=0,M=0,b,P;--_>=0;)b=y,P=p,y=v,p=M,v=-b+c*y-d*p+t[_],M=-P+d*y+c*p;return c=o*l,d=a*h,[c*v-d*M,c*M+d*v]}function zm(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Os.init.apply(this),this.forward=Os.forward,this.inverse=Os.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var o=Za(this.cbg,this.lat0);this.Zb=-this.Qn*(o+Om(this.gtu,2*o))}function Im(t){var e=N(t.x-this.long0),n=t.y;n=Za(this.cbg,n);var o=Math.sin(n),a=Math.cos(n),h=Math.sin(e),l=Math.cos(e);n=Math.atan2(o,l*a),e=Math.atan2(h*a,_e(o,a*l)),e=Em(Math.tan(e));var c=yu(this.gtu,2*n,2*e);n=n+c[0],e=e+c[1];var d,_;return Math.abs(e)<=2.623395162778?(d=this.a*(this.Qn*e)+this.x0,_=this.a*(this.Qn*n+this.Zb)+this.y0):(d=1/0,_=1/0),t.x=d,t.y=_,t}function km(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var o,a;if(Math.abs(e)<=2.623395162778){var h=yu(this.utg,2*n,2*e);n=n+h[0],e=e+h[1],e=Math.atan(gu(e));var l=Math.sin(n),c=Math.cos(n),d=Math.sin(e),_=Math.cos(e);n=Math.atan2(l*_,_e(d,_*c)),e=Math.atan2(d,_*c),o=N(e+this.long0),a=Za(this.cgb,n)}else o=1/0,a=1/0;return t.x=o,t.y=a,t}var Bm=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const As={init:zm,forward:Im,inverse:km,names:Bm};function Nm(t,e){if(t===void 0){if(t=Math.floor((N(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Zm="etmerc";function Rm(){var t=Nm(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Dt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,As.init.apply(this),this.forward=As.forward,this.inverse=As.inverse}var Dm=["Universal Transverse Mercator System","utm"];const Fm={init:Rm,names:Dm,dependsOn:Zm};function Ra(t,e){return Math.pow((1-t)/(1+t),e)}var qm=20;function Wm(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+lt)/(Math.pow(Math.tan(.5*this.lat0+lt),this.C)*Ra(this.e*t,this.ratexp))}function Hm(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+lt),this.C)*Ra(this.e*Math.sin(n),this.ratexp))-C,t.x=this.C*e,t}function Gm(t){for(var e=1e-14,n=t.x/this.C,o=t.y,a=Math.pow(Math.tan(.5*o+lt)/this.K,1/this.C),h=qm;h>0&&(o=2*Math.atan(a*Ra(this.e*Math.sin(t.y),-.5*this.e))-C,!(Math.abs(o-t.y)<e));--h)t.y=o;return h?(t.x=n,t.y=o,t):null}var jm=["gauss"];const Da={init:Wm,forward:Hm,inverse:Gm,names:jm};function Um(){Da.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function $m(t){var e,n,o,a;return t.x=N(t.x-this.long0),Da.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Vm(t){var e,n,o,a,h;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,h=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(h,this.R2);e=Math.sin(l),n=Math.cos(l),a=Math.asin(n*this.sinc0+t.y*e*this.cosc0/h),o=Math.atan2(t.x*e,h*this.cosc0*n-t.y*this.sinc0*e)}else a=this.phic0,o=0;return t.x=o,t.y=a,Da.inverse.apply(this,[t]),t.x=N(t.x+this.long0),t}var Km=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Jm={init:Um,forward:$m,inverse:Vm,names:Km};function Xm(t,e,n){return e*=n,Math.tan(.5*(C+t))*Math.pow((1-e)/(1+e),.5*n)}function Ym(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=O&&(this.k0=.5*(1+Kn(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=O&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=O&&(this.k0=.5*this.cons*Ie(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/pe(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ie(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-C,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Qm(t){var e=t.x,n=t.y,o=Math.sin(n),a=Math.cos(n),h,l,c,d,_,v,p=N(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=O&&Math.abs(n+this.lat0)<=O?(t.x=NaN,t.y=NaN,t):this.sphere?(h=2*this.k0/(1+this.sinlat0*o+this.coslat0*a*Math.cos(p)),t.x=this.a*h*a*Math.sin(p)+this.x0,t.y=this.a*h*(this.coslat0*o-this.sinlat0*a*Math.cos(p))+this.y0,t):(l=2*Math.atan(this.ssfn_(n,o,this.e))-C,d=Math.cos(l),c=Math.sin(l),Math.abs(this.coslat0)<=O?(_=pe(this.e,n*this.con,this.con*o),v=2*this.a*this.k0*_/this.cons,t.x=this.x0+v*Math.sin(e-this.long0),t.y=this.y0-this.con*v*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<O?(h=2*this.a*this.k0/(1+d*Math.cos(p)),t.y=h*c):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*c+this.cosX0*d*Math.cos(p))),t.y=h*(this.cosX0*c-this.sinX0*d*Math.cos(p))+this.y0),t.x=h*d*Math.sin(p)+this.x0,t))}function tp(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,a,h,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=O?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),Math.abs(this.coslat0)<O?this.lat0>0?e=N(this.long0+Math.atan2(t.x,-1*t.y)):e=N(this.long0+Math.atan2(t.x,t.y)):e=N(this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=O){if(l<=O)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,o=l*this.cons/(2*this.a*this.k0),n=this.con*Dn(this.e,o),e=this.con*N(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=O?h=this.X0:(h=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/l),e=N(this.long0+Math.atan2(t.x*Math.sin(a),l*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),n=-1*Dn(this.e,Math.tan(.5*(C+h)));return t.x=e,t.y=n,t}var ep=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const ip={init:Ym,forward:Qm,inverse:tp,names:ep,ssfn_:Xm};function np(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,o=this.rf,a=1/o,h=2*a-Math.pow(a,2),l=this.e=Math.sqrt(h);this.R=this.k0*n*Math.sqrt(1-h)/(1-h*Math.pow(e,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var c=Math.log(Math.tan(Math.PI/4+this.b0/2)),d=Math.log(Math.tan(Math.PI/4+t/2)),_=Math.log((1+l*e)/(1-l*e));this.K=c-this.alpha*d+this.alpha*l/2*_}function sp(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),o=-this.alpha*(e+n)+this.K,a=2*(Math.atan(Math.exp(o))-Math.PI/4),h=this.alpha*(t.x-this.lambda0),l=Math.atan(Math.sin(h)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(h))),c=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(h));return t.y=this.R/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))+this.y0,t.x=this.R*l+this.x0,t}function op(t){for(var e=t.x-this.x0,n=t.y-this.y0,o=e/this.R,a=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),h=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(o)),l=Math.atan(Math.sin(o)/(Math.cos(this.b0)*Math.cos(o)-Math.sin(this.b0)*Math.tan(a))),c=this.lambda0+l/this.alpha,d=0,_=h,v=-1e3,p=0;Math.abs(_-v)>1e-7;){if(++p>20)return;d=1/this.alpha*(Math.log(Math.tan(Math.PI/4+h/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),v=_,_=2*Math.atan(Math.exp(d))-Math.PI/2}return t.x=c,t.y=_,t}var ap=["somerc"];const rp={init:np,forward:sp,inverse:op,names:ap};var Ri=1e-7;function hp(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function lp(){var t,e,n,o,a,h,l,c,d,_,v=0,p,y=0,M=0,b=0,P=0,T=0,E=0;this.no_off=hp(this),this.no_rot="no_rot"in this;var k=!1;"alpha"in this&&(k=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),k&&(E=this.alpha),B&&(v=this.rectified_grid_angle*Dt),k||B)y=this.longc;else if(M=this.long1,P=this.lat1,b=this.long2,T=this.lat2,Math.abs(P-T)<=Ri||(t=Math.abs(P))<=Ri||Math.abs(t-C)<=Ri||Math.abs(Math.abs(this.lat0)-C)<=Ri||Math.abs(Math.abs(T)-C)<=Ri)throw new Error;var U=1-this.es;e=Math.sqrt(U),Math.abs(this.lat0)>O?(c=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*c*c,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/U),this.A=this.B*this.k0*e/t,o=this.B*e/(n*Math.sqrt(t)),a=o*o-1,a<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=o,this.E*=Math.pow(pe(this.e,this.lat0,c),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=a=1),k||B?(k?(p=Math.asin(Math.sin(E)/o),B||(v=E)):(p=v,E=Math.asin(o*Math.sin(p))),this.lam0=y-Math.asin(.5*(a-1/a)*Math.tan(p))/this.B):(h=Math.pow(pe(this.e,P,Math.sin(P)),this.B),l=Math.pow(pe(this.e,T,Math.sin(T)),this.B),a=this.E/h,d=(l-h)/(l+h),_=this.E*this.E,_=(_-l*h)/(_+l*h),t=M-b,t<-Math.pi?b-=Zn:t>Math.pi&&(b+=Zn),this.lam0=N(.5*(M+b)-Math.atan(_*Math.tan(.5*this.B*(M-b))/d)/this.B),p=Math.atan(2*Math.sin(this.B*N(M-this.lam0))/(a-1/a)),v=E=Math.asin(o*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(v),this.cosrot=Math.cos(v),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(lt-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(lt+a))}function up(t){var e={},n,o,a,h,l,c,d,_;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-C)>O){if(l=this.E/Math.pow(pe(this.e,t.y,Math.sin(t.y)),this.B),c=1/l,n=.5*(l-c),o=.5*(l+c),h=Math.sin(this.B*t.x),a=(n*this.singam-h*this.cosgam)/o,Math.abs(Math.abs(a)-1)<O)throw new Error;_=.5*this.ArB*Math.log((1-a)/(1+a)),c=Math.cos(this.B*t.x),Math.abs(c)<Ri?d=this.A*t.x:d=this.ArB*Math.atan2(n*this.cosgam+h*this.singam,c)}else _=t.y>0?this.v_pole_n:this.v_pole_s,d=this.ArB*t.y;return this.no_rot?(e.x=d,e.y=_):(d-=this.u_0,e.x=_*this.cosrot+d*this.sinrot,e.y=d*this.cosrot-_*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function cp(t){var e,n,o,a,h,l,c,d={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=Math.exp(-this.BrA*n),a=.5*(o-1/o),h=.5*(o+1/o),l=Math.sin(this.BrA*e),c=(l*this.cosgam+a*this.singam)/h,Math.abs(Math.abs(c)-1)<O)d.x=0,d.y=c<0?-C:C;else{if(d.y=this.E/Math.sqrt((1+c)/(1-c)),d.y=Dn(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(a*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return d.x+=this.lam0,d}var fp=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const dp={init:lp,forward:up,inverse:cp,names:fp};function _p(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<O)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=Ie(this.e,e,n),a=pe(this.e,this.lat1,e),h=Math.sin(this.lat2),l=Math.cos(this.lat2),c=Ie(this.e,h,l),d=pe(this.e,this.lat2,h),_=pe(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>O?this.ns=Math.log(o/c)/Math.log(a/d):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function mp(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=O&&(n=Kn(n)*(C-2*O));var o=Math.abs(Math.abs(n)-C),a,h;if(o>O)a=pe(this.e,n,Math.sin(n)),h=this.a*this.f0*Math.pow(a,this.ns);else{if(o=n*this.ns,o<=0)return null;h=0}var l=this.ns*N(e-this.long0);return t.x=this.k0*(h*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(l))+this.y0,t}function pp(t){var e,n,o,a,h,l=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+c*c),n=1):(e=-Math.sqrt(l*l+c*c),n=-1);var d=0;if(e!==0&&(d=Math.atan2(n*l,n*c)),e!==0||this.ns>0){if(n=1/this.ns,o=Math.pow(e/(this.a*this.f0),n),a=Dn(this.e,o),a===-9999)return null}else a=-C;return h=N(d/this.ns+this.long0),t.x=h,t.y=a,t}var vp=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const gp={init:_p,forward:mp,inverse:pp,names:vp};function yp(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function xp(t){var e,n,o,a,h,l,c,d=t.x,_=t.y,v=N(d-this.long0);return e=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/e)-this.s45),o=-v*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),h=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(a)),l=this.n*h,c=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),t.y=c*Math.cos(l)/1,t.x=c*Math.sin(l)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Mp(t){var e,n,o,a,h,l,c,d,_=t.x;t.x=t.y,t.y=_,this.czech||(t.y*=-1,t.x*=-1),l=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x),a=h/Math.sin(this.s0),o=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(o)-Math.sin(this.ad)*Math.cos(o)*Math.cos(a)),n=Math.asin(Math.cos(o)*Math.sin(a)/Math.cos(e)),t.x=this.long0-n/this.alfa,c=e,d=0;var v=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.e/2))-this.s45),Math.abs(c-t.y)<1e-10&&(d=1),c=t.y,v+=1;while(d===0&&v<15);return v>=15?null:t}var wp=["Krovak","krovak"];const bp={init:yp,forward:xp,inverse:Mp,names:wp};function Gt(t,e,n,o,a){return t*a-e*Math.sin(2*a)+n*Math.sin(4*a)-o*Math.sin(6*a)}function Jn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Xn(t){return .375*t*(1+.25*t*(1+.46875*t))}function Yn(t){return .05859375*t*t*(1+.75*t)}function Qn(t){return t*t*t*(35/3072)}function Qi(t,e,n){var o=e*n;return t/Math.sqrt(1-o*o)}function on(t){return Math.abs(t)<C?t:t-Kn(t)*Math.PI}function qs(t,e,n,o,a){var h,l;h=t/e;for(var c=0;c<15;c++)if(l=(t-(e*h-n*Math.sin(2*h)+o*Math.sin(4*h)-a*Math.sin(6*h)))/(e-2*n*Math.cos(2*h)+4*o*Math.cos(4*h)-6*a*Math.cos(6*h)),h+=l,Math.abs(l)<=1e-10)return h;return NaN}function Pp(){this.sphere||(this.e0=Jn(this.es),this.e1=Xn(this.es),this.e2=Yn(this.es),this.e3=Qn(this.es),this.ml0=this.a*Gt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Lp(t){var e,n,o=t.x,a=t.y;if(o=N(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(a)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(a),Math.cos(o))-this.lat0);else{var h=Math.sin(a),l=Math.cos(a),c=Qi(this.a,this.e,h),d=Math.tan(a)*Math.tan(a),_=o*Math.cos(a),v=_*_,p=this.es*l*l/(1-this.es),y=this.a*Gt(this.e0,this.e1,this.e2,this.e3,a);e=c*_*(1-v*d*(1/6-(8-d+8*p)*v/120)),n=y-this.ml0+c*h/l*v*(.5+(5-d+6*p)*v/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Tp(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,a;if(this.sphere){var h=n+this.lat0;o=Math.asin(Math.sin(h)*Math.cos(e)),a=Math.atan2(Math.tan(e),Math.cos(h))}else{var l=this.ml0/this.a+n,c=qs(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(c)-C)<=O)return t.x=this.long0,t.y=C,n<0&&(t.y*=-1),t;var d=Qi(this.a,this.e,Math.sin(c)),_=d*d*d/this.a/this.a*(1-this.es),v=Math.pow(Math.tan(c),2),p=e*this.a/d,y=p*p;o=c-d*Math.tan(c)/_*p*p*(.5-(1+3*v)*p*p/24),a=p*(1-y*(v/3+(1+3*v)*v*y/15))/Math.cos(c)}return t.x=N(a+this.long0),t.y=on(o),t}var Sp=["Cassini","Cassini_Soldner","cass"];const Cp={init:Pp,forward:Lp,inverse:Tp,names:Sp};function ti(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Ep=1,Op=2,Ap=3,zp=4;function Ip(){var t=Math.abs(this.lat0);if(Math.abs(t-C)<O?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<O?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=ti(this.e,1),this.mmf=.5/(1-this.es),this.apa=Wp(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=ti(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function kp(t){var e,n,o,a,h,l,c,d,_,v,p=t.x,y=t.y;if(p=N(p-this.long0),this.sphere){if(h=Math.sin(y),v=Math.cos(y),o=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+v*o:1+this.sinph0*h+this.cosph0*v*o,n<=O)return null;n=Math.sqrt(2/n),e=n*v*Math.sin(p),n*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*v*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(y+this.lat0)<O)return null;n=lt-y*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(p),n*=o}}else{switch(c=0,d=0,_=0,o=Math.cos(p),a=Math.sin(p),h=Math.sin(y),l=ti(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=l/this.qp,d=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:_=1+this.sinb1*c+this.cosb1*d*o;break;case this.EQUIT:_=1+d*o;break;case this.N_POLE:_=C+y,l=this.qp-l;break;case this.S_POLE:_=y-C,l=this.qp+l;break}if(Math.abs(_)<O)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),this.mode===this.OBLIQ?n=this.ymf*_*(this.cosb1*c-this.sinb1*d*o):n=(_=Math.sqrt(2/(1+d*o)))*c*this.ymf,e=this.xmf*_*d*a;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(_=Math.sqrt(l))*a,n=o*(this.mode===this.S_POLE?_:-_)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function Bp(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,o,a,h,l,c,d,_;if(this.sphere){var v=0,p,y=0;if(p=Math.sqrt(e*e+n*n),a=p*.5,a>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(a),v=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(p)<=O?0:Math.asin(n*y/p),e*=y,n=v*p;break;case this.OBLIQ:a=Math.abs(p)<=O?this.lat0:Math.asin(v*this.sinph0+n*y*this.cosph0/p),e*=y*this.cosph0,n=(v-Math.sin(a)*this.sinph0)*p;break;case this.N_POLE:n=-n,a=C-a;break;case this.S_POLE:a-=C;break}o=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,d=Math.sqrt(e*e+n*n),d<O)return t.x=this.long0,t.y=this.lat0,t;l=2*Math.asin(.5*d/this.rq),h=Math.cos(l),e*=l=Math.sin(l),this.mode===this.OBLIQ?(_=h*this.sinb1+n*l*this.cosb1/d,c=this.qp*_,n=d*this.cosb1*h-n*this.sinb1*l):(_=n*l/d,c=this.qp*_,n=d*h)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),c=e*e+n*n,!c)return t.x=this.long0,t.y=this.lat0,t;_=1-c/this.qp,this.mode===this.S_POLE&&(_=-_)}o=Math.atan2(e,n),a=Hp(Math.asin(_),this.apa)}return t.x=N(this.long0+o),t.y=a,t}var Np=.3333333333333333,Zp=.17222222222222222,Rp=.10257936507936508,Dp=.06388888888888888,Fp=.0664021164021164,qp=.016415012942191543;function Wp(t){var e,n=[];return n[0]=t*Np,e=t*t,n[0]+=e*Zp,n[1]=e*Dp,e*=t,n[0]+=e*Rp,n[1]+=e*Fp,n[2]=e*qp,n}function Hp(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var Gp=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const jp={init:Ip,forward:kp,inverse:Bp,names:Gp,S_POLE:Ep,N_POLE:Op,EQUIT:Ap,OBLIQ:zp};function si(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Up(){Math.abs(this.lat1+this.lat2)<O||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ie(this.e3,this.sin_po,this.cos_po),this.qs1=ti(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ie(this.e3,this.sin_po,this.cos_po),this.qs2=ti(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ti(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>O?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function $p(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var o=ti(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,h=this.ns0*N(e-this.long0),l=a*Math.sin(h)+this.x0,c=this.rh-a*Math.cos(h)+this.y0;return t.x=l,t.y=c,t}function Vp(t){var e,n,o,a,h,l;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),o=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),o=-1),a=0,e!==0&&(a=Math.atan2(o*t.x,o*t.y)),o=e*this.ns0/this.a,this.sphere?l=Math.asin((this.c-o*o)/(2*this.ns0)):(n=(this.c-o*o)/this.ns0,l=this.phi1z(this.e3,n)),h=N(a/this.ns0+this.long0),t.x=h,t.y=l,t}function Kp(t,e){var n,o,a,h,l,c=si(.5*e);if(t<O)return c;for(var d=t*t,_=1;_<=25;_++)if(n=Math.sin(c),o=Math.cos(c),a=t*n,h=1-a*a,l=.5*h*h/o*(e/(1-d)-n/h+.5/t*Math.log((1-a)/(1+a))),c=c+l,Math.abs(l)<=1e-7)return c;return null}var Jp=["Albers_Conic_Equal_Area","Albers","aea"];const Xp={init:Up,forward:$p,inverse:Vp,names:Jp,phi1z:Kp};function Yp(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Qp(t){var e,n,o,a,h,l,c,d,_=t.x,v=t.y;return o=N(_-this.long0),e=Math.sin(v),n=Math.cos(v),a=Math.cos(o),l=this.sin_p14*e+this.cos_p14*n*a,h=1,l>0||Math.abs(l)<=O?(c=this.x0+this.a*h*n*Math.sin(o)/l,d=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*a)/l):(c=this.x0+this.infinity_dist*n*Math.sin(o),d=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=c,t.y=d,t}function tv(t){var e,n,o,a,h,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),o=Math.cos(a),l=si(o*this.sin_p14+t.y*n*this.cos_p14/e),h=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),h=N(this.long0+h)):(l=this.phic0,h=0),t.x=h,t.y=l,t}var ev=["gnom"];const iv={init:Yp,forward:Qp,inverse:tv,names:ev};function nv(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*C:C;for(var o=Math.asin(.5*e),a,h,l,c,d=0;d<30;d++)if(h=Math.sin(o),l=Math.cos(o),c=t*h,a=Math.pow(1-c*c,2)/(2*l)*(e/(1-t*t)-h/(1-c*c)+.5/t*Math.log((1-c)/(1+c))),o+=a,Math.abs(a)<=1e-10)return o;return NaN}function sv(){this.sphere||(this.k0=Ie(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ov(t){var e=t.x,n=t.y,o,a,h=N(e-this.long0);if(this.sphere)o=this.x0+this.a*h*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var l=ti(this.e,Math.sin(n));o=this.x0+this.a*this.k0*h,a=this.y0+this.a*l*.5/this.k0}return t.x=o,t.y=a,t}function av(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=N(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=nv(this.e,2*t.y*this.k0/this.a),e=N(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var rv=["cea"];const hv={init:sv,forward:ov,inverse:av,names:rv};function lv(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function uv(t){var e=t.x,n=t.y,o=N(e-this.long0),a=on(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t}function cv(t){var e=t.x,n=t.y;return t.x=N(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=on(this.lat0+(n-this.y0)/this.a),t}var fv=["Equirectangular","Equidistant_Cylindrical","eqc"];const dv={init:lv,forward:uv,inverse:cv,names:fv};var zh=20;function _v(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jn(this.es),this.e1=Xn(this.es),this.e2=Yn(this.es),this.e3=Qn(this.es),this.ml0=this.a*Gt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function mv(t){var e=t.x,n=t.y,o,a,h,l=N(e-this.long0);if(h=l*Math.sin(n),this.sphere)Math.abs(n)<=O?(o=this.a*l,a=-1*this.a*this.lat0):(o=this.a*Math.sin(h)/Math.tan(n),a=this.a*(on(n-this.lat0)+(1-Math.cos(h))/Math.tan(n)));else if(Math.abs(n)<=O)o=this.a*l,a=-1*this.ml0;else{var c=Qi(this.a,this.e,Math.sin(n))/Math.tan(n);o=c*Math.sin(h),a=this.a*Gt(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+c*(1-Math.cos(h))}return t.x=o+this.x0,t.y=a+this.y0,t}function pv(t){var e,n,o,a,h,l,c,d,_;if(o=t.x-this.x0,a=t.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=O)e=N(o/this.a+this.long0),n=0;else{l=this.lat0+a/this.a,c=o*o/this.a/this.a+l*l,d=l;var v;for(h=zh;h;--h)if(v=Math.tan(d),_=-1*(l*(d*v+1)-d-.5*(d*d+c)*v)/((d-l)/v-1),d+=_,Math.abs(_)<=O){n=d;break}e=N(this.long0+Math.asin(o*Math.tan(d)/this.a)/Math.sin(n))}else if(Math.abs(a+this.ml0)<=O)n=0,e=N(this.long0+o/this.a);else{l=(this.ml0+a)/this.a,c=o*o/this.a/this.a+l*l,d=l;var p,y,M,b,P;for(h=zh;h;--h)if(P=this.e*Math.sin(d),p=Math.sqrt(1-P*P)*Math.tan(d),y=this.a*Gt(this.e0,this.e1,this.e2,this.e3,d),M=this.e0-2*this.e1*Math.cos(2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),b=y/this.a,_=(l*(p*b+1)-b-.5*p*(b*b+c))/(this.es*Math.sin(2*d)*(b*b+c-2*l*b)/(4*p)+(l-b)*(p*M-2/Math.sin(2*d))-M),d-=_,Math.abs(_)<=O){n=d;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=N(this.long0+Math.asin(o*p/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var vv=["Polyconic","poly"];const gv={init:_v,forward:mv,inverse:pv,names:vv};function yv(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function xv(t){var e,n=t.x,o=t.y,a=o-this.lat0,h=n-this.long0,l=a/zn*1e-5,c=h,d=1,_=0;for(e=1;e<=10;e++)d=d*l,_=_+this.A[e]*d;var v=_,p=c,y=1,M=0,b,P,T=0,E=0;for(e=1;e<=6;e++)b=y*v-M*p,P=M*v+y*p,y=b,M=P,T=T+this.B_re[e]*y-this.B_im[e]*M,E=E+this.B_im[e]*y+this.B_re[e]*M;return t.x=E*this.a+this.x0,t.y=T*this.a+this.y0,t}function Mv(t){var e,n=t.x,o=t.y,a=n-this.x0,h=o-this.y0,l=h/this.a,c=a/this.a,d=1,_=0,v,p,y=0,M=0;for(e=1;e<=6;e++)v=d*l-_*c,p=_*l+d*c,d=v,_=p,y=y+this.C_re[e]*d-this.C_im[e]*_,M=M+this.C_im[e]*d+this.C_re[e]*_;for(var b=0;b<this.iterations;b++){var P=y,T=M,E,k,B=l,U=c;for(e=2;e<=6;e++)E=P*y-T*M,k=T*y+P*M,P=E,T=k,B=B+(e-1)*(this.B_re[e]*P-this.B_im[e]*T),U=U+(e-1)*(this.B_im[e]*P+this.B_re[e]*T);P=1,T=0;var W=this.B_re[1],q=this.B_im[1];for(e=2;e<=6;e++)E=P*y-T*M,k=T*y+P*M,P=E,T=k,W=W+e*(this.B_re[e]*P-this.B_im[e]*T),q=q+e*(this.B_im[e]*P+this.B_re[e]*T);var D=W*W+q*q;y=(B*W+U*q)/D,M=(U*W-B*q)/D}var I=y,A=M,Q=1,ct=0;for(e=1;e<=9;e++)Q=Q*I,ct=ct+this.D[e]*Q;var Ot=this.lat0+ct*zn*1e5,ui=this.long0+A;return t.x=ui,t.y=Ot,t}var wv=["New_Zealand_Map_Grid","nzmg"];const bv={init:yv,forward:xv,inverse:Mv,names:wv};function Pv(){}function Lv(t){var e=t.x,n=t.y,o=N(e-this.long0),a=this.x0+this.a*o,h=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=a,t.y=h,t}function Tv(t){t.x-=this.x0,t.y-=this.y0;var e=N(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var Sv=["Miller_Cylindrical","mill"];const Cv={init:Pv,forward:Lv,inverse:Tv,names:Sv};var Ev=20;function Ov(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pu(this.es)}function Av(t){var e,n,o=t.x,a=t.y;if(o=N(o-this.long0),this.sphere){if(!this.m)a=this.n!==1?Math.asin(this.n*Math.sin(a)):a;else for(var h=this.n*Math.sin(a),l=Ev;l;--l){var c=(this.m*a+Math.sin(a)-h)/(this.m+Math.cos(a));if(a-=c,Math.abs(c)<O)break}e=this.a*this.C_x*o*(this.m+Math.cos(a)),n=this.a*this.C_y*a}else{var d=Math.sin(a),_=Math.cos(a);n=this.a*to(a,d,_,this.en),e=this.a*o*_/Math.sqrt(1-this.es*d*d)}return t.x=e,t.y=n,t}function zv(t){var e,n,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o=o/(this.C_x*(this.m+Math.cos(e))),this.m?e=si((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=si(Math.sin(e)/this.n)),o=N(o+this.long0),e=on(e)):(e=vu(t.y/this.a,this.es,this.en),a=Math.abs(e),a<C?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),o=N(n)):a-O<C&&(o=this.long0)),t.x=o,t.y=e,t}var Iv=["Sinusoidal","sinu"];const kv={init:Ov,forward:Av,inverse:zv,names:Iv};function Bv(){}function Nv(t){for(var e=t.x,n=t.y,o=N(e-this.long0),a=n,h=Math.PI*Math.sin(n);;){var l=-(a+Math.sin(a)-h)/(1+Math.cos(a));if(a+=l,Math.abs(l)<O)break}a/=2,Math.PI/2-Math.abs(n)<O&&(o=0);var c=.900316316158*this.a*o*Math.cos(a)+this.x0,d=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=c,t.y=d,t}function Zv(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var o=N(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var a=Math.asin(n);return t.x=o,t.y=a,t}var Rv=["Mollweide","moll"];const Dv={init:Bv,forward:Nv,inverse:Zv,names:Rv};function Fv(){Math.abs(this.lat1+this.lat2)<O||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jn(this.es),this.e1=Xn(this.es),this.e2=Yn(this.es),this.e3=Qn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ie(this.e,this.sinphi,this.cosphi),this.ml1=Gt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<O?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ie(this.e,this.sinphi,this.cosphi),this.ml2=Gt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Gt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function qv(t){var e=t.x,n=t.y,o;if(this.sphere)o=this.a*(this.g-n);else{var a=Gt(this.e0,this.e1,this.e2,this.e3,n);o=this.a*(this.g-a)}var h=this.ns*N(e-this.long0),l=this.x0+o*Math.sin(h),c=this.y0+this.rh-o*Math.cos(h);return t.x=l,t.y=c,t}function Wv(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,o,a;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var h=0;if(n!==0&&(h=Math.atan2(e*t.x,e*t.y)),this.sphere)return a=N(this.long0+h/this.ns),o=on(this.g-n/this.a),t.x=a,t.y=o,t;var l=this.g-n/this.a;return o=qs(l,this.e0,this.e1,this.e2,this.e3),a=N(this.long0+h/this.ns),t.x=a,t.y=o,t}var Hv=["Equidistant_Conic","eqdc"];const Gv={init:Fv,forward:qv,inverse:Wv,names:Hv};function jv(){this.R=this.a}function Uv(t){var e=t.x,n=t.y,o=N(e-this.long0),a,h;Math.abs(n)<=O&&(a=this.x0+this.R*o,h=this.y0);var l=si(2*Math.abs(n/Math.PI));(Math.abs(o)<=O||Math.abs(Math.abs(n)-C)<=O)&&(a=this.x0,n>=0?h=this.y0+Math.PI*this.R*Math.tan(.5*l):h=this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/o-o/Math.PI),d=c*c,_=Math.sin(l),v=Math.cos(l),p=v/(_+v-1),y=p*p,M=p*(2/_-1),b=M*M,P=Math.PI*this.R*(c*(p-b)+Math.sqrt(d*(p-b)*(p-b)-(b+d)*(y-b)))/(b+d);o<0&&(P=-P),a=this.x0+P;var T=d+p;return P=Math.PI*this.R*(M*T-c*Math.sqrt((b+d)*(d+1)-T*T))/(b+d),n>=0?h=this.y0+P:h=this.y0-P,t.x=a,t.y=h,t}function $v(t){var e,n,o,a,h,l,c,d,_,v,p,y,M;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,o=t.x/p,a=t.y/p,h=o*o+a*a,l=-Math.abs(a)*(1+h),c=l-2*a*a+o*o,d=-2*l+1+2*a*a+h*h,M=a*a/d+(2*c*c*c/d/d/d-9*l*c/d/d)/27,_=(l-c*c/3/d)/d,v=2*Math.sqrt(-_/3),p=3*M/_/v,Math.abs(p)>1&&(p>=0?p=1:p=-1),y=Math.acos(p)/3,t.y>=0?n=(-v*Math.cos(y+Math.PI/3)-c/3/d)*Math.PI:n=-(-v*Math.cos(y+Math.PI/3)-c/3/d)*Math.PI,Math.abs(o)<O?e=this.long0:e=N(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(o*o-a*a)+h*h))/2/o),t.x=e,t.y=n,t}var Vv=["Van_der_Grinten_I","VanDerGrinten","vandg"];const Kv={init:jv,forward:Uv,inverse:$v,names:Vv};function Jv(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Xv(t){var e=t.x,n=t.y,o=Math.sin(t.y),a=Math.cos(t.y),h=N(e-this.long0),l,c,d,_,v,p,y,M,b,P,T,E,k,B,U,W,q,D,I,A,Q,ct,Ot;return this.sphere?Math.abs(this.sin_p12-1)<=O?(t.x=this.x0+this.a*(C-n)*Math.sin(h),t.y=this.y0-this.a*(C-n)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=O?(t.x=this.x0+this.a*(C+n)*Math.sin(h),t.y=this.y0+this.a*(C+n)*Math.cos(h),t):(D=this.sin_p12*o+this.cos_p12*a*Math.cos(h),W=Math.acos(D),q=W?W/Math.sin(W):1,t.x=this.x0+this.a*q*a*Math.sin(h),t.y=this.y0+this.a*q*(this.cos_p12*o-this.sin_p12*a*Math.cos(h)),t):(l=Jn(this.es),c=Xn(this.es),d=Yn(this.es),_=Qn(this.es),Math.abs(this.sin_p12-1)<=O?(v=this.a*Gt(l,c,d,_,C),p=this.a*Gt(l,c,d,_,n),t.x=this.x0+(v-p)*Math.sin(h),t.y=this.y0-(v-p)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=O?(v=this.a*Gt(l,c,d,_,C),p=this.a*Gt(l,c,d,_,n),t.x=this.x0+(v+p)*Math.sin(h),t.y=this.y0+(v+p)*Math.cos(h),t):(y=o/a,M=Qi(this.a,this.e,this.sin_p12),b=Qi(this.a,this.e,o),P=Math.atan((1-this.es)*y+this.es*M*this.sin_p12/(b*a)),T=Math.atan2(Math.sin(h),this.cos_p12*Math.tan(P)-this.sin_p12*Math.cos(h)),T===0?I=Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.abs(Math.abs(T)-Math.PI)<=O?I=-Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):I=Math.asin(Math.sin(h)*Math.cos(P)/Math.sin(T)),E=this.e*this.sin_p12/Math.sqrt(1-this.es),k=this.e*this.cos_p12*Math.cos(T)/Math.sqrt(1-this.es),B=E*k,U=k*k,A=I*I,Q=A*I,ct=Q*I,Ot=ct*I,W=M*I*(1-A*U*(1-U)/6+Q/8*B*(1-2*U)+ct/120*(U*(4-7*U)-3*E*E*(1-7*U))-Ot/48*B),t.x=this.x0+W*Math.sin(T),t.y=this.y0+W*Math.cos(T),t))}function Yv(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,a,h,l,c,d,_,v,p,y,M,b,P,T,E,k,B,U,W,q,D,I;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*C*this.a?void 0:(n=e/this.a,o=Math.sin(n),a=Math.cos(n),h=this.long0,Math.abs(e)<=O?l=this.lat0:(l=si(a*this.sin_p12+t.y*o*this.cos_p12/e),c=Math.abs(this.lat0)-C,Math.abs(c)<=O?this.lat0>=0?h=N(this.long0+Math.atan2(t.x,-t.y)):h=N(this.long0-Math.atan2(-t.x,t.y)):h=N(this.long0+Math.atan2(t.x*o,e*this.cos_p12*a-t.y*this.sin_p12*o))),t.x=h,t.y=l,t)):(d=Jn(this.es),_=Xn(this.es),v=Yn(this.es),p=Qn(this.es),Math.abs(this.sin_p12-1)<=O?(y=this.a*Gt(d,_,v,p,C),e=Math.sqrt(t.x*t.x+t.y*t.y),M=y-e,l=qs(M/this.a,d,_,v,p),h=N(this.long0+Math.atan2(t.x,-1*t.y)),t.x=h,t.y=l,t):Math.abs(this.sin_p12+1)<=O?(y=this.a*Gt(d,_,v,p,C),e=Math.sqrt(t.x*t.x+t.y*t.y),M=e-y,l=qs(M/this.a,d,_,v,p),h=N(this.long0+Math.atan2(t.x,t.y)),t.x=h,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),T=Math.atan2(t.x,t.y),b=Qi(this.a,this.e,this.sin_p12),E=Math.cos(T),k=this.e*this.cos_p12*E,B=-k*k/(1-this.es),U=3*this.es*(1-B)*this.sin_p12*this.cos_p12*E/(1-this.es),W=e/b,q=W-B*(1+B)*Math.pow(W,3)/6-U*(1+3*B)*Math.pow(W,4)/24,D=1-B*q*q/2-W*q*q*q/6,P=Math.asin(this.sin_p12*Math.cos(q)+this.cos_p12*Math.sin(q)*E),h=N(this.long0+Math.asin(Math.sin(T)*Math.sin(q)/Math.cos(P))),I=Math.sin(P),l=Math.atan2((I-this.es*D*this.sin_p12)*Math.tan(P),I*(1-this.es)),t.x=h,t.y=l,t))}var Qv=["Azimuthal_Equidistant","aeqd"];const tg={init:Jv,forward:Xv,inverse:Yv,names:Qv};function eg(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ig(t){var e,n,o,a,h,l,c,d,_=t.x,v=t.y;return o=N(_-this.long0),e=Math.sin(v),n=Math.cos(v),a=Math.cos(o),l=this.sin_p14*e+this.cos_p14*n*a,h=1,(l>0||Math.abs(l)<=O)&&(c=this.a*h*n*Math.sin(o),d=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*a)),t.x=c,t.y=d,t}function ng(t){var e,n,o,a,h,l,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=si(e/this.a),o=Math.sin(n),a=Math.cos(n),l=this.long0,Math.abs(e)<=O?(c=this.lat0,t.x=l,t.y=c,t):(c=si(a*this.sin_p14+t.y*o*this.cos_p14/e),h=Math.abs(this.lat0)-C,Math.abs(h)<=O?(this.lat0>=0?l=N(this.long0+Math.atan2(t.x,-t.y)):l=N(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=c,t):(l=N(this.long0+Math.atan2(t.x*o,e*this.cos_p14*a-t.y*this.sin_p14*o)),t.x=l,t.y=c,t))}var sg=["ortho"];const og={init:eg,forward:ig,inverse:ng,names:sg};var wt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ut={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ag(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=C-lt/2?this.face=wt.TOP:this.lat0<=-(C-lt/2)?this.face=wt.BOTTOM:Math.abs(this.long0)<=lt?this.face=wt.FRONT:Math.abs(this.long0)<=C+lt?this.face=this.long0>0?wt.RIGHT:wt.LEFT:this.face=wt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function rg(t){var e={x:0,y:0},n,o,a,h,l,c,d={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,o=t.x,this.face===wt.TOP)h=C-n,o>=lt&&o<=C+lt?(d.value=ut.AREA_0,a=o-C):o>C+lt||o<=-(C+lt)?(d.value=ut.AREA_1,a=o>0?o-Tt:o+Tt):o>-(C+lt)&&o<=-lt?(d.value=ut.AREA_2,a=o+C):(d.value=ut.AREA_3,a=o);else if(this.face===wt.BOTTOM)h=C+n,o>=lt&&o<=C+lt?(d.value=ut.AREA_0,a=-o+C):o<lt&&o>=-lt?(d.value=ut.AREA_1,a=-o):o<-lt&&o>=-(C+lt)?(d.value=ut.AREA_2,a=-o-C):(d.value=ut.AREA_3,a=o>0?-o+Tt:-o-Tt);else{var _,v,p,y,M,b,P;this.face===wt.RIGHT?o=$i(o,+C):this.face===wt.BACK?o=$i(o,+Tt):this.face===wt.LEFT&&(o=$i(o,-C)),y=Math.sin(n),M=Math.cos(n),b=Math.sin(o),P=Math.cos(o),_=M*P,v=M*b,p=y,this.face===wt.FRONT?(h=Math.acos(_),a=Ps(h,p,v,d)):this.face===wt.RIGHT?(h=Math.acos(v),a=Ps(h,p,-_,d)):this.face===wt.BACK?(h=Math.acos(-_),a=Ps(h,p,-v,d)):this.face===wt.LEFT?(h=Math.acos(-v),a=Ps(h,p,_,d)):(h=a=0,d.value=ut.AREA_0)}return c=Math.atan(12/Tt*(a+Math.acos(Math.sin(a)*Math.cos(lt))-C)),l=Math.sqrt((1-Math.cos(h))/(Math.cos(c)*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(a))))),d.value===ut.AREA_1?c+=C:d.value===ut.AREA_2?c+=Tt:d.value===ut.AREA_3&&(c+=1.5*Tt),e.x=l*Math.cos(c),e.y=l*Math.sin(c),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function hg(t){var e={lam:0,phi:0},n,o,a,h,l,c,d,_,v,p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=ut.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=ut.AREA_1,n-=C):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=ut.AREA_2,n=n<0?n+Tt:n-Tt):(p.value=ut.AREA_3,n+=C),v=Tt/12*Math.tan(n),l=Math.sin(v)/(Math.cos(v)-1/Math.sqrt(2)),c=Math.atan(l),a=Math.cos(n),h=Math.tan(o),d=1-a*a*h*h*(1-Math.cos(Math.atan(1/Math.cos(c)))),d<-1?d=-1:d>1&&(d=1),this.face===wt.TOP)_=Math.acos(d),e.phi=C-_,p.value===ut.AREA_0?e.lam=c+C:p.value===ut.AREA_1?e.lam=c<0?c+Tt:c-Tt:p.value===ut.AREA_2?e.lam=c-C:e.lam=c;else if(this.face===wt.BOTTOM)_=Math.acos(d),e.phi=_-C,p.value===ut.AREA_0?e.lam=-c+C:p.value===ut.AREA_1?e.lam=-c:p.value===ut.AREA_2?e.lam=-c-C:e.lam=c<0?-c-Tt:-c+Tt;else{var y,M,b;y=d,v=y*y,v>=1?b=0:b=Math.sqrt(1-v)*Math.sin(c),v+=b*b,v>=1?M=0:M=Math.sqrt(1-v),p.value===ut.AREA_1?(v=M,M=-b,b=v):p.value===ut.AREA_2?(M=-M,b=-b):p.value===ut.AREA_3&&(v=M,M=b,b=-v),this.face===wt.RIGHT?(v=y,y=-M,M=v):this.face===wt.BACK?(y=-y,M=-M):this.face===wt.LEFT&&(v=y,y=M,M=-v),e.phi=Math.acos(-b)-C,e.lam=Math.atan2(M,y),this.face===wt.RIGHT?e.lam=$i(e.lam,-C):this.face===wt.BACK?e.lam=$i(e.lam,-Tt):this.face===wt.LEFT&&(e.lam=$i(e.lam,+C))}if(this.es!==0){var P,T,E;P=e.phi<0?1:0,T=Math.tan(e.phi),E=this.b/Math.sqrt(T*T+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-E*E)/(this.one_minus_f*E)),P&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Ps(t,e,n,o){var a;return t<O?(o.value=ut.AREA_0,a=0):(a=Math.atan2(e,n),Math.abs(a)<=lt?o.value=ut.AREA_0:a>lt&&a<=C+lt?(o.value=ut.AREA_1,a-=C):a>C+lt||a<=-(C+lt)?(o.value=ut.AREA_2,a=a>=0?a-Tt:a+Tt):(o.value=ut.AREA_3,a+=C)),a}function $i(t,e){var n=t+e;return n<-Tt?n+=Zn:n>+Tt&&(n-=Zn),n}var lg=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ug={init:ag,forward:rg,inverse:hg,names:lg};var ea=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Cn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],xu=.8487,Mu=1.3523,wu=Ce/5,cg=1/wu,Hi=18,Ws=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},fg=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function dg(t,e,n,o){for(var a=e;o;--o){var h=t(a);if(a-=h,Math.abs(h)<n)break}return a}function _g(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function mg(t){var e=N(t.x-this.long0),n=Math.abs(t.y),o=Math.floor(n*wu);o<0?o=0:o>=Hi&&(o=Hi-1),n=Ce*(n-cg*o);var a={x:Ws(ea[o],n)*e,y:Ws(Cn[o],n)};return t.y<0&&(a.y=-a.y),a.x=a.x*this.a*xu+this.x0,a.y=a.y*this.a*Mu+this.y0,a}function pg(t){var e={x:(t.x-this.x0)/(this.a*xu),y:Math.abs(t.y-this.y0)/(this.a*Mu)};if(e.y>=1)e.x/=ea[Hi][0],e.y=t.y<0?-C:C;else{var n=Math.floor(e.y*Hi);for(n<0?n=0:n>=Hi&&(n=Hi-1);;)if(Cn[n][0]>e.y)--n;else if(Cn[n+1][0]<=e.y)++n;else break;var o=Cn[n],a=5*(e.y-o[0])/(Cn[n+1][0]-o[0]);a=dg(function(h){return(Ws(o,h)-e.y)/fg(o,h)},a,O,100),e.x/=Ws(ea[n],a),e.y=(5*n+a)*Dt,t.y<0&&(e.y=-e.y)}return e.x=N(e.x+this.long0),e}var vg=["Robinson","robin"];const gg={init:_g,forward:mg,inverse:pg,names:vg};function yg(){this.name="geocent"}function xg(t){var e=ru(t,this.es,this.a);return e}function Mg(t){var e=hu(t,this.es,this.a,this.b);return e}var wg=["Geocentric","geocentric","geocent","Geocent"];const bg={init:yg,forward:xg,inverse:Mg,names:wg};var qt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},bn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Pg(){if(Object.keys(bn).forEach((function(n){if(typeof this[n]>"u")this[n]=bn[n].def;else{if(bn[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);bn[n].num&&(this[n]=parseFloat(this[n]))}bn[n].degrees&&(this[n]=this[n]*Dt)}).bind(this)),Math.abs(Math.abs(this.lat0)-C)<O?this.mode=this.lat0<0?qt.S_POLE:qt.N_POLE:Math.abs(this.lat0)<O?this.mode=qt.EQUIT:(this.mode=qt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Lg(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a,h;switch(this.mode){case qt.OBLIQ:h=this.sinph0*e+this.cosph0*n*o;break;case qt.EQUIT:h=n*o;break;case qt.S_POLE:h=-e;break;case qt.N_POLE:h=e;break}switch(h=this.pn1/(this.p-h),a=h*n*Math.sin(t.x),this.mode){case qt.OBLIQ:h*=this.cosph0*e-this.sinph0*n*o;break;case qt.EQUIT:h*=e;break;case qt.N_POLE:h*=-(n*o);break;case qt.S_POLE:h*=n*o;break}var l,c;return l=h*this.cg+a*this.sg,c=1/(l*this.sw*this.h1+this.cw),a=(a*this.cg-h*this.sg)*this.cw*c,h=l*c,t.x=a*this.a,t.y=h*this.a,t}function Tg(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,o,a;a=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*a,o=this.pn1*t.y*this.cw*a,t.x=n*this.cg+o*this.sg,t.y=o*this.cg-n*this.sg;var h=_e(t.x,t.y);if(Math.abs(h)<O)e.x=0,e.y=t.y;else{var l,c;switch(c=1-h*h*this.pfact,c=(this.p-Math.sqrt(c))/(this.pn1/h+h/this.pn1),l=Math.sqrt(1-c*c),this.mode){case qt.OBLIQ:e.y=Math.asin(l*this.sinph0+t.y*c*this.cosph0/h),t.y=(l-this.sinph0*Math.sin(e.y))*h,t.x*=c*this.cosph0;break;case qt.EQUIT:e.y=Math.asin(t.y*c/h),t.y=l*h,t.x*=c;break;case qt.N_POLE:e.y=Math.asin(l),t.y=-t.y;break;case qt.S_POLE:e.y=-Math.asin(l);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Sg=["Tilted_Perspective","tpers"];const Cg={init:Pg,forward:Lg,inverse:Tg,names:Sg};function Eg(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Og(t){var e=t.x,n=t.y,o,a,h,l;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var c=this.radius_p/_e(this.radius_p*Math.cos(n),Math.sin(n));if(a=c*Math.cos(e)*Math.cos(n),h=c*Math.sin(e)*Math.cos(n),l=c*Math.sin(n),(this.radius_g-a)*a-h*h-l*l*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/_e(l,o)),t.y=this.radius_g_1*Math.atan(l/o)):(t.x=this.radius_g_1*Math.atan(h/o),t.y=this.radius_g_1*Math.atan(l/_e(h,o)))}else this.shape==="sphere"&&(o=Math.cos(n),a=Math.cos(e)*o,h=Math.sin(e)*o,l=Math.sin(n),o=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/_e(l,o)),t.y=this.radius_g_1*Math.atan(l/o)):(t.x=this.radius_g_1*Math.atan(h/o),t.y=this.radius_g_1*Math.atan(l/_e(h,o))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Ag(t){var e=-1,n=0,o=0,a,h,l,c;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*_e(1,o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*_e(1,n));var d=o/this.radius_p;if(a=n*n+d*d+e*e,h=2*this.radius_g*e,l=h*h-4*a*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;c=(-h-Math.sqrt(l))/(2*a),e=this.radius_g+c*e,n*=c,o*=c,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(n=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),a=n*n+o*o+e*e,h=2*this.radius_g*e,l=h*h-4*a*this.C,l<0)return t.x=Number.NaN,t.y=Number.NaN,t;c=(-h-Math.sqrt(l))/(2*a),e=this.radius_g+c*e,n*=c,o*=c,t.x=Math.atan2(n,e),t.y=Math.atan(o*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var zg=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Ig={init:Eg,forward:Og,inverse:Ag,names:zg};function kg(t){t.Proj.projections.add(Os),t.Proj.projections.add(As),t.Proj.projections.add(Fm),t.Proj.projections.add(Jm),t.Proj.projections.add(ip),t.Proj.projections.add(rp),t.Proj.projections.add(dp),t.Proj.projections.add(gp),t.Proj.projections.add(bp),t.Proj.projections.add(Cp),t.Proj.projections.add(jp),t.Proj.projections.add(Xp),t.Proj.projections.add(iv),t.Proj.projections.add(hv),t.Proj.projections.add(dv),t.Proj.projections.add(gv),t.Proj.projections.add(bv),t.Proj.projections.add(Cv),t.Proj.projections.add(kv),t.Proj.projections.add(Dv),t.Proj.projections.add(Gv),t.Proj.projections.add(Kv),t.Proj.projections.add(tg),t.Proj.projections.add(og),t.Proj.projections.add(ug),t.Proj.projections.add(gg),t.Proj.projections.add(bg),t.Proj.projections.add(Cg),t.Proj.projections.add(Ig)}ee.defaultDatum="WGS84";ee.Proj=Oe;ee.WGS84=new ee.Proj("WGS84");ee.Point=Yi;ee.toPoint=lu;ee.defs=Ht;ee.nadgrid=W_;ee.transform=Fs;ee.mgrs=sm;ee.version="__VERSION__";kg(ee);const Bg=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),Ng=Xc(Bg);(function(t){(function(e){var n,o;n=Ql(),o=Ng,t.exports=e(n,o)})(function(e,n){return n.__esModule&&n.default&&(n=n.default),e.Proj={},e.Proj._isProj4Obj=function(o){return typeof o.inverse<"u"&&typeof o.forward<"u"},e.Proj.Projection=e.Class.extend({initialize:function(o,a,h){var l=e.Proj._isProj4Obj(o);this._proj=l?o:this._projFromCodeDef(o,a),this.bounds=l?a:h},project:function(o){var a=this._proj.forward([o.lng,o.lat]);return new e.Point(a[0],a[1])},unproject:function(o,a){var h=this._proj.inverse([o.x,o.y]);return new e.LatLng(h[1],h[0],a)},_projFromCodeDef:function(o,a){if(a)n.defs(o,a);else if(n.defs[o]===void 0){var h=o.split(":");if(h.length>3&&(o=h[h.length-3]+":"+h[h.length-1]),n.defs[o]===void 0)throw"No projection definition for code "+o}return n(o)}}),e.Proj.CRS=e.Class.extend({includes:e.CRS,options:{transformation:new e.Transformation(1,0,-1,0)},initialize:function(o,a,h){var l,c,d,_;if(e.Proj._isProj4Obj(o)?(c=o,l=c.srsCode,_=a||{},this.projection=new e.Proj.Projection(c,_.bounds)):(l=o,d=a,_=h||{},this.projection=new e.Proj.Projection(l,d,_.bounds)),e.Util.setOptions(this,_),this.code=l,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new e.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var v=this.options.resolutions.length-1;v>=0;v--)this.options.resolutions[v]&&(this._scales[v]=1/this.options.resolutions[v])}this.infinite=!this.options.bounds},scale:function(o){var a=Math.floor(o),h,l,c,d;return o===a?this._scales[o]:(h=this._scales[a],l=this._scales[a+1],c=l-h,d=o-a,h+c*d)},zoom:function(o){var a=this._closestElement(this._scales,o),h=this._scales.indexOf(a),l,c,d;return o===a?h:a===void 0?-1/0:(c=h+1,l=this._scales[c],l===void 0?1/0:(d=l-a,(o-a)/d+h))},distance:e.CRS.Earth.distance,R:e.CRS.Earth.R,_closestElement:function(o,a){for(var h,l=o.length;l--;)o[l]<=a&&(h===void 0||h<o[l])&&(h=o[l]);return h}}),e.Proj.GeoJSON=e.GeoJSON.extend({initialize:function(o,a){this._callLevel=0,e.GeoJSON.prototype.initialize.call(this,o,a)},addData:function(o){var a;o&&(o.crs&&o.crs.type==="name"?a=new e.Proj.CRS(o.crs.properties.name):o.crs&&o.crs.type&&(a=new e.Proj.CRS(o.crs.type+":"+o.crs.properties.code)),a!==void 0&&(this.options.coordsToLatLng=function(h){var l=e.point(h[0],h[1]);return a.projection.unproject(l)})),this._callLevel++;try{e.GeoJSON.prototype.addData.call(this,o)}finally{this._callLevel--,this._callLevel===0&&delete this.options.coordsToLatLng}}}),e.Proj.geoJson=function(o,a){return new e.Proj.GeoJSON(o,a)},e.Proj.ImageOverlay=e.ImageOverlay.extend({initialize:function(o,a,h){e.ImageOverlay.prototype.initialize.call(this,o,null,h),this._projectedBounds=a},_animateZoom:function(o){var a=this._map.getZoomScale(o.zoom),h=e.point(this._projectedBounds.min.x,this._projectedBounds.max.y),l=this._projectedToNewLayerPoint(h,o.zoom,o.center);e.DomUtil.setTransform(this._image,l,a)},_reset:function(){var o=this._map.getZoom(),a=this._map.getPixelOrigin(),h=e.bounds(this._transform(this._projectedBounds.min,o)._subtract(a),this._transform(this._projectedBounds.max,o)._subtract(a)),l=h.getSize();e.DomUtil.setPosition(this._image,h.min),this._image.style.width=l.x+"px",this._image.style.height=l.y+"px"},_projectedToNewLayerPoint:function(o,a,h){var l=this._map.getSize()._divideBy(2),c=this._map.project(h,a)._subtract(l)._round(),d=c.add(this._map._getMapPanePos());return this._transform(o,a)._subtract(d)},_transform:function(o,a){var h=this._map.options.crs,l=h.transformation,c=h.scale(a);return l.transform(o,c)}}),e.Proj.imageOverlay=function(o,a,h){return new e.Proj.ImageOverlay(o,a,h)},e.Proj})})(i_);const Zg={class:"modal-box"},Rg={class:"font-bold text-lg"},Dg={class:"font-bold text-blue-500"},Fg=pt("p",{class:"py-4"},"Now set the marker of your observation by clicking on the map",-1),qg={class:"modal-action"},Wg={__name:"LakeModal",props:{selectedAreaName:{type:String,required:!0},showModal:{type:Boolean,required:!0}},setup(t){return(e,n)=>(Pn(),qo("div",{class:kh(["modal",{"modal-open":t.showModal}])},[pt("div",Zg,[pt("h3",Rg,[Ih("You have chosen "),pt("span",Dg,Yc(t.selectedAreaName),1)]),Fg,pt("div",qg,[pt("button",{class:"btn",onClick:n[0]||(n[0]=o=>e.$emit("update:showModal",!1))}," Ok ")])])],2))}},Hg=pt("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Dashboard ",-1),Gg={class:"relative",style:{height:"calc(100vh - 138px)",width:"100%"}},jg={key:0,class:"absolute inset-0 flex flex-col items-center justify-center bg-primary opacity-80 z-10"},Ug={class:"spinner z-50"},$g={class:"loader"},Vg={class:"loader-bg"},Kg={class:"flex items-center justify-center"},Jg=pt("div",{class:"drops"},[pt("div",{class:"drop1"}),pt("div",{class:"drop2"})],-1),Xg=pt("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[pt("defs",null,[pt("filter",{id:"liquid"},[pt("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),pt("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"liquid"})])])],-1),Yg=pt("p",{class:"text-white flex items-center justify-center text-2xl font-semibold"}," Laeb veekogud... ",-1),Qg=pt("h3",{class:"font-bold text-lg"},"Please select a water source first",-1),n0={__name:"Dashboard",setup(t){const e=ht(null),n=ht(4),o=ht([51.505,-.09]);ht(13),ht(3),ht(!0),ht(!0),ht(!0),ht(!1),ht(!0);let a=ht(""),h=ht(!1),l=ht(!1);function c(){h.value=!h.value}function d(D){return{fillColor:D.properties&&D.properties.color?D.properties.color:"blue",color:"white",weight:2,opacity:1,fillOpacity:.7}}let _=ht(!1),v=null,p=ht(!1);const y=(D,I)=>{I.on("click",()=>{v&&v.setStyle({weight:3,color:"#3388ff"}),a=D.properties.nimi,I.setStyle({weight:5,color:"red"}),l.value=!0,console.log("show modal"),v=I,A.openTooltip()});const A=I.bindTooltip(D.properties.nimi,{permanent:!1,direction:"center",className:"my-tooltip"})};let M=ht(!0),b=et(58.379,24.554),P=Ct([60.4349,29.4338],[56.7458,20.373]),T=[],E=null;function k(){console.log("map ready"),E=e.value.leafletObject}function B(D){if(!v){h.value=!0;return}if(D.originalEvent.target.classList.contains("leaflet-interactive"))return;const I=D.latlng,A=Di.marker(I),Q=Di.popup().setContent(`
      <p class="mb-2 text-lg font-semibold text-gray-900">Add new observation spot?</p>
      <div class="flex space-x-2">
        <button id="yesButton" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Yes</button>
        <button id="noButton" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">No</button>
      </div>
    `);A.bindPopup(Q),Ae(()=>{E.invalidateSize(),E.addLayer(A),A.openPopup(),document.getElementById("yesButton").addEventListener("click",()=>{T.push(D.latlng),U(D.latlng)}),document.getElementById("noButton").addEventListener("click",()=>{E.removeLayer(A)}),E.on("popupclose",()=>{E.removeLayer(A)})})}function U(D){if(console.log("add new observation"),v){console.log("selected layer");const I=D,A=v.feature.properties.nimi;sf.post("/observations/create",{coordinates:I,name:A})}}var W=null,q=new Di.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:Di.bounds([40500,5993e3],[1064500,7017e3])});return He(()=>{fetch("/geojson/transformed_geojson.json").then(D=>D.json()).then(D=>{W=D}).then(()=>{_.value=!0,p.value=!0})}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(D=>{o.value=[D.coords.latitude,D.coords.longitude],n.value=9},D=>{n.value=9,console.error("Error obtaining geolocation: ",D)}),Fo([o,n],([D,I])=>{e.value&&(e.value={center:D,zoom:I})}),(D,I)=>(Pn(),Xr(of,{title:"Dashboard"},{header:Mn(()=>[Hg]),default:Mn(()=>[pt("main",Gg,[Nt(p)?Qc("",!0):(Pn(),qo("div",jg,[pt("div",Ug,[pt("div",$g,[pt("div",Vg,[pt("span",Kg,[pi(af,{class:"w-20 mt-4 h-20 fill-white"})])]),Jg]),Xg,Yg])])),pi(Nt(Mf),{ref_key:"map",ref:e,crs:Nt(q),zoom:n.value,"onUpdate:zoom":I[0]||(I[0]=A=>n.value=A),useGlobalLeaflet:!1,center:Nt(b),bounds:Nt(P),maxZoom:14,minZoom:3,scrollWheelZoom:!1,onClick:B,onReady:k},{default:Mn(()=>[pi(Nt(ih),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/vreljeef/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",tms:Nt(M),"full-screen":!1,worldCopyJump:!0,"z-index":1,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),pi(Nt(ih),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/hybriid/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",attribution:"Maa-ameti kaart, <a href='http://www.maaamet.ee'>Maa-amet</a>",tms:Nt(M),"full-screen":!1,worldCopyJump:!0,"z-index":2,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),pi(Nt(yf),{visible:Nt(_),options:{style:d,onEachFeature:y},geojson:Nt(W)},null,8,["visible","options","geojson"]),(Pn(!0),qo(ef,null,tf(Nt(T),(A,Q)=>(Pn(),Xr(Nt(Sf),{key:Q,"lat-lng":A},{default:Mn(()=>[pi(Nt(If),{ref_for:!0,ref:"popup"},{default:Mn(()=>[Ih(" Popup content ")]),_:1},512)]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["crs","zoom","center","bounds"]),pi(Wg,{showModal:Nt(l),selectedAreaName:Nt(a),"onUpdate:showModal":I[1]||(I[1]=A=>nf(l)?l.value=A:l=A)},null,8,["showModal","selectedAreaName"]),pt("div",{class:kh(["modal",{"modal-open":Nt(h)}])},[pt("div",{class:"modal-box"},[Qg,pt("div",{class:"modal-action"},[pt("button",{class:"btn",onClick:c}," Ok ")])])],2)])]),_:1}))}};export{n0 as default};
