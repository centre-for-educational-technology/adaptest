import{G as ue,H as ce,I as me,J as pe,F as q,K as _e,R as fe,S as ge,L as ve,M as be,N as he,P as ye,Q as we,V as ke,U as xe,W as Te,X as Ve,Y as Se,_ as Oe,$ as Ce,a0 as $e,k as Ue,a1 as Pe,c as te,f as R,e as w,a as l,a2 as Me,a3 as Be,a4 as Ee,a5 as je,a6 as Re,a7 as qe,g as A,b as a,a8 as De,a9 as Ne,D as J,aa as Ae,ab as Fe,ac as He,ad as Le,ae as Ie,af as ze,ag as Ge,ah as Ke,ai as Ze,aj as We,ak as Je,al as Qe,am as Xe,an as Ye,ao as et,E as tt,ap as st,aq as ot,ar as at,as as lt,at as rt,au as nt,av as it,aw as dt,ax as ut,ay as ct,z as mt,az as pt,aA as _t,aB as ft,aC as gt,aD as vt,aE as bt,aF as ht,m as yt,n as se,aG as wt,aH as kt,aI as xt,aJ as Tt,aK as Vt,aL as St,aM as Ot,aN as Ct,y as $t,aO as Ut,aP as Pt,aQ as Mt,aR as Bt,aS as oe,aT as Et,o as h,aU as jt,aV as Rt,aW as qt,aX as Dt,aY as Nt,aZ as At,a_ as Ft,d as M,a$ as Ht,b0 as Lt,h as H,r as It,b1 as zt,b2 as Gt,b3 as Kt,b4 as Zt,b5 as Wt,b6 as Jt,b7 as Qt,b8 as Xt,b9 as Yt,ba as es,bb as ts,bc as ss,bd as os,be as as,t as p,bf as ls,bg as rs,bh as ns,bi as is,bj as ds,bk as us,bl as cs,bm as ms,u as t,bn as ps,bo as _s,bp as fs,bq as gs,br as vs,bs,bt as hs,v as ys,bu as ws,bv as ks,bw as xs,C as W,A as ae,bx as Ts,by as Vs,x as le,bz as Ss,bA as Os,bB as Cs,bC as $s,w as F,bD as Us,l as L,bE as Ps,bF as Ms,i as re,bG as Bs,q as Es,p as js,bH as Rs,T as qs,O as K,j as Y}from"./app-785f0d0f.js";import{L as m,I as b}from"./Label-e605c726.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";import{C as T}from"./Checkbox-3f9f14c8.js";import{t as Ds,a as Ns,l as Z,m as As,v as ee,u as Fs,i as Hs}from"./pin-da8487c9.js";const Ls=()=>{},Is=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:ue,BaseTransitionPropsValidators:ce,Comment:me,EffectScope:pe,Fragment:q,KeepAlive:_e,ReactiveEffect:fe,Static:ge,Suspense:ve,Teleport:be,Text:he,Transition:ye,TransitionGroup:we,VueElement:ke,assertNumber:xe,callWithAsyncErrorHandling:Te,callWithErrorHandling:Ve,camelize:Se,capitalize:Oe,cloneVNode:Ce,compatUtils:$e,compile:Ls,computed:Ue,createApp:Pe,createBlock:te,createCommentVNode:R,createElementBlock:w,createElementVNode:l,createHydrationRenderer:Me,createPropsRestProxy:Be,createRenderer:Ee,createSSRApp:je,createSlots:Re,createStaticVNode:qe,createTextVNode:A,createVNode:a,customRef:De,defineAsyncComponent:Ne,defineComponent:J,defineCustomElement:Ae,defineEmits:Fe,defineExpose:He,defineModel:Le,defineOptions:Ie,defineProps:ze,defineSSRCustomElement:Ge,defineSlots:Ke,get devtools(){return Ze},effect:We,effectScope:Je,getCurrentInstance:Qe,getCurrentScope:Xe,getTransitionRawChildren:Ye,guardReactiveProps:et,h:tt,handleError:st,hasInjectionContext:ot,hydrate:at,initCustomFormatter:lt,initDirectivesForSSR:rt,inject:nt,isMemoSame:it,isProxy:dt,isReactive:ut,isReadonly:ct,isRef:mt,isRuntimeOnly:pt,isShallow:_t,isVNode:ft,markRaw:gt,mergeDefaults:vt,mergeModels:bt,mergeProps:ht,nextTick:yt,normalizeClass:se,normalizeProps:wt,normalizeStyle:kt,onActivated:xt,onBeforeMount:Tt,onBeforeUnmount:Vt,onBeforeUpdate:St,onDeactivated:Ot,onErrorCaptured:Ct,onMounted:$t,onRenderTracked:Ut,onRenderTriggered:Pt,onScopeDispose:Mt,onServerPrefetch:Bt,onUnmounted:oe,onUpdated:Et,openBlock:h,popScopeId:jt,provide:Rt,proxyRefs:qt,pushScopeId:Dt,queuePostFlushCb:Nt,reactive:At,readonly:Ft,ref:M,registerRuntimeCompiler:Ht,render:Lt,renderList:H,renderSlot:It,resolveComponent:zt,resolveDirective:Gt,resolveDynamicComponent:Kt,resolveFilter:Zt,resolveTransitionHooks:Wt,setBlockTracking:Jt,setDevtoolsHook:Qt,setTransitionHooks:Xt,shallowReactive:Yt,shallowReadonly:es,shallowRef:ts,ssrContextKey:ss,ssrUtils:os,stop:as,toDisplayString:p,toHandlerKey:ls,toHandlers:rs,toRaw:ns,toRef:is,toRefs:ds,toValue:us,transformVNodeArgs:cs,triggerRef:ms,unref:t,useAttrs:ps,useCssModule:_s,useCssVars:fs,useModel:gs,useSSRContext:vs,useSlots:bs,useTransitionState:hs,vModelCheckbox:ys,vModelDynamic:ws,vModelRadio:ks,vModelSelect:xs,vModelText:W,vShow:ae,version:Ts,warn:Vs,watch:le,watchEffect:Ss,watchPostEffect:Os,watchSyncEffect:Cs,withAsyncContext:$s,withCtx:F,withDefaults:Us,withDirectives:L,withKeys:Ps,withMemo:Ms,withModifiers:re,withScopeId:Bs},Symbol.toStringTag,{value:"Module"})),zs=J({props:["message"]}),Gs={class:"text-sm text-red-600"};function Ks(_,c,y,C,i,n){return L((h(),w("div",null,[l("p",Gs,p(_.message),1)],512)),[[ae,_.message]])}const u=ne(zs,[["render",Ks]]),Zs=J({props:["modelValue","options","multiple","placeholder","placeholderEnabled"],emits:["update:modelValue"],methods:{focus(){this.$refs.select.focus()}}}),Ws=["value","multiple"],Js=["disabled"],Qs=["value"];function Xs(_,c,y,C,i,n){return h(),w("select",{ref:"select",value:_.modelValue,onInput:c[0]||(c[0]=k=>_.$emit("update:modelValue",k.target.value)),multiple:_.multiple,class:"w-full select select-bordered"},[l("option",{disabled:!_.placeholderEnabled,value:""},p(_.placeholder),9,Js),(h(!0),w(q,null,H(_.options,(k,d)=>(h(),w("option",{value:d},p(k),9,Qs))),256))],40,Ws)}const P=ne(Zs,[["render",Xs]]);var ie={exports:{}};const Ys=Es(Is);(function(_,c){(function(C,i){_.exports=i(Ys)})(js,y=>(()=>{var C={772:(d,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=(v,B)=>{const V=v.__vccOpts||v;for(const[S,$]of B)V[S]=$;return V}},976:d=>{d.exports=y}},i={};function n(d){var e=i[d];if(e!==void 0)return e.exports;var v=i[d]={exports:{}};return C[d](v,v.exports,n),v.exports}n.d=(d,e)=>{for(var v in e)n.o(e,v)&&!n.o(d,v)&&Object.defineProperty(d,v,{enumerable:!0,get:e[v]})},n.o=(d,e)=>Object.prototype.hasOwnProperty.call(d,e),n.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var k={};return(()=>{n.r(k),n.d(k,{ToastComponent:()=>D,ToastPlugin:()=>N,ToastPositions:()=>g,default:()=>G,useToast:()=>U});var d=n(976);const e=(0,d.createElementVNode)("div",{class:"v-toast__icon"},null,-1),v=["innerHTML"];function B(r,s,o,f,x,j){return(0,d.openBlock)(),(0,d.createBlock)(d.Transition,{"enter-active-class":r.transition.enter,"leave-active-class":r.transition.leave},{default:(0,d.withCtx)(()=>[(0,d.withDirectives)((0,d.createElementVNode)("div",{ref:"root",role:"alert",class:(0,d.normalizeClass)(["v-toast__item",[`v-toast__item--${r.type}`,`v-toast__item--${r.position}`]]),onMouseover:s[0]||(s[0]=de=>r.toggleTimer(!0)),onMouseleave:s[1]||(s[1]=de=>r.toggleTimer(!1)),onClick:s[2]||(s[2]=function(){return r.whenClicked&&r.whenClicked(...arguments)})},[e,(0,d.createElementVNode)("p",{class:"v-toast__text",innerHTML:r.message},null,8,v)],34),[[d.vShow,r.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function V(r){var s;typeof r.remove<"u"?r.remove():(s=r.parentNode)==null||s.removeChild(r)}function S(r,s,o){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const x=(0,d.h)(r,s,f),j=document.createElement("div");return j.classList.add("v-toast--pending"),o.appendChild(j),(0,d.render)(x,j),x.component}class ${constructor(s,o){this.startedAt=Date.now(),this.callback=s,this.delay=o,this.timer=setTimeout(s,o)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const g=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function I(r){return{all:r=r||new Map,on:function(s,o){var f=r.get(s);f?f.push(o):r.set(s,[o])},off:function(s,o){var f=r.get(s);f&&(o?f.splice(f.indexOf(o)>>>0,1):r.set(s,[]))},emit:function(s,o){var f=r.get(s);f&&f.slice().map(function(x){x(o)}),(f=r.get("*"))&&f.slice().map(function(x){x(s,o)})}}}const E=I(),O=(0,d.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:g.BOTTOM_RIGHT,validator(r){return Object.values(g).includes(r)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),E.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const r=document.body;r.appendChild(this.parentTop),r.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const r=this.$refs.root;(0,d.render)(null,r),V(r)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const r=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),V(r),this.isActive=!0,this.duration&&(this.timer=new $(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(r){!this.pauseOnHover||!this.timer||(r?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return this.parentTop;case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){E.off("toast-clear",this.dismiss)}});var z=n(772);const D=(0,z.default)(O,[["render",B]]),U=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(s){let o=null;typeof s=="string"&&(o=s);const x=Object.assign({},{message:o},r,s);return{dismiss:S(D,x,document.body).ctx.dismiss}},clear(){E.emit("toast-clear")},success(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"success"},o))},error(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"error"},o))},info(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"info"},o))},warning(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"warning"},o))},default(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"default"},o))}}},N={install:function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=U(s);r.config.globalProperties.$toast=o,r.provide("$toast",o)}},G=N})(),k})())})(ie);var eo=ie.exports;const to={class:"px-4 max-w-screen-lg card bg-white dark:bg-base-100 shadow-xl my-5 mx-auto py-5 sm:p-6 rounded-md"},so={class:"hero-content text-center rounded bg-blue-700"},oo={class:"max-w-md"},ao={class:"text-xl text-white font-bold"},lo={class:"grid grid-cols-12 gap-6"},ro={key:0,class:"col-span-12"},no={class:"alert mt-5"},io=l("div",{class:"divider"},null,-1),uo={class:"mt-5 space-x-2 space-y-2 col-span-12"},co={key:0,class:"loading loading-spinner"},mo={class:"badge badge-ghost"},po={key:0},_o={class:"grid-cols-6"},fo={class:"w-48 rounded"},go=["src"],vo=["onClick"],bo=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ho=[bo],yo={class:"col-span-12"},wo={class:"col-span-12"},ko={class:"col-span-12"},xo={class:"col-span-12"},To={class:"col-span-12"},Vo=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),So=l("h3",{class:"col-span-12 text-center text-2xl font-bold"},"Füüsikalised-keemilised näitajad",-1),Oo={class:"col-span-6"},Co={class:"col-span-6"},$o={class:"col-span-6"},Uo={class:"col-span-6"},Po={class:"col-span-6"},Mo={class:"col-span-6"},Bo={class:"col-span-6"},Eo={class:"col-span-6"},jo={class:"col-span-6"},Ro={class:"col-span-6"},qo={class:"col-span-6"},Do={class:"col-span-6"},No=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),Ao=l("h3",{class:"col-span-12 text-center text-2xl font-bold"},"Hüdromorfoloogia",-1),Fo=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Veepiirist maismaa poole (kuni 10 m)",-1),Ho={class:"col-span-12"},Lo={class:"flex items-center"},Io=l("span",{class:"ml-2 text-sm text-gray-600"},p("Erosioon kaldaalalt"),-1),zo={class:"col-span-12"},Go={class:"col-span-12"},Ko={class:"col-span-12"},Zo=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),Wo=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Veepiirist veekogu poole (kuni 10 m)",-1),Jo={class:"col-span-12"},Qo={class:"flex items-center"},Xo=l("span",{class:"ml-2 text-sm text-gray-600"},p("Puujuures, oksad vms ulatuvad vett"),-1),Yo={class:"col-span-12"},ea={class:"col-span-12"},ta=l("div",{class:"col-span-12"},[l("div",{class:"divider"})],-1),sa=l("h4",{class:"col-span-12 text-center text-xl font-bold"},"Inimmõju (~50 m raadiuses vaatluskohast)",-1),oa={class:"col-span-12"},aa={class:"flex items-center"},la=l("span",{class:"ml-2 text-sm text-gray-600"},p("Ehitisi"),-1),ra={class:"col-span-12"},na={class:"flex items-center"},ia=l("span",{class:"ml-2 text-sm text-gray-600"},p("Põllumajanduslik tegevus"),-1),da={class:"col-span-12"},ua={class:"flex items-center"},ca=l("span",{class:"ml-2 text-sm text-gray-600"},p("Teed, parkimisplatsid"),-1),ma={class:"col-span-12"},pa={class:"flex items-center"},_a=l("span",{class:"ml-2 text-sm text-gray-600"},p("Park"),-1),fa={class:"col-span-12"},ga={class:"flex items-center"},va=l("span",{class:"ml-2 text-sm text-gray-600"},p("Supelrand"),-1),ba={class:"col-span-12"},ha={class:"flex items-center"},ya=l("span",{class:"ml-2 text-sm text-gray-600"},p("Paadisild, slip"),-1),wa={class:"col-span-12"},ka={class:"flex items-center"},xa=l("span",{class:"ml-2 text-sm text-gray-600"},p("Kaldakindlustusrajatised"),-1),Ta={class:"col-span-12"},Va={class:"flex items-center"},Sa=l("span",{class:"ml-2 text-sm text-gray-600"},p("Paisud, sillad"),-1),Oa={class:"col-span-12"},Ca={class:"flex items-center"},$a=l("span",{class:"ml-2 text-sm text-gray-600"},p("Kaldavööndi prügistamist"),-1),Ua={class:"col-span-12"},Pa={class:"flex items-center"},Ma=l("span",{class:"ml-2 text-sm text-gray-600"},p("Veereostust"),-1),Ba={class:"col-span-12"},Ea={class:"flex space-x-2 justify-end"},Aa={__name:"Form",props:{observation:{type:Object,required:!1,default:null},water_flows:{type:Object,required:!0},natures:{type:Object,required:!0},riparian_vegetations:{type:Object,required:!0},vegetation_coverages:{type:Object,required:!0},bottoms:{type:Object,required:!0},aquatic_vegetations:{type:Object,required:!0},coordinates:{type:Object,required:!0},name:{type:String,required:!0},water_body_kr_code:{type:String,required:!0},observation_spot_id:{type:Number,required:!0,default:null},photo_urls:{type:Object,required:!1,default:null}},setup(_){const c=_,y=Rs(),C="http://localhost/storage/observations/";let i=c.observation!==null,n=c.observation,k=M(!1),d=i?new Date(n.measuring_time):new Date;d=d.toISOString().slice(0,16);let e=qs({measuring_time:d,odor:i?n.odor:"",color_turbidity:i?n.color_turbidity:"",conditions:i?n.conditions:"",ph:i?n.ph:"",water_temperature:i?n.water_temperature:"",air_temperature:i?n.air_temperature:"",specific_conductance:i?n.specific_conductance:"",total_dissolved_solids:i?n.total_dissolved_solids:"",nitrate:i?n.nitrate:"",bicarbonate:i?n.bicarbonate:"",redox_potential:i?n.redox_potential:"",dissolved_oxygen_percent:i?n.dissolved_oxygen_percent:"",dissolved_oxygen_mgl:i?n.dissolved_oxygen_mgl:"",discharge:i?n.discharge:"",water_flow:i?n.water_flow.number:"",flow_direction:i?n.flow_direction:"",erosion:i?!!n.erosion:!1,nature:i?n.nature.number:"",riparian_vegetation:i?n.riparian_vegetation.number:"",vegetation_coverage:i?n.vegetation_coverage.number:"",tree_roots:i?!!n.tree_roots:!1,bottom:i?n.bottom.number:"",aquatic_vegetation:i?n.aquatic_vegetation.number:"",buildings:i?!!n.buildings:!1,agricultural_activity:i?!!n.agricultural_activity:!1,roads:i?!!n.roads:!1,park:i?!!n.park:!1,beach:i?!!n.beach:!1,boat_bridge:i?!!n.boat_bridge:!1,shore_facility:i?!!n.shore_facility:!1,dams:i?!!n.dams:!1,littering:i?!!n.littering:!1,water_pollution:i?!!n.water_pollution:!1,water_body_kr_code:c.water_body_kr_code,observation_spot_id:c.observation_spot_id,latitude:c.coordinates.lat,longitude:c.coordinates.lng,observation_spot_name:i?n.observation_spot.name:"",observation_spot_description:i?n.observation_spot.description:"",photos:[]});const v=M(null),B=M(null),V=M(10);let S=null,$=M(!0),g=Ds(58.379,24.554),I=Ns([60.4349,29.4338],[56.7458,20.373]);var Q=new Z.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:Z.bounds([40500,5993e3],[1064500,7017e3])});const E=Z.icon({iconUrl:As,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55]}),O=eo.useToast();le(c.coordinates,r=>{r&&S&&S.setView(r,V.value)});function z(){console.log("map ready"),S=v.value.leafletObject,S&&(S.scrollWheelZoom.disable(),c.coordinates&&S.setView(c.coordinates,V.value))}function X(r){r.target&&r.target.files?e.photos.value=[...r.target.files]:console.error("No photos found in the event.")}function D(){if(!e.photos.value||e.photos.value.length===0){O.error("Please add photos before uploading.");return}k.value=!0;let r=new FormData;e.photos.value.forEach(s=>{r.append("photos[]",s)}),K.post("/upload-files",r,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{k.value=!1,y.props.flash.message&&O.success(y.props.flash.message)},onError:()=>{k.value=!1,y.props.flash.message&&O.error(y.props.flash.message)}})}let U=()=>{const r={forceFormData:!0};e.transform(s=>({...s,photos:c.photo_urls,water_body_kr_code:c.water_body_kr_code,observation_spot_id:c.observation_spot_id})),i?e.transform(s=>({...s,photos:c.photo_urls,_method:"PUT"})).post(route("observations.update",n.id),r):e.post(route("observations.store"),r)};function N(r){let s=r.split("/"),o=s[s.length-1];K.delete(`/delete-file/${o}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{y.props.flash.message&&O.info(y.props.flash.message),console.log("File deleted successfully");let f=c.photo_urls.findIndex(x=>x===r);f!==-1&&c.photo_urls.splice(f,1),e.photos.splice(f,1)},onError:()=>{y.props.flash.message&&O.error(y.props.flash.message)}})}function G(){K.post("/clear-file-urls",{},{preserveState:!0,onSuccess:()=>{console.log("File urls cleared successfully")},onError:r=>console.error("Error clearing file urls",r)})}return oe(()=>{G()}),(r,s)=>(h(),w(q,null,[a(t(Hs),{ref_key:"map",ref:v,crs:t(Q),zoom:V.value,"onUpdate:zoom":s[0]||(s[0]=o=>V.value=o),style:{height:"400px",width:"100%"},useGlobalLeaflet:!1,center:t(g),bounds:t(I),maxZoom:14,minZoom:3,scrollWheelZoom:!1,onReady:z},{default:F(()=>[a(t(ee),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/vreljeef/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",tms:t($),"full-screen":!1,worldCopyJump:!0,"z-index":1,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),a(t(ee),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/hybriid/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",attribution:"Maa-ameti kaart, <a href='http://www.maaamet.ee'>Maa-amet</a>",tms:t($),"full-screen":!1,worldCopyJump:!0,"z-index":2,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),t(c).coordinates?(h(),te(t(Fs),{key:0,"lat-lng":t(c).coordinates,icon:t(E),ref_key:"marker",ref:B},null,8,["lat-lng","icon"])):R("",!0)]),_:1},8,["crs","zoom","center","bounds"]),l("form",{onSubmit:s[37]||(s[37]=re((...o)=>t(U)&&t(U)(...o),["prevent"]))},[l("div",to,[l("div",so,[l("div",oo,[l("h1",ao,p(r.$t("Selected water body:"))+" "+p(_.name),1)])]),l("div",lo,[t(c).observation_spot_id===null||t(c).observation_spot_id==="null"?(h(),w("div",ro,[l("div",no,p(r.$t("This is a new observation spot. Please fill the fields below.")),1),a(m,{for:"observation_spot_name",value:r.$t("New observation spot name *")},null,8,["value"]),a(b,{id:"observation_spot_name",class:"mt-1 block w-full",type:"text",ref:"observation_spot_name",autocomplete:"observation_spot_name",modelValue:t(e).observation_spot_name,"onUpdate:modelValue":s[1]||(s[1]=o=>t(e).observation_spot_name=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(u,{message:t(e).errors.observation_spot_name,class:"mt-2"},null,8,["message"]),a(m,{for:"observation_spot_description",value:r.$t("New observation spot description *")},null,8,["value"]),L(l("textarea",{id:"observation_spot_description",class:"mt-1 textarea-bordered textarea block w-full",ref:"observation_spot_description",autocomplete:"observation_spot_description","onUpdate:modelValue":s[2]||(s[2]=o=>t(e).observation_spot_description=o)},`
                    `,512),[[W,t(e).observation_spot_description,void 0,{trim:!0}]]),a(u,{message:t(e).errors.observation_spot_name,class:"mt-2"},null,8,["message"]),io])):R("",!0),l("div",uo,[l("input",{type:"file",multiple:"",onChange:X,class:"file-input file-input-bordered w-full max-w-xs",accept:".jpeg,.jpg,.png",placeholder:"Upload files (jpeg, jpg, png only)"},null,32),l("button",{class:"btn btn-accent",type:"button",onClick:D},[t(k)?(h(),w("span",co)):R("",!0),A(" Upload ")]),l("div",mo,p(r.$t("JPEG, JPG, PNG")),1),t(e).photos.length?(h(),w("ul",po,[(h(!0),w(q,null,H(t(e).photos,o=>(h(),w("li",{key:o.id},p(o.id)+" - "+p(o.name),1))),128))])):R("",!0),l("div",_o,[(h(!0),w(q,null,H(_.photo_urls,(o,f)=>(h(),w("div",{class:"avatar",key:f},[l("div",fo,[l("img",{src:C+o,alt:"image",class:"rounded"},null,8,go)]),l("button",{type:"button",onClick:x=>N(o),class:"btn m-2 btn-error"},ho,8,vo)]))),128))])]),l("div",yo,[a(m,{for:"measuring_time",value:r.$t("Time of measurement *")},null,8,["value"]),a(b,{id:"measuring_time",class:"mt-1 block w-full",modelValue:t(e).measuring_time,"onUpdate:modelValue":s[3]||(s[3]=o=>t(e).measuring_time=o),modelModifiers:{trim:!0},type:"datetime-local",ref_key:"measuring_time",ref:d,autocomplete:"measuring_time",dusk:"measuring_time"},null,8,["modelValue"]),a(u,{message:t(e).errors.measuring_time,class:"mt-2"},null,8,["message"])]),l("div",wo,[a(m,{for:"odor",value:r.$t("Odor")},null,8,["value"]),a(b,{id:"odor",class:"mt-1 block w-full",modelValue:t(e).odor,"onUpdate:modelValue":s[4]||(s[4]=o=>t(e).odor=o),modelModifiers:{trim:!0},type:"text",ref:"odor",autocomplete:"odor",dusk:"odor"},null,8,["modelValue"]),a(u,{message:t(e).errors.odor,class:"mt-2"},null,8,["message"])]),l("div",ko,[a(m,{for:"color_turbidity",value:r.$t("Color and turbidity")},null,8,["value"]),L(l("textarea",{id:"color_turbidity",class:"mt-1 textarea textarea-bordered block w-full","onUpdate:modelValue":s[5]||(s[5]=o=>t(e).color_turbidity=o),ref:"color_turbidity",autocomplete:"color_turbidity",dusk:"color_turbidity"},`
                    `,512),[[W,t(e).color_turbidity,void 0,{trim:!0}]]),a(u,{message:t(e).errors.color_turbidity,class:"mt-2"},null,8,["message"])]),l("div",xo,[a(m,{for:"conditions",value:r.$t("Description of natural conditions *")},null,8,["value"]),a(b,{id:"conditions",class:"mt-1 block w-full",modelValue:t(e).conditions,"onUpdate:modelValue":s[6]||(s[6]=o=>t(e).conditions=o),modelModifiers:{trim:!0},type:"text",ref:"conditions",autocomplete:"conditions",dusk:"conditions"},null,8,["modelValue"]),a(u,{message:t(e).errors.conditions,class:"mt-2"},null,8,["message"])]),l("div",To,[a(m,{for:"flow_direction",value:r.$t("Flow direction/water level")},null,8,["value"]),a(b,{id:"flow_direction",class:"mt-1 block w-full",modelValue:t(e).flow_direction,"onUpdate:modelValue":s[7]||(s[7]=o=>t(e).flow_direction=o),modelModifiers:{trim:!0},type:"text",ref:"flow_direction",autocomplete:"flow_direction",dusk:"flow_direction"},null,8,["modelValue"]),a(u,{message:t(e).errors.flow_direction,class:"mt-2"},null,8,["message"])]),Vo,So,l("div",Oo,[a(m,{for:"ph",value:r.$t("pH")},null,8,["value"]),a(b,{id:"ph",class:"mt-1 block w-full",modelValue:t(e).ph,"onUpdate:modelValue":s[8]||(s[8]=o=>t(e).ph=o),modelModifiers:{trim:!0},type:"number",ref:"ph",autocomplete:"ph",dusk:"ph"},null,8,["modelValue"]),a(u,{message:t(e).errors.ph,class:"mt-2"},null,8,["message"])]),l("div",Co,[a(m,{for:"water_temperature",value:r.$t("Water temperature")},null,8,["value"]),a(b,{id:"water_temperature",class:"mt-1 block w-full",modelValue:t(e).water_temperature,"onUpdate:modelValue":s[9]||(s[9]=o=>t(e).water_temperature=o),modelModifiers:{trim:!0},type:"number",ref:"water_temperature",autocomplete:"water_temperature",placeholder:"°C",dusk:"water_temperature"},null,8,["modelValue"]),a(u,{message:t(e).errors.water_temperature,class:"mt-2"},null,8,["message"])]),l("div",$o,[a(m,{for:"air_temperature",value:r.$t("Air temperature")},null,8,["value"]),a(b,{id:"air_temperature",class:"mt-1 block w-full",modelValue:t(e).air_temperature,"onUpdate:modelValue":s[10]||(s[10]=o=>t(e).air_temperature=o),modelModifiers:{trim:!0},placeholder:"°C",type:"number",ref:"air_temperature",autocomplete:"air_temperature",dusk:"air_temperature"},null,8,["modelValue"]),a(u,{message:t(e).errors.air_temperature,class:"mt-2"},null,8,["message"])]),l("div",Uo,[a(m,{for:"specific_conductance",value:r.$t("Specific conductance")},null,8,["value"]),a(b,{id:"specific_conductance",class:"mt-1 block w-full",modelValue:t(e).specific_conductance,"onUpdate:modelValue":s[11]||(s[11]=o=>t(e).specific_conductance=o),modelModifiers:{trim:!0},type:"number",ref:"specific_conductance",autocomplete:"specific_conductance",placeholder:"µS/cm",dusk:"specific_conductance"},null,8,["modelValue"]),a(u,{message:t(e).errors.specific_conductance,class:"mt-2"},null,8,["message"])]),l("div",Po,[a(m,{for:"total_dissolved_solids",value:r.$t("Total dissolved solids")},null,8,["value"]),a(b,{id:"total_dissolved_solids",class:"mt-1 block w-full",modelValue:t(e).total_dissolved_solids,"onUpdate:modelValue":s[12]||(s[12]=o=>t(e).total_dissolved_solids=o),modelModifiers:{trim:!0},placeholder:"mg/l",type:"number",ref:"total_dissolved_solids",autocomplete:"total_dissolved_solids",dusk:"total_dissolved_solids"},null,8,["modelValue"]),a(u,{message:t(e).errors.total_dissolved_solids,class:"mt-2"},null,8,["message"])]),l("div",Mo,[a(m,{for:"nitrate",value:r.$t("Nitrate (NO3)")},null,8,["value"]),a(b,{id:"nitrate",class:"mt-1 block w-full",modelValue:t(e).nitrate,"onUpdate:modelValue":s[13]||(s[13]=o=>t(e).nitrate=o),modelModifiers:{trim:!0},type:"number",ref:"nitrate",placeholder:"mg/l",autocomplete:"nitrate",dusk:"nitrate"},null,8,["modelValue"]),a(u,{message:t(e).errors.nitrate,class:"mt-2"},null,8,["message"])]),l("div",Bo,[a(m,{for:"bicarbonate",value:r.$t("Bicarbonate (HCO3)")},null,8,["value"]),a(b,{id:"bicarbonate",class:"mt-1 block w-full",modelValue:t(e).bicarbonate,"onUpdate:modelValue":s[14]||(s[14]=o=>t(e).bicarbonate=o),modelModifiers:{trim:!0},type:"number",placeholder:"mg/l",ref:"bicarbonate",autocomplete:"bicarbonate",dusk:"bicarbonate"},null,8,["modelValue"]),a(u,{message:t(e).errors.bicarbonate,class:"mt-2"},null,8,["message"])]),l("div",Eo,[a(m,{for:"redox_potential",value:r.$t("Redox potential")},null,8,["value"]),a(b,{id:"redox_potential",class:"mt-1 block w-full",modelValue:t(e).redox_potential,"onUpdate:modelValue":s[15]||(s[15]=o=>t(e).redox_potential=o),modelModifiers:{trim:!0},placeholder:"mV",type:"number",ref:"redox_potential",autocomplete:"redox_potential",dusk:"redox_potential"},null,8,["modelValue"]),a(u,{message:t(e).errors.redox_potential,class:"mt-2"},null,8,["message"])]),l("div",jo,[a(m,{for:"dissolved_oxygen_percent",value:r.$t("Dissolved oxygen (%)")},null,8,["value"]),a(b,{id:"dissolved_oxygen_percent",class:"mt-1 block w-full",placeholder:"%",modelValue:t(e).dissolved_oxygen_percent,"onUpdate:modelValue":s[16]||(s[16]=o=>t(e).dissolved_oxygen_percent=o),modelModifiers:{trim:!0},type:"number",ref:"dissolved_oxygen_percent",autocomplete:"dissolved_oxygen_percent",dusk:"dissolved_oxygen_percent"},null,8,["modelValue"]),a(u,{message:t(e).errors.dissolved_oxygen_percent,class:"mt-2"},null,8,["message"])]),l("div",Ro,[a(m,{for:"dissolved_oxygen_mgl",value:r.$t("Dissolved oxygen (mg/l)")},null,8,["value"]),a(b,{id:"dissolved_oxygen_mgl",class:"mt-1 block w-full",modelValue:t(e).dissolved_oxygen_mgl,"onUpdate:modelValue":s[17]||(s[17]=o=>t(e).dissolved_oxygen_mgl=o),modelModifiers:{trim:!0},type:"number",ref:"dissolved_oxygen_mgl",autocomplete:"dissolved_oxygen_mgl",placeholder:"mg/l",dusk:"dissolved_oxygen_mgl"},null,8,["modelValue"]),a(u,{message:t(e).errors.dissolved_oxygen_mgl,class:"mt-2"},null,8,["message"])]),l("div",qo,[a(m,{for:"discharge",value:r.$t("Discharge")},null,8,["value"]),a(b,{id:"discharge",class:"mt-1 block w-full",modelValue:t(e).discharge,"onUpdate:modelValue":s[18]||(s[18]=o=>t(e).discharge=o),modelModifiers:{trim:!0},type:"number",placeholder:"l/s",ref:"discharge",autocomplete:"discharge",dusk:"discharge"},null,8,["modelValue"]),a(u,{message:t(e).errors.discharge,class:"mt-2"},null,8,["message"])]),l("div",Do,[a(m,{for:"water_flow",value:r.$t("Flow velocity")},null,8,["value"]),a(P,{modelValue:t(e).water_flow,"onUpdate:modelValue":s[19]||(s[19]=o=>t(e).water_flow=o),options:_.water_flows,placeholder:"Please select one",class:"mt-2 block w-full",ref:"water_flow",autocomplete:"water_flow"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.water_flow,class:"mt-2"},null,8,["message"])]),No,Ao,Fo,l("div",Ho,[l("label",Lo,[a(T,{name:"erosion",checked:t(e).erosion,"onUpdate:checked":s[20]||(s[20]=o=>t(e).erosion=o)},null,8,["checked"]),Io]),a(u,{message:t(e).errors.erosion,class:"mt-2"},null,8,["message"])]),l("div",zo,[a(m,{for:"nature",value:"Kaldaala looduslikkus"}),a(P,{modelValue:t(e).nature,"onUpdate:modelValue":s[21]||(s[21]=o=>t(e).nature=o),options:_.natures,placeholder:"Please select one",class:"mt-2 block w-full",ref:"nature",autocomplete:"nature"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.nature,class:"mt-2"},null,8,["message"])]),l("div",Go,[a(m,{for:"riparian_vegetation",value:"Kaldaala taimestik"}),a(P,{modelValue:t(e).riparian_vegetation,"onUpdate:modelValue":s[22]||(s[22]=o=>t(e).riparian_vegetation=o),options:_.riparian_vegetations,placeholder:"Please select one",class:"mt-2 block w-full",ref:"riparian_vegetation",autocomplete:"riparian_vegetation"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.riparian_vegetation,class:"mt-2"},null,8,["message"])]),l("div",Ko,[a(m,{for:"vegetation_coverage",value:"Taimestiku katvus"}),a(P,{modelValue:t(e).vegetation_coverage,"onUpdate:modelValue":s[23]||(s[23]=o=>t(e).vegetation_coverage=o),options:_.vegetation_coverages,placeholder:"Please select one",class:"mt-2 block w-full",ref:"vegetation_coverage",autocomplete:"vegetation_coverage"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.vegetation_coverage,class:"mt-2"},null,8,["message"])]),Zo,Wo,l("div",Jo,[l("label",Qo,[a(T,{name:"tree_roots",checked:t(e).tree_roots,"onUpdate:checked":s[24]||(s[24]=o=>t(e).tree_roots=o)},null,8,["checked"]),Xo]),a(u,{message:t(e).errors.tree_roots,class:"mt-2"},null,8,["message"])]),l("div",Yo,[a(m,{for:"bottom",value:"Veekogu põhi"}),a(P,{modelValue:t(e).bottom,"onUpdate:modelValue":s[25]||(s[25]=o=>t(e).bottom=o),options:_.bottoms,placeholder:"Please select one",class:"mt-2 block w-full",ref:"bottom",autocomplete:"bottom"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.bottom,class:"mt-2"},null,8,["message"])]),l("div",ea,[a(m,{for:"aquatic_vegetation",value:"Veetaimestik"}),a(P,{modelValue:t(e).aquatic_vegetation,"onUpdate:modelValue":s[26]||(s[26]=o=>t(e).aquatic_vegetation=o),options:_.aquatic_vegetations,placeholder:"Please select one",class:"mt-2 block w-full",ref:"aquatic_vegetation",autocomplete:"aquatic_vegetation"},null,8,["modelValue","options"]),a(u,{message:t(e).errors.aquatic_vegetation,class:"mt-2"},null,8,["message"])]),ta,sa,l("div",oa,[l("label",aa,[a(T,{name:"buildings",checked:t(e).buildings,"onUpdate:checked":s[27]||(s[27]=o=>t(e).buildings=o)},null,8,["checked"]),la]),a(u,{message:t(e).errors.buildings,class:"mt-2"},null,8,["message"])]),l("div",ra,[l("label",na,[a(T,{name:"agricultural_activity",checked:t(e).agricultural_activity,"onUpdate:checked":s[28]||(s[28]=o=>t(e).agricultural_activity=o)},null,8,["checked"]),ia]),a(u,{message:t(e).errors.agricultural_activity,class:"mt-2"},null,8,["message"])]),l("div",da,[l("label",ua,[a(T,{name:"roads",checked:t(e).roads,"onUpdate:checked":s[29]||(s[29]=o=>t(e).roads=o)},null,8,["checked"]),ca]),a(u,{message:t(e).errors.roads,class:"mt-2"},null,8,["message"])]),l("div",ma,[l("label",pa,[a(T,{name:"park",checked:t(e).park,"onUpdate:checked":s[30]||(s[30]=o=>t(e).park=o)},null,8,["checked"]),_a]),a(u,{message:t(e).errors.park,class:"mt-2"},null,8,["message"])]),l("div",fa,[l("label",ga,[a(T,{name:"beach",checked:t(e).beach,"onUpdate:checked":s[31]||(s[31]=o=>t(e).beach=o)},null,8,["checked"]),va]),a(u,{message:t(e).errors.beach,class:"mt-2"},null,8,["message"])]),l("div",ba,[l("label",ha,[a(T,{name:"boat_bridge",checked:t(e).boat_bridge,"onUpdate:checked":s[32]||(s[32]=o=>t(e).boat_bridge=o)},null,8,["checked"]),ya]),a(u,{message:t(e).errors.boat_bridge,class:"mt-2"},null,8,["message"])]),l("div",wa,[l("label",ka,[a(T,{name:"shore_facility",checked:t(e).shore_facility,"onUpdate:checked":s[33]||(s[33]=o=>t(e).shore_facility=o)},null,8,["checked"]),xa]),a(u,{message:t(e).errors.shore_facility,class:"mt-2"},null,8,["message"])]),l("div",Ta,[l("label",Va,[a(T,{name:"dams",checked:t(e).dams,"onUpdate:checked":s[34]||(s[34]=o=>t(e).dams=o)},null,8,["checked"]),Sa]),a(u,{message:t(e).errors.dams,class:"mt-2"},null,8,["message"])]),l("div",Oa,[l("label",Ca,[a(T,{name:"littering",checked:t(e).littering,"onUpdate:checked":s[35]||(s[35]=o=>t(e).littering=o)},null,8,["checked"]),$a]),a(u,{message:t(e).errors.littering,class:"mt-2"},null,8,["message"])]),l("div",Ua,[l("label",Pa,[a(T,{name:"water_pollution",checked:t(e).water_pollution,"onUpdate:checked":s[36]||(s[36]=o=>t(e).water_pollution=o)},null,8,["checked"]),Ma]),a(u,{message:t(e).errors.water_pollution,class:"mt-2"},null,8,["message"])]),l("div",Ba,[l("div",Ea,[a(t(Y),{href:r.route("dashboard"),class:"btn btn-secondary",dusk:"cancel"},{default:F(()=>[A(p(r.$t("Cancel")),1)]),_:1},8,["href"]),a(t(Y),{onClick:t(U),class:se(["btn btn-primary",{"btn-disabled":t(e).processing}]),dusk:"save",href:"#"},{default:F(()=>[A(p(r.$t("Save")),1)]),_:1},8,["onClick","class"])])])])])],32)],64))}};export{Aa as default};
