import{d as c,y as R,o as s,c as C,w as k,a as t,t as o,u as e,b as u,f as p,g as h,e as l,h as b,j as O,F as v,i as x,z as N,n as B,B as j}from"./app-f3706b4b.js";import{l as f,m as z,a as I,v as T,u as F,i as W}from"./pin-0f35e0c1.js";import{_ as G}from"./AppLayout-3c8f2bb4.js";import{I as m}from"./iconify-beb32535.js";import"./Footer-77437aa5.js";const H={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},J={class:"relative",style:{height:"400px",width:"100%"}},Y={class:"text-gray-600 body-font"},Q={class:"container px-5 py-24 mx-auto"},X={class:"flex flex-wrap -m-4"},tt={class:"p-4 lg:w-1/3 md:w-full"},et={class:"card bg-base-100 shadow-xl"},ot={class:"card-body gap-4"},st={class:"card-title"},lt={class:"text-xl"},nt={key:0},at={class:"text-xl"},it={key:1},dt={class:"text-xl"},rt={class:"text-xl"},ut={class:"text-xl"},_t=["href"],ct={class:"text-xl"},ht={class:"p-4 lg:w-2/3 md:w-full"},yt={class:"card bg-base-100 shadow-xl"},mt={class:"card-body gap-4"},kt={key:0},pt=["src"],bt={class:"card-title"},vt={class:"text-lg leading-relaxed"},ft={class:"overflow-x-auto"},gt={class:"table"},wt={class:"flex items-center gap-3"},$t=["onClick"],St={class:"flex items-center gap-3"},At={class:"avatar"},Ct={class:"mask mask-squircle w-12 h-12"},Ot=["src","alt"],xt={class:"modal-box",style:{overflow:"hidden","border-radius":"10px"}},Nt={style:{overflow:"auto",height:"500px"}},jt={class:"font-bold text-lg"},zt={class:"table"},Tt={key:0},Ut={key:1},Dt={key:0},Zt={key:1},Et={key:0},Kt={key:1},Mt={key:0},Pt={key:1},Vt={key:0},qt={key:1},Lt={key:0},Rt={key:1},Bt={key:0},It={key:1},Ft={key:0},Wt={key:1},Gt={key:0},Ht={key:1},Jt={key:0},Yt={key:1},Qt={key:0},Xt={key:1},te={key:0},ee={key:1},oe={key:0},se={key:1},le={key:0},ne={key:1},ae={key:0},ie={key:1},de={key:0},re={key:1},ue={key:0},_e={key:1},ce={key:0},he={key:1},ye={key:0},me={key:1},ke={key:0},pe={key:1},be={key:0},ve={key:1},fe={key:0},ge={key:1},we={key:0},$e={key:1},Se={key:0},Ae={key:1},Ce={key:0},Oe={key:1},xe={key:0},Ne={key:1},je={key:0},ze={key:1},Te={key:0},Ue={key:1},De={key:0},Ze={key:1},Ee={key:0},Ke={key:1},Me={key:0},Pe={key:1},Ve={key:0},qe={key:1},Le={key:0},Re={key:1},Be={key:0},Ie={key:1},Fe={class:"modal-action"},Qe={__name:"Show",props:{observation_spot:{type:Object,required:!1,default:null},other_observation_spots:{type:Array,required:!1,default:()=>[]},water_body:{type:Object,required:!0},coordinates:{type:Object,required:!1,default:null},observations:{type:Object,required:!1,default:null}},setup(U){const d=U,w=c(null),$=c(6);let _=c(!1),n=c(null);const D=a=>{n.value=a,_.value=!0};function r(a){return a?j("Yes"):j("No")}const Z=f.icon({iconUrl:z,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55]});c(""),c(!1);let E=c(!1),S=c(!0),K=c(d.coordinates),M=I([60.4349,29.4338],[56.7458,20.373]),g=null;function P(){console.log("map ready"),g=w.value.leafletObject,g&&g.scrollWheelZoom.disable()}f.icon({iconUrl:z,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55],className:"marker-icon"});var V=new f.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:f.bounds([40500,5993e3],[1064500,7017e3])});const q="https://adaptest.ddev.site/storage/observations/";return R(async()=>{E.value=!0}),(a,y)=>(s(),C(G,{title:"Dashboard"},{header:k(()=>[t("h2",H,o(e(d).water_body.title)+" - "+o(e(d).observation_spot.name),1)]),default:k(()=>[t("main",J,[u(e(W),{ref_key:"map",ref:w,crs:e(V),zoom:$.value,"onUpdate:zoom":y[0]||(y[0]=i=>$.value=i),useGlobalLeaflet:!0,center:e(K),bounds:e(M),maxZoom:14,minZoom:3,scrollWheelZoom:!1,onReady:P},{default:k(()=>[u(e(T),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/vreljeef/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",tms:e(S),"full-screen":!1,worldCopyJump:!0,"z-index":1,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),u(e(T),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/hybriid/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",attribution:"Maa-ameti kaart, <a href='http://www.maaamet.ee'>Maa-amet</a>",tms:e(S),"full-screen":!1,worldCopyJump:!0,"z-index":2,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),e(d).coordinates?(s(),C(e(F),{key:0,"lat-lng":e(d).coordinates,icon:e(Z),ref:"marker"},null,8,["lat-lng","icon"])):p("",!0)]),_:1},8,["crs","zoom","center","bounds"])]),t("section",Y,[t("div",Q,[t("div",X,[t("div",tt,[t("div",et,[t("div",ot,[t("h2",st,o(e(d).water_body.title),1),t("div",null,[t("h3",lt,[u(e(m),{icon:"mdi:water",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("Type")),1)]),t("p",null,o(e(d).water_body.type),1)]),e(d).water_body.area?(s(),l("div",nt,[t("h3",at,[u(e(m),{icon:"carbon:area",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("Area")),1)]),t("p",null,o(e(d).water_body.area),1)])):p("",!0),e(d).water_body.watershed?(s(),l("div",it,[t("h3",dt,[u(e(m),{icon:"carbon:area",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("Watershed")),1)]),t("p",null,o(e(d).water_body.watershed),1)])):p("",!0),t("div",null,[t("h3",rt,[u(e(m),{icon:"tabler:id",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("Code")),1)]),t("p",null,o(e(d).water_body.code),1)]),t("div",null,[t("h3",ut,[u(e(m),{icon:"material-symbols:link",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("URL")),1)]),t("div",null,[t("a",{href:`https://register.keskkonnaportaal.ee/register?kkr_kood=${e(d).water_body.code}`,target:"_blank",class:"text-blue-500 hover:underline"}," Keskkonnaportaal ",8,_t)])]),t("div",null,[t("h3",ct,[u(e(m),{icon:"material-symbols:water",class:"w-6 h-6 inline-block"}),h(" "+o(a.$t("Other observation spots")),1)]),t("ul",null,[(s(!0),l(v,null,b(e(d).other_observation_spots,i=>(s(),l("li",{key:i.id},[u(e(O),{href:a.route("observation-spots.show",i.id),class:"text-blue-500 hover:underline"},{default:k(()=>[h(o(i.name),1)]),_:2},1032,["href"])]))),128))])])])])]),t("div",ht,[t("div",yt,[t("div",mt,[e(d).observations&&e(d).observations.some(i=>i.photos&&i.photos.length>0)?(s(),l("div",kt,[(s(!0),l(v,null,b(e(d).observations.filter(i=>i.photos&&i.photos.length>0),i=>(s(),l("div",{class:"grid mb-3 lg:grid-cols-2 gap-4",key:i.id},[(s(!0),l(v,null,b(i.photos,(A,L)=>(s(),l("div",{key:L},[t("img",{src:`${q}${A}`,alt:"Observation photo",class:"rounded-lg"},null,8,pt)]))),128))]))),128))])):p("",!0),t("h2",bt,o(e(d).observation_spot.name),1),t("p",vt,o(e(d).observation_spot.description),1),t("div",ft,[t("table",gt,[t("thead",null,[t("tr",null,[t("th",null,o(a.$t("Measuring time")),1),t("th",null,o(a.$t("Author")),1)])]),t("tbody",null,[(s(!0),l(v,null,b(e(d).observations,i=>(s(),l("tr",{key:i.id},[t("td",null,[t("div",wt,[t("a",{href:"#",class:"font-bold text-blue-500 hover:underline",onClick:x(A=>D(i),["prevent"])},o(i.measuring_time),9,$t)])]),t("td",null,[t("div",St,[t("div",At,[t("div",Ct,[t("img",{src:i.author.profile_photo_url,alt:i.author.name},null,8,Ot)])]),t("div",null,[u(e(O),{href:a.route("users.show",i.author.id),class:"font-bold text-blue-500 hover:underline"},{default:k(()=>[h(o(i.author.name),1)]),_:2},1032,["href"])])])])]))),128))]),t("tfoot",null,[t("tr",null,[t("th",null,o(a.$t("Measuring time")),1),t("th",null,o(a.$t("Author")),1)])])])])])])])])]),e(_)&&e(n)?(s(),l("div",{key:0,class:B(["modal",{"modal-open":e(_)}]),onClick:y[2]||(y[2]=x(i=>N(_)?_.value=!1:_=!1,["self"]))},[t("div",xt,[t("div",Nt,[t("h3",jt,o(a.$t("Observation details")),1),t("table",zt,[t("tr",null,[t("th",null,o(a.$t("Measuring time"))+":",1),e(n).measuring_time?(s(),l("td",Tt,o(e(n).measuring_time),1)):(s(),l("td",Ut,"-"))]),t("tr",null,[t("th",null,o(a.$t("Odor"))+":",1),e(n).odor?(s(),l("td",Dt,o(e(n).odor),1)):(s(),l("td",Zt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Color and turbidity"))+":",1),e(n).color_turbidity?(s(),l("td",Et,o(e(n).color_turbidity),1)):(s(),l("td",Kt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Description of natural conditions"))+":",1),e(n).conditions?(s(),l("td",Mt,o(e(n).conditions),1)):(s(),l("td",Pt,"-"))]),t("tr",null,[t("th",null,o(a.$t("pH"))+":",1),e(n).ph?(s(),l("td",Vt,o(e(n).ph),1)):(s(),l("td",qt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Water temperature"))+":",1),e(n).water_temperature?(s(),l("td",Lt,o(e(n).water_temperature),1)):(s(),l("td",Rt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Air temperature"))+":",1),e(n).air_temperature?(s(),l("td",Bt,o(e(n).air_temperature),1)):(s(),l("td",It,"-"))]),t("tr",null,[t("th",null,o(a.$t("Specific conductance"))+":",1),e(n).specific_conductance?(s(),l("td",Ft,o(e(n).specific_conductance),1)):(s(),l("td",Wt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Total dissolved solids"))+":",1),e(n).total_dissolved_solids?(s(),l("td",Gt,o(e(n).total_dissolved_solids),1)):(s(),l("td",Ht,"-"))]),t("tr",null,[t("th",null,o(a.$t("Nitrate (NO3)"))+":",1),e(n).nitrate?(s(),l("td",Jt,o(e(n).nitrate),1)):(s(),l("td",Yt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Bicarbonate (HCO3)"))+":",1),e(n).bicarbonate?(s(),l("td",Qt,o(e(n).bicarbonate),1)):(s(),l("td",Xt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Redox potential"))+":",1),e(n).redox_potential?(s(),l("td",te,o(e(n).redox_potential),1)):(s(),l("td",ee,"-"))]),t("tr",null,[t("th",null,o(a.$t("Dissolved oxygen (%)"))+":",1),e(n).dissolved_oxygen_percent?(s(),l("td",oe,o(e(n).dissolved_oxygen_percent),1)):(s(),l("td",se,"-"))]),t("tr",null,[t("th",null,o(a.$t("Dissolved oxygen (mg/l)"))+":",1),e(n).dissolved_oxygen_mgl?(s(),l("td",le,o(e(n).dissolved_oxygen_mgl),1)):(s(),l("td",ne,"-"))]),t("tr",null,[t("th",null,o(a.$t("Discharge"))+":",1),e(n).discharge?(s(),l("td",ae,o(e(n).discharge),1)):(s(),l("td",ie,"-"))]),t("tr",null,[t("th",null,o(a.$t("Flow velocity"))+":",1),e(n).water_flow.label?(s(),l("td",de,o(e(n).water_flow.label),1)):(s(),l("td",re,"-"))]),t("tr",null,[t("th",null,o(a.$t("Flow direction/water level"))+":",1),e(n).flow_direction?(s(),l("td",ue,o(e(n).flow_direction),1)):(s(),l("td",_e,"-"))]),t("tr",null,[t("th",null,o(a.$t("Erosion"))+":",1),e(n).erosion?(s(),l("td",ce,o(r(e(n).erosion)),1)):(s(),l("td",he,"-"))]),t("tr",null,[t("th",null,o(a.$t("Nature"))+":",1),e(n).nature.label?(s(),l("td",ye,o(e(n).nature.label),1)):(s(),l("td",me,"-"))]),t("tr",null,[t("th",null,o(a.$t("Riparian vegetation"))+":",1),e(n).riparian_vegetation.label?(s(),l("td",ke,o(e(n).riparian_vegetation.label),1)):(s(),l("td",pe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Vegetation coverage"))+":",1),e(n).vegetation_coverage.label?(s(),l("td",be,o(e(n).vegetation_coverage.label),1)):(s(),l("td",ve,"-"))]),t("tr",null,[t("th",null,o(a.$t("Puujuures, oksad vms ulatuvad vett"))+":",1),e(n).tree_roots?(s(),l("td",fe,o(r(e(n).tree_roots)),1)):(s(),l("td",ge,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veekogu põhi"))+":",1),e(n).bottom.label?(s(),l("td",we,o(e(n).bottom.label),1)):(s(),l("td",$e,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veetaimestik"))+":",1),e(n).aquatic_vegetation.label?(s(),l("td",Se,o(e(n).aquatic_vegetation.label),1)):(s(),l("td",Ae,"-"))]),t("tr",null,[t("th",null,o(a.$t("Ehitisi"))+":",1),e(n).buildings?(s(),l("td",Ce,o(r(e(n).buildings)),1)):(s(),l("td",Oe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Põllumajanduslik tegevus"))+":",1),e(n).agricultural_activity?(s(),l("td",xe,o(r(e(n).agricultural_activity)),1)):(s(),l("td",Ne,"-"))]),t("tr",null,[t("th",null,o(a.$t("Teed, parkimisplatsid"))+":",1),e(n).roads?(s(),l("td",je,o(r(e(n).roads)),1)):(s(),l("td",ze,"-"))]),t("tr",null,[t("th",null,o(a.$t("Park"))+":",1),e(n).park?(s(),l("td",Te,o(r(e(n).park)),1)):(s(),l("td",Ue,"-"))]),t("tr",null,[t("th",null,o(a.$t("Supelrand"))+":",1),e(n).beach?(s(),l("td",De,o(r(e(n).beach)),1)):(s(),l("td",Ze,"-"))]),t("tr",null,[t("th",null,o(a.$t("Paadisild, slip"))+":",1),e(n).boat_bridge?(s(),l("td",Ee,o(r(e(n).boat_bridge)),1)):(s(),l("td",Ke,"-"))]),t("tr",null,[t("th",null,o(a.$t("Kaldakindlustusrajatised"))+":",1),e(n).shore_facility?(s(),l("td",Me,o(r(e(n).shore_facility)),1)):(s(),l("td",Pe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Paisud, sillad"))+":",1),e(n).dams?(s(),l("td",Ve,o(r(e(n).dams)),1)):(s(),l("td",qe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Kaldavööndi prügistamist"))+":",1),e(n).littering?(s(),l("td",Le,o(r(e(n).littering)),1)):(s(),l("td",Re,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veereostust"))+":",1),e(n).water_pollution?(s(),l("td",Be,o(r(e(n).water_pollution)),1)):(s(),l("td",Ie,"-"))])]),t("div",Fe,[t("button",{class:"btn",onClick:y[1]||(y[1]=i=>N(_)?_.value=!1:_=!1)}," Ok ")])])])],2)):p("",!0)])]),_:1}))}};export{Qe as default};
