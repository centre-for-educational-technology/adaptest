import{d as u,y as V,x as q,o as s,c as $,w as k,a as t,t as o,u as e,b as _,f as b,g as y,e as l,h as S,j as x,F as A,i as C,z as N,n as R,B as O}from"./app-a0fe365f.js";import{l as v,m as z,t as B,a as I,v as j,u as F,i as W}from"./pin-342da1c3.js";import{_ as G}from"./AppLayout-fe426baf.js";import{I as m}from"./iconify-d10bec77.js";import"./Footer-8b1fa084.js";const H={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},J={class:"relative",style:{height:"400px",width:"100%"}},Y={class:"text-gray-600 body-font"},Q={class:"container px-5 py-24 mx-auto"},X={class:"flex flex-wrap -m-4"},tt={class:"p-4 lg:w-1/3 md:w-full"},et={class:"card bg-base-100 shadow-xl"},ot={class:"card-body gap-4"},st={class:"card-title"},lt={class:"text-xl"},nt={key:0},at={class:"text-xl"},it={key:1},dt={class:"text-xl"},rt={class:"text-xl"},ut={class:"text-xl"},_t=["href"],ct={class:"text-xl"},ht={class:"p-4 lg:w-2/3 md:w-full"},yt={class:"card bg-base-100 shadow-xl"},mt={class:"card-body gap-4"},kt={class:"card-title"},pt={class:"text-lg leading-relaxed"},bt={class:"overflow-x-auto"},vt={class:"table"},ft={class:"flex items-center gap-3"},gt=["onClick"],wt={class:"flex items-center gap-3"},$t={class:"avatar"},St={class:"mask mask-squircle w-12 h-12"},xt=["src","alt"],At={class:"modal-box",style:{overflow:"hidden","border-radius":"10px"}},Ct={style:{overflow:"auto",height:"500px"}},Nt={class:"font-bold text-lg"},Ot={class:"table"},zt={key:0},jt={key:1},Tt={key:0},Ut={key:1},Dt={key:0},Lt={key:1},Zt={key:0},Et={key:1},Kt={key:0},Mt={key:1},Pt={key:0},Vt={key:1},qt={key:0},Rt={key:1},Bt={key:0},It={key:1},Ft={key:0},Wt={key:1},Gt={key:0},Ht={key:1},Jt={key:0},Yt={key:1},Qt={key:0},Xt={key:1},te={key:0},ee={key:1},oe={key:0},se={key:1},le={key:0},ne={key:1},ae={key:0},ie={key:1},de={key:0},re={key:1},ue={key:0},_e={key:1},ce={key:0},he={key:1},ye={key:0},me={key:1},ke={key:0},pe={key:1},be={key:0},ve={key:1},fe={key:0},ge={key:1},we={key:0},$e={key:1},Se={key:0},xe={key:1},Ae={key:0},Ce={key:1},Ne={key:0},Oe={key:1},ze={key:0},je={key:1},Te={key:0},Ue={key:1},De={key:0},Le={key:1},Ze={key:0},Ee={key:1},Ke={key:0},Me={key:1},Pe={key:0},Ve={key:1},qe={key:0},Re={key:1},Be={class:"modal-action"},Ye={__name:"Show",props:{observation_spot:{type:Object,required:!1,default:null},other_observation_spots:{type:Array,required:!1,default:()=>[]},water_body:{type:Object,required:!0},coordinates:{type:Object,required:!1,default:null},observations:{type:Object,required:!1,default:null}},setup(T){const i=T,p=u(null),f=u(4),U=u([51.505,-.09]);u(!0),u(!0),u(!1);let c=u(!1),n=u(null);const D=a=>{n.value=a,c.value=!0};function r(a){return a?O("Yes"):O("No")}const L=v.icon({iconUrl:z,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55]});u(""),u(!1);let Z=u(!1),w=u(!0),E=B(58.379,24.554),K=I([60.4349,29.4338],[56.7458,20.373]),g=null;function M(){console.log("map ready"),g=p.value.leafletObject,g&&g.scrollWheelZoom.disable()}v.icon({iconUrl:z,iconSize:[55,55],iconAnchor:[25,55],popupAnchor:[0,-55],className:"marker-icon"});var P=new v.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:v.bounds([40500,5993e3],[1064500,7017e3])});return V(async()=>{Z.value=!0}),q([U,f],([a,h])=>{p.value&&(p.value={center:a,zoom:h})}),(a,h)=>(s(),$(G,{title:"Dashboard"},{header:k(()=>[t("h2",H,o(e(i).water_body.title)+" - "+o(e(i).observation_spot.name),1)]),default:k(()=>[t("main",J,[_(e(W),{ref_key:"map",ref:p,crs:e(P),zoom:f.value,"onUpdate:zoom":h[0]||(h[0]=d=>f.value=d),useGlobalLeaflet:!0,center:e(E),bounds:e(K),maxZoom:14,minZoom:3,scrollWheelZoom:!1,onReady:M},{default:k(()=>[_(e(j),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/vreljeef/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",tms:e(w),"full-screen":!1,worldCopyJump:!0,"z-index":1,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),_(e(j),{url:"https://tiles.maaamet.ee/tm/tms/1.0.0/hybriid/{z}/{x}/{y}.png&ASUTUS=TLU&KESKKOND=ADAPTEST",attribution:"Maa-ameti kaart, <a href='http://www.maaamet.ee'>Maa-amet</a>",tms:e(w),"full-screen":!1,worldCopyJump:!0,"z-index":2,options:{maxNativeZoom:13,maxZoom:13,minZoom:3}},null,8,["tms"]),e(i).coordinates?(s(),$(e(F),{key:0,"lat-lng":e(i).coordinates,icon:e(L),ref:"marker"},null,8,["lat-lng","icon"])):b("",!0)]),_:1},8,["crs","zoom","center","bounds"])]),t("section",Y,[t("div",Q,[t("div",X,[t("div",tt,[t("div",et,[t("div",ot,[t("h2",st,o(e(i).water_body.title),1),t("div",null,[t("h3",lt,[_(e(m),{icon:"mdi:water",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("Type")),1)]),t("p",null,o(e(i).water_body.type),1)]),e(i).water_body.area?(s(),l("div",nt,[t("h3",at,[_(e(m),{icon:"carbon:area",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("Area")),1)]),t("p",null,o(e(i).water_body.area),1)])):b("",!0),e(i).water_body.watershed?(s(),l("div",it,[t("h3",dt,[_(e(m),{icon:"carbon:area",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("Watershed")),1)]),t("p",null,o(e(i).water_body.watershed),1)])):b("",!0),t("div",null,[t("h3",rt,[_(e(m),{icon:"tabler:id",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("Code")),1)]),t("p",null,o(e(i).water_body.code),1)]),t("div",null,[t("h3",ut,[_(e(m),{icon:"material-symbols:link",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("URL")),1)]),t("div",null,[t("a",{href:`https://register.keskkonnaportaal.ee/register?kkr_kood=${e(i).water_body.code}`,target:"_blank",class:"text-blue-500 hover:underline"}," Keskkonnaportaal ",8,_t)])]),t("div",null,[t("h3",ct,[_(e(m),{icon:"material-symbols:water",class:"w-6 h-6 inline-block"}),y(" "+o(a.$t("Other observation spots")),1)]),t("ul",null,[(s(!0),l(A,null,S(e(i).other_observation_spots,d=>(s(),l("li",{key:d.id},[_(e(x),{href:a.route("observation-spots.show",d.id),class:"text-blue-500 hover:underline"},{default:k(()=>[y(o(d.name),1)]),_:2},1032,["href"])]))),128))])])])])]),t("div",ht,[t("div",yt,[t("div",mt,[t("h2",kt,o(e(i).observation_spot.name),1),t("p",pt,o(e(i).observation_spot.description),1),t("div",bt,[t("table",vt,[t("thead",null,[t("tr",null,[t("th",null,o(a.$t("Measuring time")),1),t("th",null,o(a.$t("Author")),1)])]),t("tbody",null,[(s(!0),l(A,null,S(e(i).observations,d=>(s(),l("tr",{key:d.id},[t("td",null,[t("div",ft,[t("a",{href:"#",class:"font-bold text-blue-500 hover:underline",onClick:C(Ie=>D(d),["prevent"])},o(d.measuring_time),9,gt)])]),t("td",null,[t("div",wt,[t("div",$t,[t("div",St,[t("img",{src:d.author.profile_photo_url,alt:d.author.name},null,8,xt)])]),t("div",null,[_(e(x),{href:a.route("users.show",d.author.id),class:"font-bold text-blue-500 hover:underline"},{default:k(()=>[y(o(d.author.name),1)]),_:2},1032,["href"])])])])]))),128))]),t("tfoot",null,[t("tr",null,[t("th",null,o(a.$t("Measuring time")),1),t("th",null,o(a.$t("Author")),1)])])])])])])])])]),e(c)&&e(n)?(s(),l("div",{key:0,class:R(["modal",{"modal-open":e(c)}]),onClick:h[2]||(h[2]=C(d=>N(c)?c.value=!1:c=!1,["self"]))},[t("div",At,[t("div",Ct,[t("h3",Nt,o(a.$t("Observation details")),1),t("table",Ot,[t("tr",null,[t("th",null,o(a.$t("Measuring time"))+":",1),e(n).measuring_time?(s(),l("td",zt,o(e(n).measuring_time),1)):(s(),l("td",jt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Odor"))+":",1),e(n).odor?(s(),l("td",Tt,o(e(n).odor),1)):(s(),l("td",Ut,"-"))]),t("tr",null,[t("th",null,o(a.$t("Color and turbidity"))+":",1),e(n).color_turbidity?(s(),l("td",Dt,o(e(n).color_turbidity),1)):(s(),l("td",Lt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Description of natural conditions"))+":",1),e(n).conditions?(s(),l("td",Zt,o(e(n).conditions),1)):(s(),l("td",Et,"-"))]),t("tr",null,[t("th",null,o(a.$t("pH"))+":",1),e(n).ph?(s(),l("td",Kt,o(e(n).ph),1)):(s(),l("td",Mt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Water temperature"))+":",1),e(n).water_temperature?(s(),l("td",Pt,o(e(n).water_temperature),1)):(s(),l("td",Vt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Air temperature"))+":",1),e(n).air_temperature?(s(),l("td",qt,o(e(n).air_temperature),1)):(s(),l("td",Rt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Specific conductance"))+":",1),e(n).specific_conductance?(s(),l("td",Bt,o(e(n).specific_conductance),1)):(s(),l("td",It,"-"))]),t("tr",null,[t("th",null,o(a.$t("Total dissolved solids"))+":",1),e(n).total_dissolved_solids?(s(),l("td",Ft,o(e(n).total_dissolved_solids),1)):(s(),l("td",Wt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Nitrate (NO3)"))+":",1),e(n).nitrate?(s(),l("td",Gt,o(e(n).nitrate),1)):(s(),l("td",Ht,"-"))]),t("tr",null,[t("th",null,o(a.$t("Bicarbonate (HCO3)"))+":",1),e(n).bicarbonate?(s(),l("td",Jt,o(e(n).bicarbonate),1)):(s(),l("td",Yt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Redox potential"))+":",1),e(n).redox_potential?(s(),l("td",Qt,o(e(n).redox_potential),1)):(s(),l("td",Xt,"-"))]),t("tr",null,[t("th",null,o(a.$t("Dissolved oxygen (%)"))+":",1),e(n).dissolved_oxygen_percent?(s(),l("td",te,o(e(n).dissolved_oxygen_percent),1)):(s(),l("td",ee,"-"))]),t("tr",null,[t("th",null,o(a.$t("Dissolved oxygen (mg/l)"))+":",1),e(n).dissolved_oxygen_mgl?(s(),l("td",oe,o(e(n).dissolved_oxygen_mgl),1)):(s(),l("td",se,"-"))]),t("tr",null,[t("th",null,o(a.$t("Discharge"))+":",1),e(n).discharge?(s(),l("td",le,o(e(n).discharge),1)):(s(),l("td",ne,"-"))]),t("tr",null,[t("th",null,o(a.$t("Flow velocity"))+":",1),e(n).water_flow.label?(s(),l("td",ae,o(e(n).water_flow.label),1)):(s(),l("td",ie,"-"))]),t("tr",null,[t("th",null,o(a.$t("Flow direction/water level"))+":",1),e(n).flow_direction?(s(),l("td",de,o(e(n).flow_direction),1)):(s(),l("td",re,"-"))]),t("tr",null,[t("th",null,o(a.$t("Erosion"))+":",1),e(n).erosion?(s(),l("td",ue,o(r(e(n).erosion)),1)):(s(),l("td",_e,"-"))]),t("tr",null,[t("th",null,o(a.$t("Nature"))+":",1),e(n).nature.label?(s(),l("td",ce,o(e(n).nature.label),1)):(s(),l("td",he,"-"))]),t("tr",null,[t("th",null,o(a.$t("Riparian vegetation"))+":",1),e(n).riparian_vegetation.label?(s(),l("td",ye,o(e(n).riparian_vegetation.label),1)):(s(),l("td",me,"-"))]),t("tr",null,[t("th",null,o(a.$t("Vegetation coverage"))+":",1),e(n).vegetation_coverage.label?(s(),l("td",ke,o(e(n).vegetation_coverage.label),1)):(s(),l("td",pe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Puujuures, oksad vms ulatuvad vett"))+":",1),e(n).tree_roots?(s(),l("td",be,o(r(e(n).tree_roots)),1)):(s(),l("td",ve,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veekogu põhi"))+":",1),e(n).bottom.label?(s(),l("td",fe,o(e(n).bottom.label),1)):(s(),l("td",ge,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veetaimestik"))+":",1),e(n).aquatic_vegetation.label?(s(),l("td",we,o(e(n).aquatic_vegetation.label),1)):(s(),l("td",$e,"-"))]),t("tr",null,[t("th",null,o(a.$t("Ehitisi"))+":",1),e(n).buildings?(s(),l("td",Se,o(r(e(n).buildings)),1)):(s(),l("td",xe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Põllumajanduslik tegevus"))+":",1),e(n).agricultural_activity?(s(),l("td",Ae,o(r(e(n).agricultural_activity)),1)):(s(),l("td",Ce,"-"))]),t("tr",null,[t("th",null,o(a.$t("Teed, parkimisplatsid"))+":",1),e(n).roads?(s(),l("td",Ne,o(r(e(n).roads)),1)):(s(),l("td",Oe,"-"))]),t("tr",null,[t("th",null,o(a.$t("Park"))+":",1),e(n).park?(s(),l("td",ze,o(r(e(n).park)),1)):(s(),l("td",je,"-"))]),t("tr",null,[t("th",null,o(a.$t("Supelrand"))+":",1),e(n).beach?(s(),l("td",Te,o(r(e(n).beach)),1)):(s(),l("td",Ue,"-"))]),t("tr",null,[t("th",null,o(a.$t("Paadisild, slip"))+":",1),e(n).boat_bridge?(s(),l("td",De,o(r(e(n).boat_bridge)),1)):(s(),l("td",Le,"-"))]),t("tr",null,[t("th",null,o(a.$t("Kaldakindlustusrajatised"))+":",1),e(n).shore_facility?(s(),l("td",Ze,o(r(e(n).shore_facility)),1)):(s(),l("td",Ee,"-"))]),t("tr",null,[t("th",null,o(a.$t("Paisud, sillad"))+":",1),e(n).dams?(s(),l("td",Ke,o(r(e(n).dams)),1)):(s(),l("td",Me,"-"))]),t("tr",null,[t("th",null,o(a.$t("Kaldavööndi prügistamist"))+":",1),e(n).littering?(s(),l("td",Pe,o(r(e(n).littering)),1)):(s(),l("td",Ve,"-"))]),t("tr",null,[t("th",null,o(a.$t("Veereostust"))+":",1),e(n).water_pollution?(s(),l("td",qe,o(r(e(n).water_pollution)),1)):(s(),l("td",Re,"-"))])]),t("div",Be,[t("button",{class:"btn",onClick:h[1]||(h[1]=d=>N(c)?c.value=!1:c=!1)}," Ok ")])])])],2)):b("",!0)])]),_:1}))}};export{Ye as default};
